<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/abstract/index.html">❱ abstract</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/abstract/BaseRainterpreterExternNPE2.sol/abstract.BaseRainterpreterExternNPE2.html">BaseRainterpreterExternNPE2</a></li><li class="chapter-item "><a href="src/abstract/BaseRainterpreterExternNPE2.sol/constants.BaseRainterpreterExternNPE2.html">BaseRainterpreterExternNPE2 constants</a></li><li class="chapter-item "><a href="src/abstract/BaseRainterpreterSubParserNPE2.sol/abstract.BaseRainterpreterSubParserNPE2.html">BaseRainterpreterSubParserNPE2</a></li><li class="chapter-item "><a href="src/abstract/BaseRainterpreterSubParserNPE2.sol/constants.BaseRainterpreterSubParserNPE2.html">BaseRainterpreterSubParserNPE2 constants</a></li><li class="chapter-item "><a href="src/abstract/DeployerDiscoverableMetaV3.sol/struct.DeployerDiscoverableMetaV3ConstructionConfig.html">DeployerDiscoverableMetaV3ConstructionConfig</a></li><li class="chapter-item "><a href="src/abstract/DeployerDiscoverableMetaV3.sol/abstract.DeployerDiscoverableMetaV3.html">DeployerDiscoverableMetaV3</a></li></ol></li><li class="chapter-item "><a href="src/concrete/index.html">❱ concrete</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol/struct.RainterpreterExpressionDeployerNPE2ConstructionConfig.html">RainterpreterExpressionDeployerNPE2ConstructionConfig</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol/contract.RainterpreterExpressionDeployerNPE2.html">RainterpreterExpressionDeployerNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol/constants.RainterpreterExpressionDeployerNPE2.html">RainterpreterExpressionDeployerNPE2 constants</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterNPE2.sol/contract.RainterpreterNPE2.html">RainterpreterNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterNPE2.sol/constants.RainterpreterNPE2.html">RainterpreterNPE2 constants</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterParserNPE2.sol/contract.RainterpreterParserNPE2.html">RainterpreterParserNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterParserNPE2.sol/constants.RainterpreterParserNPE2.html">RainterpreterParserNPE2 constants</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/library.LibExternOpIntIncNPE2.html">LibExternOpIntIncNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/library.LibExternOpStackOperandNPE2.html">LibExternOpStackOperandNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/library.LibRainterpreterReferenceExternNPE2.html">LibRainterpreterReferenceExternNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/contract.RainterpreterReferenceExternNPE2.html">RainterpreterReferenceExternNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/constants.RainterpreterReferenceExternNPE2.html">RainterpreterReferenceExternNPE2 constants</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterStoreNPE2.sol/error.OddSetLength.html">OddSetLength</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterStoreNPE2.sol/contract.RainterpreterStoreNPE2.html">RainterpreterStoreNPE2</a></li><li class="chapter-item "><a href="src/concrete/RainterpreterStoreNPE2.sol/constants.RainterpreterStoreNPE2.html">RainterpreterStoreNPE2 constants</a></li></ol></li><li class="chapter-item "><a href="src/error/index.html">❱ error</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/error/ErrBitwise.sol/contract.ErrBitwise.html">ErrBitwise</a></li><li class="chapter-item "><a href="src/error/ErrBitwise.sol/error.UnsupportedBitwiseShiftAmount.html">UnsupportedBitwiseShiftAmount</a></li><li class="chapter-item "><a href="src/error/ErrBitwise.sol/error.TruncatedBitwiseEncoding.html">TruncatedBitwiseEncoding</a></li><li class="chapter-item "><a href="src/error/ErrBitwise.sol/error.ZeroLengthBitwiseEncoding.html">ZeroLengthBitwiseEncoding</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/contract.ErrBytecode.html">ErrBytecode</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.SourceIndexOutOfBounds.html">SourceIndexOutOfBounds</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.UnexpectedSources.html">UnexpectedSources</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.UnexpectedTrailingOffsetBytes.html">UnexpectedTrailingOffsetBytes</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.TruncatedSource.html">TruncatedSource</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.TruncatedHeader.html">TruncatedHeader</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.TruncatedHeaderOffsets.html">TruncatedHeaderOffsets</a></li><li class="chapter-item "><a href="src/error/ErrBytecode.sol/error.StackSizingsNotMonotonic.html">StackSizingsNotMonotonic</a></li><li class="chapter-item "><a href="src/error/ErrDeploy.sol/contract.ErrDeploy.html">ErrDeploy</a></li><li class="chapter-item "><a href="src/error/ErrDeploy.sol/error.UnexpectedPointers.html">UnexpectedPointers</a></li><li class="chapter-item "><a href="src/error/ErrDeploy.sol/error.UnexpectedInterpreterBytecodeHash.html">UnexpectedInterpreterBytecodeHash</a></li><li class="chapter-item "><a href="src/error/ErrDeploy.sol/error.UnexpectedStoreBytecodeHash.html">UnexpectedStoreBytecodeHash</a></li><li class="chapter-item "><a href="src/error/ErrDeploy.sol/error.UnexpectedParserBytecodeHash.html">UnexpectedParserBytecodeHash</a></li><li class="chapter-item "><a href="src/error/ErrDeploy.sol/error.UnexpectedConstructionMetaHash.html">UnexpectedConstructionMetaHash</a></li><li class="chapter-item "><a href="src/error/ErrExtern.sol/contract.ErrExtern.html">ErrExtern</a></li><li class="chapter-item "><a href="src/error/ErrExtern.sol/error.NotAnExternContract.html">NotAnExternContract</a></li><li class="chapter-item "><a href="src/error/ErrExtern.sol/error.BadInputs.html">BadInputs</a></li><li class="chapter-item "><a href="src/error/ErrOpList.sol/contract.ErrOpList.html">ErrOpList</a></li><li class="chapter-item "><a href="src/error/ErrOpList.sol/error.BadDynamicLength.html">BadDynamicLength</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/contract.ErrParse.html">ErrParse</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnexpectedOperand.html">UnexpectedOperand</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnexpectedOperandValue.html">UnexpectedOperandValue</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ExpectedOperand.html">ExpectedOperand</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.OperandOverflow.html">OperandOverflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.OperandValuesOverflow.html">OperandValuesOverflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnclosedOperand.html">UnclosedOperand</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnsupportedLiteralType.html">UnsupportedLiteralType</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.StringTooLong.html">StringTooLong</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnclosedStringLiteral.html">UnclosedStringLiteral</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.HexLiteralOverflow.html">HexLiteralOverflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ZeroLengthHexLiteral.html">ZeroLengthHexLiteral</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.OddLengthHexLiteral.html">OddLengthHexLiteral</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.MalformedHexLiteral.html">MalformedHexLiteral</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.DecimalLiteralOverflow.html">DecimalLiteralOverflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.MalformedExponentDigits.html">MalformedExponentDigits</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ZeroLengthDecimal.html">ZeroLengthDecimal</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.MissingFinalSemi.html">MissingFinalSemi</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnexpectedLHSChar.html">UnexpectedLHSChar</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnexpectedRHSChar.html">UnexpectedRHSChar</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ExpectedLeftParen.html">ExpectedLeftParen</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnexpectedRightParen.html">UnexpectedRightParen</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnclosedLeftParen.html">UnclosedLeftParen</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnexpectedComment.html">UnexpectedComment</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnclosedComment.html">UnclosedComment</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.MalformedCommentStart.html">MalformedCommentStart</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.DuplicateLHSItem.html">DuplicateLHSItem</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ExcessLHSItems.html">ExcessLHSItems</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.NotAcceptingInputs.html">NotAcceptingInputs</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ExcessRHSItems.html">ExcessRHSItems</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.WordSize.html">WordSize</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.UnknownWord.html">UnknownWord</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.MaxSources.html">MaxSources</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.DanglingSource.html">DanglingSource</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ParserOutOfBounds.html">ParserOutOfBounds</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ParseStackOverflow.html">ParseStackOverflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ParseStackUnderflow.html">ParseStackUnderflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.ParenOverflow.html">ParenOverflow</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.NoWhitespaceAfterUsingWordsFrom.html">NoWhitespaceAfterUsingWordsFrom</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.InvalidAddressLength.html">InvalidAddressLength</a></li><li class="chapter-item "><a href="src/error/ErrParse.sol/error.BadSubParserResult.html">BadSubParserResult</a></li><li class="chapter-item "><a href="src/error/ErrSubParse.sol/error.IncompatibleSubParser.html">IncompatibleSubParser</a></li><li class="chapter-item "><a href="src/error/ErrSubParse.sol/error.ExternDispatchConstantsHeightOverflow.html">ExternDispatchConstantsHeightOverflow</a></li></ol></li><li class="chapter-item "><a href="src/interface/index.html">❱ interface</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/interface/deprecated/index.html">❱ deprecated</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/interface/deprecated/IDebugExpressionDeployerV1.sol/interface.IDebugExpressionDeployerV1.html">IDebugExpressionDeployerV1</a></li><li class="chapter-item "><a href="src/interface/deprecated/IDebugExpressionDeployerV2.sol/interface.IDebugExpressionDeployerV2.html">IDebugExpressionDeployerV2</a></li><li class="chapter-item "><a href="src/interface/deprecated/IDebugInterpreterV1.sol/interface.IDebugInterpreterV1.html">IDebugInterpreterV1</a></li><li class="chapter-item "><a href="src/interface/deprecated/IDebugInterpreterV2.sol/interface.IDebugInterpreterV2.html">IDebugInterpreterV2</a></li><li class="chapter-item "><a href="src/interface/deprecated/IExpressionDeployerV1.sol/interface.IExpressionDeployerV1.html">IExpressionDeployerV1</a></li><li class="chapter-item "><a href="src/interface/deprecated/IExpressionDeployerV1.sol/constants.IExpressionDeployerV1.html">IExpressionDeployerV1 constants</a></li><li class="chapter-item "><a href="src/interface/deprecated/IExpressionDeployerV2.sol/interface.IExpressionDeployerV2.html">IExpressionDeployerV2</a></li><li class="chapter-item "><a href="src/interface/deprecated/IExpressionDeployerV2.sol/constants.IExpressionDeployerV2.html">IExpressionDeployerV2 constants</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.EvaluableConfig.html">EvaluableConfig</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.EvaluableConfigV2.html">EvaluableConfigV2</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.Evaluable.html">Evaluable</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.SignedContext.html">SignedContext</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterCallerV1.sol/interface.IInterpreterCallerV1.html">IInterpreterCallerV1</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterCallerV1.sol/constants.IInterpreterCallerV1.html">IInterpreterCallerV1 constants</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterExternV1.sol/type.EncodedExternDispatch.html">EncodedExternDispatch</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterExternV1.sol/type.ExternDispatch.html">ExternDispatch</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterExternV1.sol/interface.IInterpreterExternV1.html">IInterpreterExternV1</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterExternV2.sol/interface.IInterpreterExternV2.html">IInterpreterExternV2</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterV1.sol/type.SourceIndex.html">SourceIndex</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterV1.sol/type.EncodedDispatch.html">EncodedDispatch</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterV1.sol/type.StateNamespace.html">StateNamespace</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterV1.sol/type.Operand.html">Operand</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterV1.sol/interface.IInterpreterV1.html">IInterpreterV1</a></li><li class="chapter-item "><a href="src/interface/deprecated/IInterpreterV1.sol/constants.IInterpreterV1.html">IInterpreterV1 constants</a></li></ol></li><li class="chapter-item "><a href="src/interface/unstable/index.html">❱ unstable</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/interface/unstable/IExpressionDeployerV3.sol/interface.IExpressionDeployerV3.html">IExpressionDeployerV3</a></li><li class="chapter-item "><a href="src/interface/unstable/IExpressionDeployerV3.sol/constants.IExpressionDeployerV3.html">IExpressionDeployerV3 constants</a></li><li class="chapter-item "><a href="src/interface/unstable/IInterpreterExternV3.sol/interface.IInterpreterExternV3.html">IInterpreterExternV3</a></li><li class="chapter-item "><a href="src/interface/unstable/IInterpreterStoreV2.sol/interface.IInterpreterStoreV2.html">IInterpreterStoreV2</a></li><li class="chapter-item "><a href="src/interface/unstable/IInterpreterV2.sol/type.SourceIndexV2.html">SourceIndexV2</a></li><li class="chapter-item "><a href="src/interface/unstable/IInterpreterV2.sol/interface.IInterpreterV2.html">IInterpreterV2</a></li><li class="chapter-item "><a href="src/interface/unstable/IInterpreterV2.sol/constants.IInterpreterV2.html">IInterpreterV2 constants</a></li><li class="chapter-item "><a href="src/interface/unstable/ISubParserV1.sol/interface.ISubParserV1.html">ISubParserV1</a></li><li class="chapter-item "><a href="src/interface/unstable/ISubParserV1.sol/constants.ISubParserV1.html">ISubParserV1 constants</a></li></ol></li><li class="chapter-item "><a href="src/interface/IInterpreterCallerV2.sol/struct.EvaluableConfigV3.html">EvaluableConfigV3</a></li><li class="chapter-item "><a href="src/interface/IInterpreterCallerV2.sol/struct.EvaluableV2.html">EvaluableV2</a></li><li class="chapter-item "><a href="src/interface/IInterpreterCallerV2.sol/struct.SignedContextV1.html">SignedContextV1</a></li><li class="chapter-item "><a href="src/interface/IInterpreterCallerV2.sol/interface.IInterpreterCallerV2.html">IInterpreterCallerV2</a></li><li class="chapter-item "><a href="src/interface/IInterpreterCallerV2.sol/constants.IInterpreterCallerV2.html">IInterpreterCallerV2 constants</a></li><li class="chapter-item "><a href="src/interface/IInterpreterStoreV1.sol/type.FullyQualifiedNamespace.html">FullyQualifiedNamespace</a></li><li class="chapter-item "><a href="src/interface/IInterpreterStoreV1.sol/interface.IInterpreterStoreV1.html">IInterpreterStoreV1</a></li><li class="chapter-item "><a href="src/interface/IInterpreterStoreV1.sol/constants.IInterpreterStoreV1.html">IInterpreterStoreV1 constants</a></li><li class="chapter-item "><a href="src/interface/IParserV1.sol/struct.AuthoringMeta.html">AuthoringMeta</a></li><li class="chapter-item "><a href="src/interface/IParserV1.sol/struct.AuthoringMetaV2.html">AuthoringMetaV2</a></li><li class="chapter-item "><a href="src/interface/IParserV1.sol/interface.IParserV1.html">IParserV1</a></li></ol></li><li class="chapter-item "><a href="src/lib/index.html">❱ lib</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/bitwise/index.html">❱ bitwise</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/bitwise/LibCtPop.sol/library.LibCtPop.html">LibCtPop</a></li><li class="chapter-item "><a href="src/lib/bitwise/LibCtPop.sol/constants.LibCtPop.html">LibCtPop constants</a></li></ol></li><li class="chapter-item "><a href="src/lib/bytecode/index.html">❱ bytecode</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/bytecode/LibBytecode.sol/library.LibBytecode.html">LibBytecode</a></li></ol></li><li class="chapter-item "><a href="src/lib/caller/index.html">❱ caller</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/caller/LibContext.sol/error.InvalidSignature.html">InvalidSignature</a></li><li class="chapter-item "><a href="src/lib/caller/LibContext.sol/library.LibContext.html">LibContext</a></li><li class="chapter-item "><a href="src/lib/caller/LibDeployerDiscoverable.sol/library.LibDeployerDiscoverable.html">LibDeployerDiscoverable</a></li><li class="chapter-item "><a href="src/lib/caller/LibEncodedDispatch.sol/library.LibEncodedDispatch.html">LibEncodedDispatch</a></li><li class="chapter-item "><a href="src/lib/caller/LibEvaluable.sol/library.LibEvaluable.html">LibEvaluable</a></li></ol></li><li class="chapter-item "><a href="src/lib/compile/index.html">❱ compile</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/compile/LibCompile.sol/library.LibCompile.html">LibCompile</a></li></ol></li><li class="chapter-item "><a href="src/lib/eval/index.html">❱ eval</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/eval/LibEvalNP.sol/error.InputsLengthMismatch.html">InputsLengthMismatch</a></li><li class="chapter-item "><a href="src/lib/eval/LibEvalNP.sol/library.LibEvalNP.html">LibEvalNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/extern/index.html">❱ extern</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/extern/LibExtern.sol/library.LibExtern.html">LibExtern</a></li></ol></li><li class="chapter-item "><a href="src/lib/integrity/index.html">❱ integrity</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.EntrypointMissing.html">EntrypointMissing</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.EntrypointNonZeroInput.html">EntrypointNonZeroInput</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.BadOpInputsLength.html">BadOpInputsLength</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackUnderflow.html">StackUnderflow</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackUnderflowHighwater.html">StackUnderflowHighwater</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackAllocationMismatch.html">StackAllocationMismatch</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackOutputsMismatch.html">StackOutputsMismatch</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/struct.IntegrityCheckStateNP.html">IntegrityCheckStateNP</a></li><li class="chapter-item "><a href="src/lib/integrity/LibIntegrityCheckNP.sol/library.LibIntegrityCheckNP.html">LibIntegrityCheckNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/ns/index.html">❱ ns</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/ns/LibNamespace.sol/library.LibNamespace.html">LibNamespace</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/index.html">❱ op</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/00/index.html">❱ 00</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/00/LibOpConstantNP.sol/error.OutOfBoundsConstantRead.html">OutOfBoundsConstantRead</a></li><li class="chapter-item "><a href="src/lib/op/00/LibOpConstantNP.sol/library.LibOpConstantNP.html">LibOpConstantNP</a></li><li class="chapter-item "><a href="src/lib/op/00/LibOpExternNP.sol/error.OutOfBoundsConstantRead.html">OutOfBoundsConstantRead</a></li><li class="chapter-item "><a href="src/lib/op/00/LibOpExternNP.sol/error.BadOutputsLength.html">BadOutputsLength</a></li><li class="chapter-item "><a href="src/lib/op/00/LibOpExternNP.sol/library.LibOpExternNP.html">LibOpExternNP</a></li><li class="chapter-item "><a href="src/lib/op/00/LibOpStackNP.sol/error.OutOfBoundsStackRead.html">OutOfBoundsStackRead</a></li><li class="chapter-item "><a href="src/lib/op/00/LibOpStackNP.sol/library.LibOpStackNP.html">LibOpStackNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/bitwise/index.html">❱ bitwise</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpBitwiseAndNP.sol/library.LibOpBitwiseAndNP.html">LibOpBitwiseAndNP</a></li><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpBitwiseOrNP.sol/library.LibOpBitwiseOrNP.html">LibOpBitwiseOrNP</a></li><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpCtPopNP.sol/library.LibOpCtPopNP.html">LibOpCtPopNP</a></li><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpDecodeBitsNP.sol/library.LibOpDecodeBitsNP.html">LibOpDecodeBitsNP</a></li><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpEncodeBitsNP.sol/library.LibOpEncodeBitsNP.html">LibOpEncodeBitsNP</a></li><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpShiftBitsLeftNP.sol/library.LibOpShiftBitsLeftNP.html">LibOpShiftBitsLeftNP</a></li><li class="chapter-item "><a href="src/lib/op/bitwise/LibOpShiftBitsRightNP.sol/library.LibOpShiftBitsRightNP.html">LibOpShiftBitsRightNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/call/index.html">❱ call</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/call/LibOpCallNP.sol/error.CallOutputsExceedSource.html">CallOutputsExceedSource</a></li><li class="chapter-item "><a href="src/lib/op/call/LibOpCallNP.sol/library.LibOpCallNP.html">LibOpCallNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/context/index.html">❱ context</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/context/LibOpContextNP.sol/library.LibOpContextNP.html">LibOpContextNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/crypto/index.html">❱ crypto</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/crypto/LibOpHashNP.sol/library.LibOpHashNP.html">LibOpHashNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/erc20/index.html">❱ erc20</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/erc20/LibOpERC20AllowanceNP.sol/library.LibOpERC20AllowanceNP.html">LibOpERC20AllowanceNP</a></li><li class="chapter-item "><a href="src/lib/op/erc20/LibOpERC20BalanceOfNP.sol/library.LibOpERC20BalanceOfNP.html">LibOpERC20BalanceOfNP</a></li><li class="chapter-item "><a href="src/lib/op/erc20/LibOpERC20TotalSupplyNP.sol/library.LibOpERC20TotalSupplyNP.html">LibOpERC20TotalSupplyNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/erc5313/index.html">❱ erc5313</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/erc5313/LibOpERC5313OwnerNP.sol/library.LibOpERC5313OwnerNP.html">LibOpERC5313OwnerNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/erc721/index.html">❱ erc721</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/erc721/LibOpERC721BalanceOfNP.sol/library.LibOpERC721BalanceOfNP.html">LibOpERC721BalanceOfNP</a></li><li class="chapter-item "><a href="src/lib/op/erc721/LibOpERC721OwnerOfNP.sol/library.LibOpERC721OwnerOfNP.html">LibOpERC721OwnerOfNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/evm/index.html">❱ evm</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/evm/LibOpBlockNumberNP.sol/library.LibOpBlockNumberNP.html">LibOpBlockNumberNP</a></li><li class="chapter-item "><a href="src/lib/op/evm/LibOpChainIdNP.sol/library.LibOpChainIdNP.html">LibOpChainIdNP</a></li><li class="chapter-item "><a href="src/lib/op/evm/LibOpMaxUint256NP.sol/library.LibOpMaxUint256NP.html">LibOpMaxUint256NP</a></li><li class="chapter-item "><a href="src/lib/op/evm/LibOpTimestampNP.sol/library.LibOpTimestampNP.html">LibOpTimestampNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/logic/index.html">❱ logic</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/logic/LibOpAnyNP.sol/library.LibOpAnyNP.html">LibOpAnyNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpConditionsNP.sol/error.NoConditionsMet.html">NoConditionsMet</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpConditionsNP.sol/library.LibOpConditionsNP.html">LibOpConditionsNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpEnsureNP.sol/error.EnsureFailed.html">EnsureFailed</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpEnsureNP.sol/library.LibOpEnsureNP.html">LibOpEnsureNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpEqualToNP.sol/library.LibOpEqualToNP.html">LibOpEqualToNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpEveryNP.sol/library.LibOpEveryNP.html">LibOpEveryNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpGreaterThanNP.sol/library.LibOpGreaterThanNP.html">LibOpGreaterThanNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpGreaterThanOrEqualToNP.sol/library.LibOpGreaterThanOrEqualToNP.html">LibOpGreaterThanOrEqualToNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpIfNP.sol/library.LibOpIfNP.html">LibOpIfNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpIsZeroNP.sol/library.LibOpIsZeroNP.html">LibOpIsZeroNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpLessThanNP.sol/library.LibOpLessThanNP.html">LibOpLessThanNP</a></li><li class="chapter-item "><a href="src/lib/op/logic/LibOpLessThanOrEqualToNP.sol/library.LibOpLessThanOrEqualToNP.html">LibOpLessThanOrEqualToNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/math/index.html">❱ math</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/math/decimal18/index.html">❱ decimal18</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/math/decimal18/LibOpDecimal18DivNP.sol/library.LibOpDecimal18DivNP.html">LibOpDecimal18DivNP</a></li><li class="chapter-item "><a href="src/lib/op/math/decimal18/LibOpDecimal18MulNP.sol/library.LibOpDecimal18MulNP.html">LibOpDecimal18MulNP</a></li><li class="chapter-item "><a href="src/lib/op/math/decimal18/LibOpDecimal18PowUNP.sol/library.LibOpDecimal18PowUNP.html">LibOpDecimal18PowUNP</a></li><li class="chapter-item "><a href="src/lib/op/math/decimal18/LibOpDecimal18Scale18DynamicNP.sol/library.LibOpDecimal18Scale18DynamicNP.html">LibOpDecimal18Scale18DynamicNP</a></li><li class="chapter-item "><a href="src/lib/op/math/decimal18/LibOpDecimal18Scale18NP.sol/library.LibOpDecimal18Scale18NP.html">LibOpDecimal18Scale18NP</a></li><li class="chapter-item "><a href="src/lib/op/math/decimal18/LibOpDecimal18ScaleNNP.sol/library.LibOpDecimal18ScaleNNP.html">LibOpDecimal18ScaleNNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/math/int/index.html">❱ int</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntAddNP.sol/library.LibOpIntAddNP.html">LibOpIntAddNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntDivNP.sol/library.LibOpIntDivNP.html">LibOpIntDivNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntExpNP.sol/library.LibOpIntExpNP.html">LibOpIntExpNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntMaxNP.sol/library.LibOpIntMaxNP.html">LibOpIntMaxNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntMinNP.sol/library.LibOpIntMinNP.html">LibOpIntMinNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntModNP.sol/library.LibOpIntModNP.html">LibOpIntModNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntMulNP.sol/library.LibOpIntMulNP.html">LibOpIntMulNP</a></li><li class="chapter-item "><a href="src/lib/op/math/int/LibOpIntSubNP.sol/library.LibOpIntSubNP.html">LibOpIntSubNP</a></li></ol></li></ol></li><li class="chapter-item "><a href="src/lib/op/store/index.html">❱ store</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/store/LibOpGetNP.sol/library.LibOpGetNP.html">LibOpGetNP</a></li><li class="chapter-item "><a href="src/lib/op/store/LibOpSetNP.sol/library.LibOpSetNP.html">LibOpSetNP</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/uniswap/index.html">❱ uniswap</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/op/uniswap/LibOpUniswapV2AmountIn.sol/library.LibOpUniswapV2AmountIn.html">LibOpUniswapV2AmountIn</a></li><li class="chapter-item "><a href="src/lib/op/uniswap/LibOpUniswapV2AmountOut.sol/library.LibOpUniswapV2AmountOut.html">LibOpUniswapV2AmountOut</a></li><li class="chapter-item "><a href="src/lib/op/uniswap/LibOpUniswapV2Quote.sol/library.LibOpUniswapV2Quote.html">LibOpUniswapV2Quote</a></li></ol></li><li class="chapter-item "><a href="src/lib/op/LibAllStandardOpsNP.sol/library.LibAllStandardOpsNP.html">LibAllStandardOpsNP</a></li><li class="chapter-item "><a href="src/lib/op/LibAllStandardOpsNP.sol/constants.LibAllStandardOpsNP.html">LibAllStandardOpsNP constants</a></li></ol></li><li class="chapter-item "><a href="src/lib/parse/index.html">❱ parse</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/parse/LibParse.sol/library.LibParse.html">LibParse</a></li><li class="chapter-item "><a href="src/lib/parse/LibParse.sol/constants.LibParse.html">LibParse constants</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseCMask.sol/contract.LibParseCMask.html">LibParseCMask</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseCMask.sol/constants.LibParseCMask.html">LibParseCMask constants</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseError.sol/library.LibParseError.html">LibParseError</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseInterstitial.sol/library.LibParseInterstitial.html">LibParseInterstitial</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseLiteral.sol/library.LibParseLiteral.html">LibParseLiteral</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseLiteral.sol/constants.LibParseLiteral.html">LibParseLiteral constants</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseMeta.sol/error.DuplicateFingerprint.html">DuplicateFingerprint</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseMeta.sol/error.WordIOFnPointerMismatch.html">WordIOFnPointerMismatch</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseMeta.sol/library.LibParseMeta.html">LibParseMeta</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseMeta.sol/constants.LibParseMeta.html">LibParseMeta constants</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseOperand.sol/library.LibParseOperand.html">LibParseOperand</a></li><li class="chapter-item "><a href="src/lib/parse/LibParsePragma.sol/library.LibParsePragma.html">LibParsePragma</a></li><li class="chapter-item "><a href="src/lib/parse/LibParsePragma.sol/constants.LibParsePragma.html">LibParsePragma constants</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseStackName.sol/library.LibParseStackName.html">LibParseStackName</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseStackTracker.sol/type.ParseStackTracker.html">ParseStackTracker</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseStackTracker.sol/library.LibParseStackTracker.html">LibParseStackTracker</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseState.sol/struct.ParseState.html">ParseState</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseState.sol/library.LibParseState.html">LibParseState</a></li><li class="chapter-item "><a href="src/lib/parse/LibParseState.sol/constants.LibParseState.html">LibParseState constants</a></li><li class="chapter-item "><a href="src/lib/parse/LibSubParse.sol/library.LibSubParse.html">LibSubParse</a></li></ol></li><li class="chapter-item "><a href="src/lib/state/index.html">❱ state</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="src/lib/state/LibInterpreterStateDataContractNP.sol/library.LibInterpreterStateDataContractNP.html">LibInterpreterStateDataContractNP</a></li><li class="chapter-item "><a href="src/lib/state/LibInterpreterStateNP.sol/struct.InterpreterStateNP.html">InterpreterStateNP</a></li><li class="chapter-item "><a href="src/lib/state/LibInterpreterStateNP.sol/library.LibInterpreterStateNP.html">LibInterpreterStateNP</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rainlanguage/rain.interpreter" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="raininterpreter"><a class="header" href="#raininterpreter">rain.interpreter</a></h1>
<p>Docs at https://rainprotocol.github.io/rain.interpreter</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>Standard libraries and interfaces defining and working with <code>InterpeterState</code> including:</p>
<ul>
<li>the standard <code>eval</code> loop</li>
<li>source compilation from opcodes</li>
<li>state (de)serialization (more gas efficient than abi encoding)</li>
</ul>
<p>Interpreters are designed to be highly moddable behind the <code>IInterpreterV1</code>
interface, but pretty much any interpreter that uses <code>InterpreterState</code> will
need these low level facilities verbatim. Further, these facilities
(with possible exception of debugging logic), while relatively short in terms
of lines of code, are surprisingly fragile to maintain in a gas efficient way
so we don't recommend reinventing this wheel.</p>
<h2 id="versioning"><a class="header" href="#versioning">Versioning</a></h2>
<p>Stability and versioning is achieved at the interface level. All interfaces and
types exposed externally by an interface are versioned.</p>
<p>The most obvious place this fails is when a breaking change cannot be expressed
in Solidity's type system.</p>
<p>For example, the ordering of &quot;top to bottom&quot; of a stack returned by an
interpreter, represented as a <code>uint256[]</code> was reversed between <code>eval</code> and
<code>eval2</code>. The compiler cannot protect downstream contracts from such a change,
even if we were to scream it in the code comments, so such changes are considered
dangerous and justify a version number at the method level
(e.g. <code>eval</code> and <code>eval2</code>).</p>
<p>The goal is to intentionally loudly break things at the compiler level, or at
least <em>reliably</em> at runtime (i.e. unconditionally erroring every call to X). We
do NOT want to make silent subtle changes on the hope that nobody was relying on
the old behaviours.</p>
<h3 id="unstable-interfaces"><a class="header" href="#unstable-interfaces">Unstable interfaces</a></h3>
<p>An unstable interface MAY be used by a current implementation in this repo as the
goal is always to move unstable interfaces to stability.</p>
<p>The practical challenge for achieving stability is that it has to be informed by
usage, or at least attempted usage.</p>
<p>Stability is therefore <em>observed</em> in some interface, based on some (subjective)
amount of usage in a concrete implementation without the kind of feedback that
necessitates a modification.</p>
<h3 id="deprecated-interfaces"><a class="header" href="#deprecated-interfaces">Deprecated interfaces</a></h3>
<p>Deprecated interfaces are those that were completely stable, with deployed
concrete implementations, then replaced by a new implementation of an unstable
interface.</p>
<p>As there are immutable concrete implementations in production of these ex-stable
interfaces, we keep the interfaces so that third party contracts can continue to
consume existing deployments.</p>
<p>This is important for existing deployments to leverage their &quot;lindy&quot;, as often
the old battletested thing can be much safer than the new shiny thing.</p>
<h3 id="no-semver"><a class="header" href="#no-semver">NO semver</a></h3>
<p>We do NOT use semver because it requires us to make subjective assessments with
imperfect information about concepts like &quot;breaking&quot; or &quot;bug&quot;.</p>
<h2 id="branches"><a class="header" href="#branches">Branches</a></h2>
<p><code>main</code> includes the latest implementations of the latest interfaces, including
unstable interfaces.</p>
<p>While we keep deprecated interfaces around for a long time, we try to avoid cruft
of deprecated concrete implementations, libs and tests. This cruft can really
hinder the ability to move through necessary refactors, so it has to be culled
often.</p>
<p>As every commit is deployed to a testnet by CI, and is immutable onchain and can
be cross deployed to other chains, there's no need to try to couple what's
happening in this repo with onchain realities, other than at the interface level.</p>
<p>There are some branches that were forked from <code>main</code> for historical reasons, that
MAY be of interest situationally, but otherwise should be ignored.</p>
<ul>
<li><code>main-np</code>: Forked from the last commit using <code>eval</code> before <code>eval2</code> was the
primary interface into the interpreter. No longer actively developed.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents"><a class="header" href="#contents">Contents</a></h1>
<ul>
<li><a href="src/abstract/BaseRainterpreterExternNPE2.sol/abstract.BaseRainterpreterExternNPE2.html">BaseRainterpreterExternNPE2</a></li>
<li><a href="src/abstract/BaseRainterpreterExternNPE2.sol/constants.BaseRainterpreterExternNPE2.html">BaseRainterpreterExternNPE2 constants</a></li>
<li><a href="src/abstract/BaseRainterpreterSubParserNPE2.sol/abstract.BaseRainterpreterSubParserNPE2.html">BaseRainterpreterSubParserNPE2</a></li>
<li><a href="src/abstract/BaseRainterpreterSubParserNPE2.sol/constants.BaseRainterpreterSubParserNPE2.html">BaseRainterpreterSubParserNPE2 constants</a></li>
<li><a href="src/abstract/DeployerDiscoverableMetaV3.sol/struct.DeployerDiscoverableMetaV3ConstructionConfig.html">DeployerDiscoverableMetaV3ConstructionConfig</a></li>
<li><a href="src/abstract/DeployerDiscoverableMetaV3.sol/abstract.DeployerDiscoverableMetaV3.html">DeployerDiscoverableMetaV3</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baserainterpreterexternnpe2"><a class="header" href="#baserainterpreterexternnpe2">BaseRainterpreterExternNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/abstract/BaseRainterpreterExternNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/abstract/BaseRainterpreterExternNPE2.sol//src/interface/unstable/IInterpreterExternV3.sol/interface.IInterpreterExternV3.html">IInterpreterExternV3</a>, ERC165</p>
<p>Base implementation of <code>IInterpreterExternV3</code>. Inherit from this contract,
and override <code>functionPointers</code> to provide a list of function pointers.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="extern"><a class="header" href="#extern">extern</a></h3>
<p>Handles a single dispatch.</p>
<pre><code class="language-solidity">function extern(ExternDispatch dispatch, uint256[] memory inputs)
    external
    view
    virtual
    override
    returns (uint256[] memory outputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatch</code></td><td><code>ExternDispatch</code></td><td>Encoded information about the extern to dispatch. Analogous to the opcode/operand in the interpreter.</td></tr>
<tr><td><code>inputs</code></td><td><code>uint256[]</code></td><td>The array of inputs for the dispatched logic.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>outputs</code></td><td><code>uint256[]</code></td><td>The result of the dispatched logic.</td></tr>
</tbody></table>
</div>
<h3 id="externintegrity"><a class="header" href="#externintegrity">externIntegrity</a></h3>
<p>Checks the integrity of some extern call.</p>
<pre><code class="language-solidity">function externIntegrity(ExternDispatch dispatch, uint256 expectedInputs, uint256 expectedOutputs)
    external
    pure
    virtual
    override
    returns (uint256 actualInputs, uint256 actualOutputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatch</code></td><td><code>ExternDispatch</code></td><td>Encoded information about the extern to dispatch. Analogous to the opcode/operand in the interpreter.</td></tr>
<tr><td><code>expectedInputs</code></td><td><code>uint256</code></td><td>The number of inputs expected for the dispatched logic.</td></tr>
<tr><td><code>expectedOutputs</code></td><td><code>uint256</code></td><td>The number of outputs expected for the dispatched logic.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>actualInputs</code></td><td><code>uint256</code></td><td>The actual number of inputs for the dispatched logic.</td></tr>
<tr><td><code>actualOutputs</code></td><td><code>uint256</code></td><td>The actual number of outputs for the dispatched logic.</td></tr>
</tbody></table>
</div>
<h3 id="supportsinterface"><a class="header" href="#supportsinterface">supportsInterface</a></h3>
<p><em>See {IERC165-supportsInterface}.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool);
</code></pre>
<h3 id="opcodefunctionpointers"><a class="header" href="#opcodefunctionpointers">opcodeFunctionPointers</a></h3>
<p>Overrideable function to provide the list of function pointers for
word dispatches.</p>
<pre><code class="language-solidity">function opcodeFunctionPointers() internal view virtual returns (bytes memory);
</code></pre>
<h3 id="integrityfunctionpointers"><a class="header" href="#integrityfunctionpointers">integrityFunctionPointers</a></h3>
<p>Overrideable function to provide the list of function pointers for
integrity checks.</p>
<pre><code class="language-solidity">function integrityFunctionPointers() internal pure virtual returns (bytes memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants"><a class="header" href="#constants">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/abstract/BaseRainterpreterExternNPE2.sol">Git Source</a></p>
<h3 id="opcode_function_pointers"><a class="header" href="#opcode_function_pointers">OPCODE_FUNCTION_POINTERS</a></h3>
<p><em>Empty opcode function pointers constant. Inheriting contracts should
create their own constant and override <code>opcodeFunctionPointers</code> to use
theirs.</em></p>
<pre><code class="language-solidity">bytes constant OPCODE_FUNCTION_POINTERS = hex&quot;&quot;;
</code></pre>
<h3 id="integrity_function_pointers"><a class="header" href="#integrity_function_pointers">INTEGRITY_FUNCTION_POINTERS</a></h3>
<p><em>Empty integrity function pointers constant. Inheriting contracts should
create their own constant and override <code>integrityFunctionPointers</code> to use
theirs.</em></p>
<pre><code class="language-solidity">bytes constant INTEGRITY_FUNCTION_POINTERS = hex&quot;&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baserainterpretersubparsernpe2"><a class="header" href="#baserainterpretersubparsernpe2">BaseRainterpreterSubParserNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/abstract/BaseRainterpreterSubParserNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
ERC165, <a href="src/abstract/BaseRainterpreterSubParserNPE2.sol//src/interface/unstable/ISubParserV1.sol/interface.ISubParserV1.html">ISubParserV1</a></p>
<p>Base implementation of <code>ISubParserV1</code>. Inherit from this contract and
override the virtual functions to align all the relevant pointers and
metadata bytes so that it can actually run.
The basic workflow for subparsing via this contract is:</p>
<ul>
<li>The main parser will call <code>subParse</code> with the subparser's compatibility
version and the data to parse.</li>
<li>The subparser will check the compatibility is an exact match and revert if
not. This is the simplest and most conservative approach, if there's a new
compatibility version, a new version of the subparser will need to be
deployed even if the upstream changes are backwards compatible.</li>
<li>The subparser will then parse the data, using the <code>subParserParseMeta</code>
function to get the metadata bytes, which must be overridden by the child
contract in order to be useful. The sub parser meta bytes are constructed
exactly the same as the main parser meta bytes, so the same types and libs
can be used to build them. The key difference is that the index of each
word in the authoring meta maps to a <em>parser</em> function pointer, rather
than a <em>handler</em> function pointer. What this means is that the function
at index N of <code>subParserFunctionPointers</code> is responsible for parsing
whatever data the main parser has passed to <code>subParse</code> into whatever the
final output of the subparser is. For example, the 5th parser function
might convert some word string <code>&quot;foo&quot;</code> into the bytecode that represents
an extern call on the main interpreter into the contract that provides
that extern logic. This decoupling allows any subparser function to
generate any runtime behaviour at all, provided it knows how to construct
the opcode for it.</li>
<li>Currently the subparse handles literals and operands in the same way as
the main parser, but this may change in future. Likely that there will be
dedicated &quot;sub literal&quot; and &quot;sub word&quot; concepts, that should be more
composable than the current approach.</li>
<li>The final result of the subparser is returned as a tuple of success,
bytecode and constants. The success flag is used to indicate whether the
subparser was able to parse the data, and the bytecode and constants are
the same as the main parser, and are used to construct the final bytecode
of the main parser. The expectation on failure is that there may be some
other subparser that can parse the data, so the main parser will handle
fallback logic.</li>
</ul>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="subparserparsemeta"><a class="header" href="#subparserparsemeta">subParserParseMeta</a></h3>
<p>Overrideable function to allow implementations to define their parse
meta bytes.</p>
<pre><code class="language-solidity">function subParserParseMeta() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="subparserfunctionpointers"><a class="header" href="#subparserfunctionpointers">subParserFunctionPointers</a></h3>
<p>Overrideable function to allow implementations to define their function
pointers to each sub parser.</p>
<pre><code class="language-solidity">function subParserFunctionPointers() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="subparseroperandhandlers"><a class="header" href="#subparseroperandhandlers">subParserOperandHandlers</a></h3>
<p>Overrideable function to allow implementations to define their operand
handlers.</p>
<pre><code class="language-solidity">function subParserOperandHandlers() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="subparserliteralparsers"><a class="header" href="#subparserliteralparsers">subParserLiteralParsers</a></h3>
<p>Overrideable function to allow implementations to define their literal
parsers.</p>
<pre><code class="language-solidity">function subParserLiteralParsers() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="subparsercompatibility"><a class="header" href="#subparsercompatibility">subParserCompatibility</a></h3>
<p>Overrideable function to allow implementations to define their
compatibility version.</p>
<pre><code class="language-solidity">function subParserCompatibility() internal pure virtual returns (bytes32);
</code></pre>
<h3 id="subparse"><a class="header" href="#subparse">subParse</a></h3>
<p>A basic implementation of sub parsing that uses encoded function pointers
to dispatch everything necessary in O(1) and allows for the child
contract to override all relevant functions with some modest boilerplate.
This is virtual but the expectation is that it generally DOES NOT need
to be overridden, as the function pointers and metadata bytes are all
that need to be changed to implement a new subparser.</p>
<pre><code class="language-solidity">function subParse(bytes32 compatibility, bytes memory data)
    external
    pure
    virtual
    returns (bool success, bytes memory bytecode, uint256[] memory constants);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>compatibility</code></td><td><code>bytes32</code></td><td>The compatibility version of the data to parse. The sub parser is free to handle this however it likes, but it MUST revert if it is unsure how to handle the data. E.g. the sub parser MAY revert any compatibility version that is not an exact match to a singular known constant, or it may attempt to support several versions.</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>The data to parse. The main parser will provide arbitrary data that is expected to match the conventions implied by the compatibility version. As sub parsing is a read only operation, any corrupt data could only possibly harm the main parser, which in turn should be parsing as a read only operation to protect itself from malicious inputs.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>success</code></td><td><code>bool</code></td><td>The first return value is a success flag, yet the sub parser MAY REVERT under certain conditions. It is important to know when to revert and when to return false. The general rule is that if the inputs are understood by the subparser, and look wrong to the subparser, then the subparser MUST revert. If the inputs are not understood by the subparser, it MUST NOT revert, as it is not in a position to know if the inputs are wrong or not, and there is very likely some other subparser known to the main parser that can handle the data as a fallback. For example, the following situations are expected to revert: - The compatibility ID is not supported by the sub parser. Every sub parser knows what it is compatible with, so it is safe to revert anything incompatible. - The data parses to something the sub parser knows how to handle, but the data is malformed in some way. For example, the sub parser knows the word it is parsing, but perhaps some associated data such as the constants height is out of a valid range. Similarly, the following situations are expected to return false and not revert: - The compatibility ID is supported by the sub parser, and the data appears to have the correct structure, but there are no recognized words in the data. This MUST NOT revert, as some other sub parser MAY recognize the word and handle it as a fallback.</td></tr>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>If successful, the second return value is the bytecode that the subparser has generated. The main parser is expected to merge this into the main bytecode as-is, so it MUST match main parser behaviour as per the compatibility conventions. If unsuccessful, a zero length byte array.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>If successful, and the generated bytecode implies additions to the constants array, the third return value is the constants that the subparser has generated. The main parser is expected to merge this into the main constants array as-is. If the parsing is unsuccessful, or the generated bytecode does not require any new constants, a zero length array.</td></tr>
</tbody></table>
</div>
<h3 id="supportsinterface-1"><a class="header" href="#supportsinterface-1">supportsInterface</a></h3>
<p><em>See {IERC165-supportsInterface}.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-1"><a class="header" href="#constants-1">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/abstract/BaseRainterpreterSubParserNPE2.sol">Git Source</a></p>
<h3 id="sub_parser_function_pointers"><a class="header" href="#sub_parser_function_pointers">SUB_PARSER_FUNCTION_POINTERS</a></h3>
<p><em>This is a placeholder for the subparser function pointers.
The subparser function pointers are a list of 16 bit function pointers,
where each subparser function is responsible for parsing a particular
word into a an opcode that will be used by the main parser to build the
final bytecode.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_FUNCTION_POINTERS = hex&quot;&quot;;
</code></pre>
<h3 id="sub_parser_parse_meta"><a class="header" href="#sub_parser_parse_meta">SUB_PARSER_PARSE_META</a></h3>
<p><em>This is a placeholder for the subparser meta bytes.
The subparser meta bytes are the same structure as the main parser meta
bytes. The exact same process of hashing, blooming, fingeprinting and index
lookup applies to the subparser meta bytes as the main parser meta bytes.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_PARSE_META = hex&quot;&quot;;
</code></pre>
<h3 id="sub_parser_operand_handlers"><a class="header" href="#sub_parser_operand_handlers">SUB_PARSER_OPERAND_HANDLERS</a></h3>
<p><em>This is a placeholder for the int that encodes pointers to operand
parsers. In the future this will probably be removed and the main parser
will handle all operand parsing, the subparser will only be responsible for
checking the validity of the operand values and encoding them into the
resulting bytecode.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_OPERAND_HANDLERS = hex&quot;&quot;;
</code></pre>
<h3 id="sub_parser_literal_parsers"><a class="header" href="#sub_parser_literal_parsers">SUB_PARSER_LITERAL_PARSERS</a></h3>
<p><em>This is a placeholder for the int that encodes pointers to literal
parsers. In the future this will probably be removed and there will be
dedicated concepts for &quot;sub literal&quot; and &quot;sub word&quot; parsing, that should be
more composable than the current approach.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_LITERAL_PARSERS = hex&quot;&quot;;
</code></pre>
<h3 id="sub_parser_compatiblity"><a class="header" href="#sub_parser_compatiblity">SUB_PARSER_COMPATIBLITY</a></h3>
<p><em>This is a placeholder for compatibility version. The child contract
should override this to define its own compatibility version.</em></p>
<pre><code class="language-solidity">bytes32 constant SUB_PARSER_COMPATIBLITY = bytes32(0);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="deployerdiscoverablemetav3constructionconfig"><a class="header" href="#deployerdiscoverablemetav3constructionconfig">DeployerDiscoverableMetaV3ConstructionConfig</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/abstract/DeployerDiscoverableMetaV3.sol">Git Source</a></p>
<p>Construction config for <code>DeployerDiscoverableMetaV3</code>.</p>
<pre><code class="language-solidity">struct DeployerDiscoverableMetaV3ConstructionConfig {
    address deployer;
    bytes meta;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deployer</code></td><td><code>address</code></td><td>Deployer the calling contract will be discoverable under.</td></tr>
<tr><td><code>meta</code></td><td><code>bytes</code></td><td>MetaV1 data to emit before touching the deployer.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="deployerdiscoverablemetav3"><a class="header" href="#deployerdiscoverablemetav3">DeployerDiscoverableMetaV3</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/abstract/DeployerDiscoverableMetaV3.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
IMetaV1</p>
<p>Upon construction, checks metadata against a known hash, emits it
then touches the deployer (deploy an empty expression). This allows indexers
to discover the metadata of the <code>DeployerDiscoverableMetaV3</code> contract by
indexing the deployer. In this way the deployer acts as a pseudo-registry by
virtue of it being a natural hub for interactions with calling contracts.</p>
<h2 id="functions-2"><a class="header" href="#functions-2">Functions</a></h2>
<h3 id="constructor"><a class="header" href="#constructor">constructor</a></h3>
<pre><code class="language-solidity">constructor(bytes32 metaHash, DeployerDiscoverableMetaV3ConstructionConfig memory config);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-1"><a class="header" href="#contents-1">Contents</a></h1>
<ul>
<li><a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol/struct.RainterpreterExpressionDeployerNPE2ConstructionConfig.html">RainterpreterExpressionDeployerNPE2ConstructionConfig</a></li>
<li><a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol/contract.RainterpreterExpressionDeployerNPE2.html">RainterpreterExpressionDeployerNPE2</a></li>
<li><a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol/constants.RainterpreterExpressionDeployerNPE2.html">RainterpreterExpressionDeployerNPE2 constants</a></li>
<li><a href="src/concrete/RainterpreterNPE2.sol/contract.RainterpreterNPE2.html">RainterpreterNPE2</a></li>
<li><a href="src/concrete/RainterpreterNPE2.sol/constants.RainterpreterNPE2.html">RainterpreterNPE2 constants</a></li>
<li><a href="src/concrete/RainterpreterParserNPE2.sol/contract.RainterpreterParserNPE2.html">RainterpreterParserNPE2</a></li>
<li><a href="src/concrete/RainterpreterParserNPE2.sol/constants.RainterpreterParserNPE2.html">RainterpreterParserNPE2 constants</a></li>
<li><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/library.LibExternOpIntIncNPE2.html">LibExternOpIntIncNPE2</a></li>
<li><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/library.LibExternOpStackOperandNPE2.html">LibExternOpStackOperandNPE2</a></li>
<li><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/library.LibRainterpreterReferenceExternNPE2.html">LibRainterpreterReferenceExternNPE2</a></li>
<li><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/contract.RainterpreterReferenceExternNPE2.html">RainterpreterReferenceExternNPE2</a></li>
<li><a href="src/concrete/RainterpreterReferenceExternNPE2.sol/constants.RainterpreterReferenceExternNPE2.html">RainterpreterReferenceExternNPE2 constants</a></li>
<li><a href="src/concrete/RainterpreterStoreNPE2.sol/error.OddSetLength.html">OddSetLength</a></li>
<li><a href="src/concrete/RainterpreterStoreNPE2.sol/contract.RainterpreterStoreNPE2.html">RainterpreterStoreNPE2</a></li>
<li><a href="src/concrete/RainterpreterStoreNPE2.sol/constants.RainterpreterStoreNPE2.html">RainterpreterStoreNPE2 constants</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rainterpreterexpressiondeployernpe2constructionconfig"><a class="header" href="#rainterpreterexpressiondeployernpe2constructionconfig">RainterpreterExpressionDeployerNPE2ConstructionConfig</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterExpressionDeployerNPE2.sol">Git Source</a></p>
<p>All config required to construct a <code>RainterpreterNPE2</code>.</p>
<pre><code class="language-solidity">struct RainterpreterExpressionDeployerNPE2ConstructionConfig {
    address interpreter;
    address store;
    address parser;
    bytes meta;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interpreter</code></td><td><code>address</code></td><td>The <code>IInterpreterV2</code> to use for evaluation. MUST match known bytecode.</td></tr>
<tr><td><code>store</code></td><td><code>address</code></td><td>The <code>IInterpreterStoreV2</code>. MUST match known bytecode.</td></tr>
<tr><td><code>parser</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>meta</code></td><td><code>bytes</code></td><td>Contract meta for tooling.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="rainterpreterexpressiondeployernpe2"><a class="header" href="#rainterpreterexpressiondeployernpe2">RainterpreterExpressionDeployerNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterExpressionDeployerNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/concrete/RainterpreterExpressionDeployerNPE2.sol//src/interface/unstable/IExpressionDeployerV3.sol/interface.IExpressionDeployerV3.html">IExpressionDeployerV3</a>, ERC165</p>
<h2 id="state-variables"><a class="header" href="#state-variables">State Variables</a></h2>
<h3 id="iinterpreter"><a class="header" href="#iinterpreter">iInterpreter</a></h3>
<p>The interpreter with known bytecode that this deployer is constructed
for.</p>
<pre><code class="language-solidity">IInterpreterV2 public immutable iInterpreter;
</code></pre>
<h3 id="istore"><a class="header" href="#istore">iStore</a></h3>
<p>The store with known bytecode that this deployer is constructed for.</p>
<pre><code class="language-solidity">IInterpreterStoreV1 public immutable iStore;
</code></pre>
<h3 id="iparser"><a class="header" href="#iparser">iParser</a></h3>
<pre><code class="language-solidity">IParserV1 public immutable iParser;
</code></pre>
<h2 id="functions-3"><a class="header" href="#functions-3">Functions</a></h2>
<h3 id="constructor-1"><a class="header" href="#constructor-1">constructor</a></h3>
<pre><code class="language-solidity">constructor(RainterpreterExpressionDeployerNPE2ConstructionConfig memory config);
</code></pre>
<h3 id="supportsinterface-2"><a class="header" href="#supportsinterface-2">supportsInterface</a></h3>
<p>This IS a security check. This prevents someone making an exact
bytecode copy of the interpreter and shipping different meta for
the copy to lie about what each op does in the interpreter.</p>
<p><em>Interface identification is specified in ERC-165. This function
uses less than 30,000 gas.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interfaceId</code></td><td><code>bytes4</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td><code>true</code> if the contract implements <code>interfaceID</code> and <code>interfaceID</code> is not 0xffffffff, <code>false</code> otherwise</td></tr>
</tbody></table>
</div>
<h3 id="deployexpression2"><a class="header" href="#deployexpression2">deployExpression2</a></h3>
<p>Expressions are expected to be deployed onchain as immutable contract
code with a first class address like any other contract or account.
Technically this is optional in the sense that all the tools required to
eval some expression and define all its opcodes are available as
libraries.
In practise there are enough advantages to deploying the sources directly
onchain as contract data and loading them from the interpreter at eval:</p>
<ul>
<li>Loading and storing binary data is gas efficient as immutable contract
data</li>
<li>Expressions need to be immutable between their deploy time integrity
check and runtime evaluation</li>
<li>Passing the address of an expression through calldata to an interpreter
is cheaper than passing an entire expression through calldata</li>
<li>Conceptually a very simple approach, even if implementations like
SSTORE2 are subtle under the hood
The expression deployer MUST perform an integrity check of the source
code before it puts the expression onchain at a known address. The
integrity check MUST at a minimum (it is free to do additional static
analysis) calculate the memory required to be allocated for the stack in
total, and that no out of bounds memory reads/writes occur within this
stack. A simple example of an invalid source would be one that pushes one
value to the stack then attempts to pops two values, clearly we cannot
remove more values than we added. The <code>IExpressionDeployerV3</code> MUST revert
in the case of any integrity failure, all integrity checks MUST pass in
order for the deployment to complete.
Once the integrity check is complete the <code>IExpressionDeployerV3</code> MUST do
any additional processing required by its paired interpreter.
For example, the <code>IExpressionDeployerV3</code> MAY NEED to replace the indexed
opcodes in the <code>ExpressionConfig</code> sources with real function pointers
from the corresponding interpreter.
The caller MUST check the <code>io</code> returned by this function to determine
the number of inputs and outputs for each source are within the bounds
of the caller's expectations.</li>
</ul>
<pre><code class="language-solidity">function deployExpression2(bytes memory bytecode, uint256[] memory constants)
    external
    virtual
    returns (IInterpreterV2, IInterpreterStoreV1, address, bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>Bytecode verbatim. Exactly how the bytecode is structured is up to the deployer and interpreter. The deployer MUST NOT modify the bytecode in any way. The interpreter MUST NOT assume anything about the bytecode other than that it is valid according to the interpreter's integrity checks. It is assumed that the bytecode will be produced from a human friendly string via. <code>IParserV1.parse</code> but this is not required if the caller has some other means to prooduce valid bytecode.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Constants verbatim. Constants are provided alongside sources rather than inline as it allows us to avoid variable length opcodes and can be more memory efficient if the same constant is referenced several times from the sources.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>IInterpreterV2</code></td><td>interpreter The interpreter the deployer believes it is qualified to perform integrity checks on behalf of.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>IInterpreterStoreV1</code></td><td>store The interpreter store the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>address</code></td><td>expression The address of the deployed onchain expression. MUST be valid according to all integrity checks the deployer is aware of.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>io Binary data where each 2 bytes input and output counts for each source of the bytecode. MAY simply be copied verbatim from the relevant bytes in the bytecode if they exist and integrity checks guarantee that the bytecode is valid.</td></tr>
</tbody></table>
</div>
<h3 id="integrityfunctionpointers-1"><a class="header" href="#integrityfunctionpointers-1">integrityFunctionPointers</a></h3>
<p>Defines all the function pointers to integrity checks. This is the
expression deployer's equivalent of the opcode function pointers and
follows a near identical dispatch process. These are never compiled into
source and are instead indexed into directly by the integrity check. The
indexing into integrity pointers (which has an out of bounds check) is a
proxy for enforcing that all opcode pointers exist at runtime, so the
length of the integrity pointers MUST match the length of opcode function
pointers. This function is <code>virtual</code> so that it can be overridden
pairwise with overrides to <code>functionPointers</code> on <code>Rainterpreter</code>.</p>
<pre><code class="language-solidity">function integrityFunctionPointers() external view virtual returns (bytes memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>The list of integrity function pointers.</td></tr>
</tbody></table>
</div>
<h3 id="expectedconstructionmetahash"><a class="header" href="#expectedconstructionmetahash">expectedConstructionMetaHash</a></h3>
<p>Virtual function to return the expected construction meta hash.
Public so that external tooling can read it, although this should be
considered deprecated. The intended workflow is that tooling uses a real
evm to deploy the full dispair and reads the hashes from errors using a
trail/error approach until a full dispair is deployed.</p>
<pre><code class="language-solidity">function expectedConstructionMetaHash() public pure virtual returns (bytes32);
</code></pre>
<h3 id="expectedinterpreterbytecodehash"><a class="header" href="#expectedinterpreterbytecodehash">expectedInterpreterBytecodeHash</a></h3>
<p>Virtual function to return the expected interpreter bytecode hash.</p>
<pre><code class="language-solidity">function expectedInterpreterBytecodeHash() internal pure virtual returns (bytes32);
</code></pre>
<h3 id="expectedstorebytecodehash"><a class="header" href="#expectedstorebytecodehash">expectedStoreBytecodeHash</a></h3>
<p>Virtual function to return the expected store bytecode hash.</p>
<pre><code class="language-solidity">function expectedStoreBytecodeHash() internal pure virtual returns (bytes32);
</code></pre>
<h3 id="expectedparserbytecodehash"><a class="header" href="#expectedparserbytecodehash">expectedParserBytecodeHash</a></h3>
<p>Virtual function to return the expected parser bytecode hash.</p>
<pre><code class="language-solidity">function expectedParserBytecodeHash() internal pure virtual returns (bytes32);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-2"><a class="header" href="#constants-2">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterExpressionDeployerNPE2.sol">Git Source</a></p>
<h3 id="integrity_function_pointers-1"><a class="header" href="#integrity_function_pointers-1">INTEGRITY_FUNCTION_POINTERS</a></h3>
<p><em>The function pointers for the integrity check fns.</em></p>
<pre><code class="language-solidity">bytes constant INTEGRITY_FUNCTION_POINTERS =
    hex&quot;0a650adf0b480cc00cc00cca0cd30cee0d940d940df00e6c0e760e800cc00cca0cc00cc00cca0e6c0e6c0e6c0e6c0e6c0e8a0eac0ed60cc00e8a0cc00cc00e800cca0cc00cc00ef80ef80cc00cc00cca0cca0ef80ef80ef80ef80ef80ef80ef80ef80ef80ef80ef80ef80cca0f0f0f190f190f19&quot;;
</code></pre>
<h3 id="construction_meta_hash"><a class="header" href="#construction_meta_hash">CONSTRUCTION_META_HASH</a></h3>
<p><em>Hash of the known construction meta.</em></p>
<pre><code class="language-solidity">bytes32 constant CONSTRUCTION_META_HASH = bytes32(0x223935e6758ce9e5968c652b47f8e98901a7b189e99f1f6274bbb1221ae28dab);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rainterpreternpe2"><a class="header" href="#rainterpreternpe2">RainterpreterNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/concrete/RainterpreterNPE2.sol//src/interface/unstable/IInterpreterV2.sol/interface.IInterpreterV2.html">IInterpreterV2</a>, ERC165</p>
<p>Implementation of a Rainlang interpreter that is compatible with
native onchain Rainlang parsing.</p>
<h2 id="functions-4"><a class="header" href="#functions-4">Functions</a></h2>
<h3 id="eval2"><a class="header" href="#eval2">eval2</a></h3>
<p>There are MANY ways that eval can be forced into undefined/corrupt
behaviour by passing in invalid data. This is a deliberate design
decision to allow for the interpreter to be as gas efficient as
possible. The interpreter is provably read only, it contains no state
changing evm opcodes reachable on any logic path. This means that
the caller can only harm themselves by passing in invalid data and
either reverting, exhausting gas or getting back some garbage data.
The caller can trivially protect themselves from these OOB issues by
ensuring the integrity check has successfully run over the bytecode
before calling eval. Any smart contract caller can do this by using a
trusted and appropriate deployer contract to deploy the bytecode, which
will automatically run the integrity check during deployment, then
keeping a registry of trusted expression addresses for itself in storage.
This appears first in the contract in the hope that the compiler will
put it in the most efficient internal dispatch location to save a few
gas per eval call.</p>
<pre><code class="language-solidity">function eval2(
    IInterpreterStoreV1 store,
    FullyQualifiedNamespace namespace,
    EncodedDispatch dispatch,
    uint256[][] memory context,
    uint256[] memory inputs
) external view virtual returns (uint256[] memory, uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>The storage contract that the returned key/value pairs MUST be passed to IF the calling contract is in a non-static calling context. Static calling contexts MUST pass <code>address(0)</code>.</td></tr>
<tr><td><code>namespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>The fully qualified namespace that will be used by the interpreter at runtime in order to perform gets on the underlying store.</td></tr>
<tr><td><code>dispatch</code></td><td><code>EncodedDispatch</code></td><td>All the information required for the interpreter to load an expression, select an entrypoint and return the values expected by the caller. The interpreter MAY encode dispatches differently to <code>LibEncodedDispatch</code> but this WILL negatively impact compatibility for calling contracts that hardcode the encoding logic.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[][]</code></td><td>A 2-dimensional array of data that can be indexed into at runtime by the interpreter. The calling contract is responsible for ensuring the authenticity and completeness of context data. The interpreter MUST revert at runtime if an expression attempts to index into some context value that is not provided by the caller. This implies that context reads cannot be checked for out of bounds reads at deploy time, as the runtime context MAY be provided in a different shape to what the expression is expecting.</td></tr>
<tr><td><code>inputs</code></td><td><code>uint256[]</code></td><td>The inputs to the entrypoint stack of the expression. MAY be empty if the caller prefers to specify all inputs via. context.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>stack The list of values produced by evaluating the expression. MUST NOT be longer than the maximum length specified by <code>dispatch</code>, if applicable. MUST be ordered such that the top of the stack is the FIRST item in the array.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>writes A list of values to be processed by a store. Most likely will be pairwise key/value items but this is not strictly required if some store expects some other format.</td></tr>
</tbody></table>
</div>
<h3 id="supportsinterface-3"><a class="header" href="#supportsinterface-3">supportsInterface</a></h3>
<p><em>See {IERC165-supportsInterface}.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool);
</code></pre>
<h3 id="functionpointers"><a class="header" href="#functionpointers">functionPointers</a></h3>
<p>Exposes the function pointers as <code>uint16</code> values packed into a single
<code>bytes</code> in the same order as they would be indexed into by opcodes. For
example, if opcode <code>2</code> should dispatch function at position <code>0x1234</code> then
the start of the returned bytes would be <code>0xXXXXXXXX1234</code> where <code>X</code> is
a placeholder for the function pointers of opcodes <code>0</code> and <code>1</code>.
<code>IExpressionDeployerV3</code> contracts use these function pointers to
&quot;compile&quot; the expression into something that an interpreter can dispatch
directly without paying gas to lookup the same at runtime. As the
validity of any integrity check and subsequent dispatch is highly
sensitive to both the function pointers and overall bytecode of the
interpreter, <code>IExpressionDeployerV3</code> contracts SHOULD implement guards
against accidentally being deployed onchain paired against an unknown
interpreter. It is very easy for an apparent compatible pairing to be
subtly and critically incompatible due to addition/removal/reordering of
opcodes and compiler optimisations on the interpreter bytecode.
This MAY return different values during construction vs. all other times
after the interpreter has been successfully deployed onchain. DO NOT rely
on function pointers reported during contract construction.</p>
<pre><code class="language-solidity">function functionPointers() external view virtual returns (bytes memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-3"><a class="header" href="#constants-3">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterNPE2.sol">Git Source</a></p>
<h3 id="interpreter_bytecode_hash"><a class="header" href="#interpreter_bytecode_hash">INTERPRETER_BYTECODE_HASH</a></h3>
<p><em>Hash of the known interpreter bytecode.</em></p>
<pre><code class="language-solidity">bytes32 constant INTERPRETER_BYTECODE_HASH = bytes32(0x7cbd3b90f6e0eb55adc1bfcc00113e8050457173d7fa4261314d9b140237c009);
</code></pre>
<h3 id="opcode_function_pointers-1"><a class="header" href="#opcode_function_pointers-1">OPCODE_FUNCTION_POINTERS</a></h3>
<p><em>The function pointers known to the interpreter for dynamic dispatch.
By setting these as a constant they can be inlined into the interpreter
and loaded at eval time for very low gas (~100) due to the compiler
optimising it to a single <code>codecopy</code> to build the in memory bytes array.</em></p>
<pre><code class="language-solidity">bytes constant OPCODE_FUNCTION_POINTERS =
    hex&quot;0c2f0c7b0cb60e7b0e8d0e9f0eb80efa0f4c0f5d0f6e100c10f0112a11e8129811e8131c13be143614651494149414e31512157415fc16a316b7170d172117361750175b176f17841801184c1864187e189518ac18ac18f71942198d198d19d819d81a231a6e1ab91ab91b041beb1c1e1c761cab&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rainterpreterparsernpe2"><a class="header" href="#rainterpreterparsernpe2">RainterpreterParserNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterParserNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/concrete/RainterpreterParserNPE2.sol//src/interface/IParserV1.sol/interface.IParserV1.html">IParserV1</a>, ERC165</p>
<h2 id="functions-5"><a class="header" href="#functions-5">Functions</a></h2>
<h3 id="supportsinterface-4"><a class="header" href="#supportsinterface-4">supportsInterface</a></h3>
<p><em>See {IERC165-supportsInterface}.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view override returns (bool);
</code></pre>
<h3 id="parse"><a class="header" href="#parse">parse</a></h3>
<p>Parses a Rainlang string into an evaluable expression. MUST be
deterministic and MUST NOT have side effects. The only inputs are the
Rainlang string and the parse meta. MAY revert if the Rainlang string
is invalid. This function takes <code>bytes</code> instead of <code>string</code> to allow
for definitions of &quot;string&quot; other than UTF-8.</p>
<pre><code class="language-solidity">function parse(bytes memory data) external pure virtual override returns (bytes memory, uint256[] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>The Rainlang bytes to parse.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>bytecode The expressions that can be evaluated.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>constants The constants that can be referenced by sources.</td></tr>
</tbody></table>
</div>
<h3 id="parsemeta"><a class="header" href="#parsemeta">parseMeta</a></h3>
<p>Virtual function to return the parse meta.</p>
<pre><code class="language-solidity">function parseMeta() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="operandhandlerfunctionpointers"><a class="header" href="#operandhandlerfunctionpointers">operandHandlerFunctionPointers</a></h3>
<p>Virtual function to return the operand handler function pointers.</p>
<pre><code class="language-solidity">function operandHandlerFunctionPointers() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="literalparserfunctionpointers"><a class="header" href="#literalparserfunctionpointers">literalParserFunctionPointers</a></h3>
<p>Virtual function to return the literal parser function pointers.</p>
<pre><code class="language-solidity">function literalParserFunctionPointers() internal pure virtual returns (bytes memory);
</code></pre>
<h3 id="buildoperandhandlerfunctionpointers"><a class="header" href="#buildoperandhandlerfunctionpointers">buildOperandHandlerFunctionPointers</a></h3>
<p>External function to build the operand handler function pointers.</p>
<pre><code class="language-solidity">function buildOperandHandlerFunctionPointers() external pure returns (bytes memory);
</code></pre>
<h3 id="buildliteralparserfunctionpointers"><a class="header" href="#buildliteralparserfunctionpointers">buildLiteralParserFunctionPointers</a></h3>
<p>External function to build the literal parser function pointers.</p>
<pre><code class="language-solidity">function buildLiteralParserFunctionPointers() external pure returns (bytes memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-4"><a class="header" href="#constants-4">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterParserNPE2.sol">Git Source</a></p>
<h3 id="parser_bytecode_hash"><a class="header" href="#parser_bytecode_hash">PARSER_BYTECODE_HASH</a></h3>
<pre><code class="language-solidity">bytes32 constant PARSER_BYTECODE_HASH = bytes32(0x3e0f88a0fe55c6d407039dde744789f22e5a6bbf31652626d104829454653582);
</code></pre>
<h3 id="parse_meta"><a class="header" href="#parse_meta">PARSE_META</a></h3>
<pre><code class="language-solidity">bytes constant PARSE_META =
    hex&quot;02498808220a2013000c08021320c51020c10908004040400494201934224b00862800000000000000000000000000000000000000000000000800000000000000004023f779410dee1ce71b34b7b5359da6ea020c8489085226f6097827fe01d556492d1274f7178783b30a15fe82282279c32eb3469f29e149b12b2e1b223144b77937ad62f706963085008cdb9427ab5e491d9a2df0119741001eaeb15503f54c1625146dc00cb486333644bf3320bac6511485c0c33326583d07a6dee51f3f2f4316c4b76618c85a9a39561eec2fc2def922721d5d2a2bd7880bd7d8610fac9dd91a7da12e05797e1e327c8fab0e13dd511c8433372195f3ee2cce06352406c95d12b5795d2683722110fafb871951da9a13bef3b21566f6c2304a27d20475cf3434985d02383cf36e&quot;;
</code></pre>
<h3 id="parse_meta_build_depth"><a class="header" href="#parse_meta_build_depth">PARSE_META_BUILD_DEPTH</a></h3>
<pre><code class="language-solidity">uint8 constant PARSE_META_BUILD_DEPTH = 2;
</code></pre>
<h3 id="operand_handler_function_pointers"><a class="header" href="#operand_handler_function_pointers">OPERAND_HANDLER_FUNCTION_POINTERS</a></h3>
<pre><code class="language-solidity">bytes constant OPERAND_HANDLER_FUNCTION_POINTERS =
    hex&quot;0eb40eb40f490fea0fea0fea0f490f490eb40eb40f490f490fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0eb40eb40fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea102f10c310c30fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0fea0eb40eb40eb4&quot;;
</code></pre>
<h3 id="literal_parser_function_pointers"><a class="header" href="#literal_parser_function_pointers">LITERAL_PARSER_FUNCTION_POINTERS</a></h3>
<pre><code class="language-solidity">bytes constant LITERAL_PARSER_FUNCTION_POINTERS = hex&quot;07e60aae0d83&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libexternopintincnpe2"><a class="header" href="#libexternopintincnpe2">LibExternOpIntIncNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterReferenceExternNPE2.sol">Git Source</a></p>
<h2 id="functions-6"><a class="header" href="#functions-6">Functions</a></h2>
<h3 id="run"><a class="header" href="#run">run</a></h3>
<p>Running the extern increments every input by 1. By allowing many inputs
we can test multi input/output logic is implemented correctly for
externs.</p>
<pre><code class="language-solidity">function run(Operand, uint256[] memory inputs) internal pure returns (uint256[] memory);
</code></pre>
<h3 id="integrity"><a class="header" href="#integrity">integrity</a></h3>
<p>The integrity check for the extern increment opcode. The inputs and
outputs are the same always.</p>
<pre><code class="language-solidity">function integrity(Operand, uint256 inputs, uint256) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="subparser"><a class="header" href="#subparser">subParser</a></h3>
<p>The sub parser for the extern increment opcode. It has no special logic
so uses the default sub parser from <code>LibSubParse</code>.</p>
<pre><code class="language-solidity">function subParser(uint256 constantsHeight, uint256 inputsByte, Operand operand)
    internal
    view
    returns (bool, bytes memory, uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libexternopstackoperandnpe2"><a class="header" href="#libexternopstackoperandnpe2">LibExternOpStackOperandNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterReferenceExternNPE2.sol">Git Source</a></p>
<h2 id="functions-7"><a class="header" href="#functions-7">Functions</a></h2>
<h3 id="subparser-1"><a class="header" href="#subparser-1">subParser</a></h3>
<pre><code class="language-solidity">function subParser(uint256 constantsHeight, uint256, Operand operand)
    internal
    pure
    returns (bool, bytes memory, uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="librainterpreterreferenceexternnpe2"><a class="header" href="#librainterpreterreferenceexternnpe2">LibRainterpreterReferenceExternNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterReferenceExternNPE2.sol">Git Source</a></p>
<h2 id="functions-8"><a class="header" href="#functions-8">Functions</a></h2>
<h3 id="authoringmetav2"><a class="header" href="#authoringmetav2">authoringMetaV2</a></h3>
<p>This mirrors the <code>authoringMeta</code> function in <code>LibAllStandardOps</code>. The
goal is to produce a standard encoded <code>AuthoringMeta[]</code> that tooling can
use to describe all the parseable words, that can be built directly into
a useable parse meta with the standard libs. Note that the list of
parseable words is not limited to the externs, the sub parser is free
to define words that it then parses back into bytecode that is run by
the interpreter itself.</p>
<pre><code class="language-solidity">function authoringMetaV2() internal pure returns (bytes memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rainterpreterreferenceexternnpe2"><a class="header" href="#rainterpreterreferenceexternnpe2">RainterpreterReferenceExternNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterReferenceExternNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/concrete/RainterpreterReferenceExternNPE2.sol//src/abstract/BaseRainterpreterSubParserNPE2.sol/abstract.BaseRainterpreterSubParserNPE2.html">BaseRainterpreterSubParserNPE2</a>, <a href="src/concrete/RainterpreterReferenceExternNPE2.sol//src/abstract/BaseRainterpreterExternNPE2.sol/abstract.BaseRainterpreterExternNPE2.html">BaseRainterpreterExternNPE2</a></p>
<h2 id="functions-9"><a class="header" href="#functions-9">Functions</a></h2>
<h3 id="subparserparsemeta-1"><a class="header" href="#subparserparsemeta-1">subParserParseMeta</a></h3>
<p>Overrides the base parse meta for sub parsing. Simply returns the known
constant value, which should allow the compiler to optimise the entire
function call away.</p>
<pre><code class="language-solidity">function subParserParseMeta() internal pure virtual override returns (bytes memory);
</code></pre>
<h3 id="subparserfunctionpointers-1"><a class="header" href="#subparserfunctionpointers-1">subParserFunctionPointers</a></h3>
<p>Overrides the base function pointers for sub parsing. Simply returns the
known constant value, which should allow the compiler to optimise the
entire function call away.</p>
<pre><code class="language-solidity">function subParserFunctionPointers() internal pure override returns (bytes memory);
</code></pre>
<h3 id="subparseroperandhandlers-1"><a class="header" href="#subparseroperandhandlers-1">subParserOperandHandlers</a></h3>
<p>Overrides the base operand handlers for sub parsing. Simply returns the
known constant value, which should allow the compiler to optimise the
entire function call away.</p>
<pre><code class="language-solidity">function subParserOperandHandlers() internal pure override returns (bytes memory);
</code></pre>
<h3 id="subparserliteralparsers-1"><a class="header" href="#subparserliteralparsers-1">subParserLiteralParsers</a></h3>
<p>Overrides the base literal parsers for sub parsing. Simply returns the
known constant value, which should allow the compiler to optimise the
entire function call away.</p>
<pre><code class="language-solidity">function subParserLiteralParsers() internal pure override returns (bytes memory);
</code></pre>
<h3 id="subparsercompatibility-1"><a class="header" href="#subparsercompatibility-1">subParserCompatibility</a></h3>
<p>Overrides the compatibility version for sub parsing. Simply returns the
known constant value, which should allow the compiler to optimise the
entire function call away.</p>
<pre><code class="language-solidity">function subParserCompatibility() internal pure override returns (bytes32);
</code></pre>
<h3 id="opcodefunctionpointers-1"><a class="header" href="#opcodefunctionpointers-1">opcodeFunctionPointers</a></h3>
<p>Overrides the base function pointers for opcodes. Simply returns the
known constant value, which should allow the compiler to optimise the
entire function call away.</p>
<pre><code class="language-solidity">function opcodeFunctionPointers() internal pure override returns (bytes memory);
</code></pre>
<h3 id="integrityfunctionpointers-2"><a class="header" href="#integrityfunctionpointers-2">integrityFunctionPointers</a></h3>
<p>Overrides the base function pointers for integrity checks. Simply returns
the known constant value, which should allow the compiler to optimise the
entire function call away.</p>
<pre><code class="language-solidity">function integrityFunctionPointers() internal pure override returns (bytes memory);
</code></pre>
<h3 id="buildsubparserliteralparsers"><a class="header" href="#buildsubparserliteralparsers">buildSubParserLiteralParsers</a></h3>
<p>The literal parsers are the same as the main parser. In the future this
is likely to be changed so that sub parsers only have to define
<em>additional</em> literal parsers that they provide, as it is redundant and
fragile to have to define the same literal parsers in multiple places.</p>
<pre><code class="language-solidity">function buildSubParserLiteralParsers() external pure returns (bytes memory);
</code></pre>
<h3 id="buildsubparseroperandhandlers"><a class="header" href="#buildsubparseroperandhandlers">buildSubParserOperandHandlers</a></h3>
<p>There's only one operand parser for this implementation, the disallowed
parser. We haven't implemented any words with meaningful operands yet.</p>
<pre><code class="language-solidity">function buildSubParserOperandHandlers() external pure returns (bytes memory);
</code></pre>
<h3 id="buildsubparserfunctionpointers"><a class="header" href="#buildsubparserfunctionpointers">buildSubParserFunctionPointers</a></h3>
<p>This mimics how <code>LibAllStandardOpsNP</code> builds bytes out of function
pointers, but for sub parser functions. This is NOT intended to be
called at runtime, instead tooling (e.g. the test suite) can call this
function and compare it to <code>subParserFunctionPointers</code> to ensure they
are in sync. This makes the runtime function pointer lookup much more
gas efficient by allowing it to be constant. The reason this can't be
done within the test itself is that the pointers need to be calculated
relative to the bytecode of the current contract, not the test contract.</p>
<pre><code class="language-solidity">function buildSubParserFunctionPointers() external pure returns (bytes memory);
</code></pre>
<h3 id="buildopcodefunctionpointers"><a class="header" href="#buildopcodefunctionpointers">buildOpcodeFunctionPointers</a></h3>
<p>This mimics how LibAllStandardOpsNP builds function pointers for the
Rainterpreter. The same pattern applies to externs but for a different
function signature for each opcode. Call this function somehow, e.g. from
within a test, and then copy the output into the
<code>OPCODE_FUNCTION_POINTERS</code> if there is a mismatch. This makes the
function pointer lookup much more gas efficient. The reason this can't be
done within the test itself is that the pointers need to be calculated
relative to the bytecode of the current contract, not the test contract.</p>
<pre><code class="language-solidity">function buildOpcodeFunctionPointers() external pure returns (bytes memory);
</code></pre>
<h3 id="buildintegrityfunctionpointers"><a class="header" href="#buildintegrityfunctionpointers">buildIntegrityFunctionPointers</a></h3>
<p>This applies the same pattern to integrity function pointers as the
opcode and parser function pointers on this same contract. Call this
function somehow, e.g. from within a test, and then check there is no
mismatch with the <code>INTEGRITY_FUNCTION_POINTERS</code> constant. This makes the
function pointer lookup at runtime much more gas efficient by allowing
it to be constant. The reason this can't be done within the test itself
is that the pointers need to be calculated relative to the bytecode of
the current contract, not the test contract.</p>
<pre><code class="language-solidity">function buildIntegrityFunctionPointers() external pure returns (bytes memory);
</code></pre>
<h3 id="supportsinterface-5"><a class="header" href="#supportsinterface-5">supportsInterface</a></h3>
<p>This is only needed because the parser and extern base contracts both
implement IERC165, and the compiler needs to be told how to resolve the
ambiguity.</p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId)
    public
    view
    virtual
    override(BaseRainterpreterSubParserNPE2, BaseRainterpreterExternNPE2)
    returns (bool);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-5"><a class="header" href="#constants-5">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterReferenceExternNPE2.sol">Git Source</a></p>
<h3 id="sub_parser_function_pointers_length"><a class="header" href="#sub_parser_function_pointers_length">SUB_PARSER_FUNCTION_POINTERS_LENGTH</a></h3>
<p><em>The number of subparser functions available to the parser. This is NOT
1:1 with the number of opcodes provided by the extern component of this
contract. It is possible to subparse words into opcodes that run entirely
within the interpreter, and do not have an associated extern dispatch.</em></p>
<pre><code class="language-solidity">uint256 constant SUB_PARSER_FUNCTION_POINTERS_LENGTH = 2;
</code></pre>
<h3 id="sub_parser_function_pointers-1"><a class="header" href="#sub_parser_function_pointers-1">SUB_PARSER_FUNCTION_POINTERS</a></h3>
<p><em>Real function pointers to the sub parser functions that produce the
bytecode that this contract knows about. This is both constructing the extern
bytecode that dials back into this contract at eval time, and creating
to things that happen entirely on the interpreter such as well known
constants and references to the context grid.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_FUNCTION_POINTERS = hex&quot;0a120a35&quot;;
</code></pre>
<h3 id="sub_parser_parse_meta-1"><a class="header" href="#sub_parser_parse_meta-1">SUB_PARSER_PARSE_META</a></h3>
<p><em>Real sub parser meta bytes that map parsed strings to the functions that
know how to parse those strings into opcodes for the main parser. Structured
identically to parse meta for the main parser.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_PARSE_META =
    hex&quot;0100000000000000000000000000000000000000000000000000000000400000000200ae37f501f2eec7&quot;;
</code></pre>
<h3 id="sub_parser_operand_handlers-1"><a class="header" href="#sub_parser_operand_handlers-1">SUB_PARSER_OPERAND_HANDLERS</a></h3>
<p><em>Real function pointers to the operand parsers that are available at
parse time, encoded into a single 256 bit word. Each 2 bytes starting from
the rightmost position is a pointer to an operand parser function. In the
future this is likely to be removed, or refactored to value handling only
rather than parsing.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_OPERAND_HANDLERS = hex&quot;066a06af&quot;;
</code></pre>
<h3 id="sub_parser_literal_parsers-1"><a class="header" href="#sub_parser_literal_parsers-1">SUB_PARSER_LITERAL_PARSERS</a></h3>
<p><em>Real function pointers to the literal parsers that are available at
parse time, encoded into a single 256 bit word. Each 2 bytes starting from
the rightmost position is a pointer to a literal parser function. In the
future this is likely to be removed, in favour of a dedicated literal parser
feature.</em></p>
<pre><code class="language-solidity">bytes constant SUB_PARSER_LITERAL_PARSERS = hex&quot;&quot;;
</code></pre>
<h3 id="opcode_function_pointers-2"><a class="header" href="#opcode_function_pointers-2">OPCODE_FUNCTION_POINTERS</a></h3>
<p><em>Real function pointers to the opcodes for the extern component of this
contract. These get run at eval time wehen the interpreter calls into the
contract as an <code>IInterpreterExternV3</code>.</em></p>
<pre><code class="language-solidity">bytes constant OPCODE_FUNCTION_POINTERS = hex&quot;058b&quot;;
</code></pre>
<h3 id="opcode_function_pointers_length"><a class="header" href="#opcode_function_pointers_length">OPCODE_FUNCTION_POINTERS_LENGTH</a></h3>
<p><em>Number of opcode function pointers available to run at eval time.</em></p>
<pre><code class="language-solidity">uint256 constant OPCODE_FUNCTION_POINTERS_LENGTH = 1;
</code></pre>
<h3 id="integrity_function_pointers-2"><a class="header" href="#integrity_function_pointers-2">INTEGRITY_FUNCTION_POINTERS</a></h3>
<p><em>Real function pointers to the integrity checks for the extern component
of this contract. These get run at deploy time when the main integrity checks
are run, the extern opcode integrity on the deployer will delegate integrity
checks to the extern contract.</em></p>
<pre><code class="language-solidity">bytes constant INTEGRITY_FUNCTION_POINTERS = hex&quot;0744&quot;;
</code></pre>
<h3 id="op_index_increment"><a class="header" href="#op_index_increment">OP_INDEX_INCREMENT</a></h3>
<p><em>Opcode index of the extern increment opcode. Needs to be manually kept
in sync with the extern opcode function pointers. Definitely write tests for
this to ensure a mismatch doesn't happen silently.</em></p>
<pre><code class="language-solidity">uint256 constant OP_INDEX_INCREMENT = 0;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oddsetlength"><a class="header" href="#oddsetlength">OddSetLength</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterStoreNPE2.sol">Git Source</a></p>
<p>Thrown when a <code>set</code> call is made with an odd number of arguments.</p>
<pre><code class="language-solidity">error OddSetLength(uint256 length);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rainterpreterstorenpe2"><a class="header" href="#rainterpreterstorenpe2">RainterpreterStoreNPE2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterStoreNPE2.sol">Git Source</a></p>
<p><strong>Inherits:</strong>
<a href="src/concrete/RainterpreterStoreNPE2.sol//src/interface/unstable/IInterpreterStoreV2.sol/interface.IInterpreterStoreV2.html">IInterpreterStoreV2</a>, ERC165</p>
<p>Simplest possible <code>IInterpreterStoreV2</code> that could work.
Takes key/value pairings from the input array and stores each in an internal
mapping. <code>StateNamespace</code> is fully qualified only by <code>msg.sender</code> on set and
doesn't attempt to do any deduping etc. if the same key appears twice it will
be set twice.</p>
<h2 id="state-variables-1"><a class="header" href="#state-variables-1">State Variables</a></h2>
<h3 id="sstore"><a class="header" href="#sstore">sStore</a></h3>
<p>Store is several tiers of sandbox.
0. Address hashed into <code>FullyQualifiedNamespace</code> is <code>msg.sender</code> so that
callers cannot attack each other</p>
<ol>
<li>StateNamespace is caller-provided namespace so that expressions cannot
attack each other</li>
<li><code>uint256</code> is expression-provided key</li>
<li><code>uint256</code> is expression-provided value
tiers 0 and 1 are both embodied in the <code>FullyQualifiedNamespace</code>.</li>
</ol>
<pre><code class="language-solidity">mapping(FullyQualifiedNamespace fullyQualifiedNamespace =&gt; mapping(uint256 key =&gt; uint256 value)) internal sStore;
</code></pre>
<h2 id="functions-10"><a class="header" href="#functions-10">Functions</a></h2>
<h3 id="supportsinterface-6"><a class="header" href="#supportsinterface-6">supportsInterface</a></h3>
<p><em>See {IERC165-supportsInterface}.</em></p>
<pre><code class="language-solidity">function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool);
</code></pre>
<h3 id="set"><a class="header" href="#set">set</a></h3>
<p>Mutates the interpreter store in bulk. The bulk values are provided in
the form of a <code>uint256[]</code> which can be treated e.g. as pairwise keys and
values to be stored in a Solidity mapping. The <code>IInterpreterStoreV2</code>
defines the meaning of the <code>uint256[]</code> for its own storage logic.</p>
<pre><code class="language-solidity">function set(StateNamespace namespace, uint256[] calldata kvs) external virtual;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>StateNamespace</code></td><td>The unqualified namespace for the set that MUST be fully qualified by the <code>IInterpreterStoreV2</code> to prevent key collisions between callers. The fully qualified namespace forms a compound key with the keys for each value to set.</td></tr>
<tr><td><code>kvs</code></td><td><code>uint256[]</code></td><td>The list of changes to apply to the store's internal state.</td></tr>
</tbody></table>
</div>
<h3 id="get"><a class="header" href="#get">get</a></h3>
<p>This would be picked up by an out of bounds index below, but it's
nice to have a more specific error message.</p>
<pre><code class="language-solidity">function get(FullyQualifiedNamespace namespace, uint256 key) external view virtual returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>The fully qualified namespace to get a single value for.</td></tr>
<tr><td><code>key</code></td><td><code>uint256</code></td><td>The key to get the value for within the namespace.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The value OR ZERO IF NOT SET.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-6"><a class="header" href="#constants-6">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/concrete/RainterpreterStoreNPE2.sol">Git Source</a></p>
<h3 id="store_bytecode_hash"><a class="header" href="#store_bytecode_hash">STORE_BYTECODE_HASH</a></h3>
<p><em>Hash of the known store bytecode.</em></p>
<pre><code class="language-solidity">bytes32 constant STORE_BYTECODE_HASH = bytes32(0x2a4559222e2f3600b2d393715de8af57620439684463f745059c653bbfe3727f);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-2"><a class="header" href="#contents-2">Contents</a></h1>
<ul>
<li><a href="src/error/ErrBitwise.sol/contract.ErrBitwise.html">ErrBitwise</a></li>
<li><a href="src/error/ErrBitwise.sol/error.UnsupportedBitwiseShiftAmount.html">UnsupportedBitwiseShiftAmount</a></li>
<li><a href="src/error/ErrBitwise.sol/error.TruncatedBitwiseEncoding.html">TruncatedBitwiseEncoding</a></li>
<li><a href="src/error/ErrBitwise.sol/error.ZeroLengthBitwiseEncoding.html">ZeroLengthBitwiseEncoding</a></li>
<li><a href="src/error/ErrBytecode.sol/contract.ErrBytecode.html">ErrBytecode</a></li>
<li><a href="src/error/ErrBytecode.sol/error.SourceIndexOutOfBounds.html">SourceIndexOutOfBounds</a></li>
<li><a href="src/error/ErrBytecode.sol/error.UnexpectedSources.html">UnexpectedSources</a></li>
<li><a href="src/error/ErrBytecode.sol/error.UnexpectedTrailingOffsetBytes.html">UnexpectedTrailingOffsetBytes</a></li>
<li><a href="src/error/ErrBytecode.sol/error.TruncatedSource.html">TruncatedSource</a></li>
<li><a href="src/error/ErrBytecode.sol/error.TruncatedHeader.html">TruncatedHeader</a></li>
<li><a href="src/error/ErrBytecode.sol/error.TruncatedHeaderOffsets.html">TruncatedHeaderOffsets</a></li>
<li><a href="src/error/ErrBytecode.sol/error.StackSizingsNotMonotonic.html">StackSizingsNotMonotonic</a></li>
<li><a href="src/error/ErrDeploy.sol/contract.ErrDeploy.html">ErrDeploy</a></li>
<li><a href="src/error/ErrDeploy.sol/error.UnexpectedPointers.html">UnexpectedPointers</a></li>
<li><a href="src/error/ErrDeploy.sol/error.UnexpectedInterpreterBytecodeHash.html">UnexpectedInterpreterBytecodeHash</a></li>
<li><a href="src/error/ErrDeploy.sol/error.UnexpectedStoreBytecodeHash.html">UnexpectedStoreBytecodeHash</a></li>
<li><a href="src/error/ErrDeploy.sol/error.UnexpectedParserBytecodeHash.html">UnexpectedParserBytecodeHash</a></li>
<li><a href="src/error/ErrDeploy.sol/error.UnexpectedConstructionMetaHash.html">UnexpectedConstructionMetaHash</a></li>
<li><a href="src/error/ErrExtern.sol/contract.ErrExtern.html">ErrExtern</a></li>
<li><a href="src/error/ErrExtern.sol/error.NotAnExternContract.html">NotAnExternContract</a></li>
<li><a href="src/error/ErrExtern.sol/error.BadInputs.html">BadInputs</a></li>
<li><a href="src/error/ErrOpList.sol/contract.ErrOpList.html">ErrOpList</a></li>
<li><a href="src/error/ErrOpList.sol/error.BadDynamicLength.html">BadDynamicLength</a></li>
<li><a href="src/error/ErrParse.sol/contract.ErrParse.html">ErrParse</a></li>
<li><a href="src/error/ErrParse.sol/error.UnexpectedOperand.html">UnexpectedOperand</a></li>
<li><a href="src/error/ErrParse.sol/error.UnexpectedOperandValue.html">UnexpectedOperandValue</a></li>
<li><a href="src/error/ErrParse.sol/error.ExpectedOperand.html">ExpectedOperand</a></li>
<li><a href="src/error/ErrParse.sol/error.OperandOverflow.html">OperandOverflow</a></li>
<li><a href="src/error/ErrParse.sol/error.OperandValuesOverflow.html">OperandValuesOverflow</a></li>
<li><a href="src/error/ErrParse.sol/error.UnclosedOperand.html">UnclosedOperand</a></li>
<li><a href="src/error/ErrParse.sol/error.UnsupportedLiteralType.html">UnsupportedLiteralType</a></li>
<li><a href="src/error/ErrParse.sol/error.StringTooLong.html">StringTooLong</a></li>
<li><a href="src/error/ErrParse.sol/error.UnclosedStringLiteral.html">UnclosedStringLiteral</a></li>
<li><a href="src/error/ErrParse.sol/error.HexLiteralOverflow.html">HexLiteralOverflow</a></li>
<li><a href="src/error/ErrParse.sol/error.ZeroLengthHexLiteral.html">ZeroLengthHexLiteral</a></li>
<li><a href="src/error/ErrParse.sol/error.OddLengthHexLiteral.html">OddLengthHexLiteral</a></li>
<li><a href="src/error/ErrParse.sol/error.MalformedHexLiteral.html">MalformedHexLiteral</a></li>
<li><a href="src/error/ErrParse.sol/error.DecimalLiteralOverflow.html">DecimalLiteralOverflow</a></li>
<li><a href="src/error/ErrParse.sol/error.MalformedExponentDigits.html">MalformedExponentDigits</a></li>
<li><a href="src/error/ErrParse.sol/error.ZeroLengthDecimal.html">ZeroLengthDecimal</a></li>
<li><a href="src/error/ErrParse.sol/error.MissingFinalSemi.html">MissingFinalSemi</a></li>
<li><a href="src/error/ErrParse.sol/error.UnexpectedLHSChar.html">UnexpectedLHSChar</a></li>
<li><a href="src/error/ErrParse.sol/error.UnexpectedRHSChar.html">UnexpectedRHSChar</a></li>
<li><a href="src/error/ErrParse.sol/error.ExpectedLeftParen.html">ExpectedLeftParen</a></li>
<li><a href="src/error/ErrParse.sol/error.UnexpectedRightParen.html">UnexpectedRightParen</a></li>
<li><a href="src/error/ErrParse.sol/error.UnclosedLeftParen.html">UnclosedLeftParen</a></li>
<li><a href="src/error/ErrParse.sol/error.UnexpectedComment.html">UnexpectedComment</a></li>
<li><a href="src/error/ErrParse.sol/error.UnclosedComment.html">UnclosedComment</a></li>
<li><a href="src/error/ErrParse.sol/error.MalformedCommentStart.html">MalformedCommentStart</a></li>
<li><a href="src/error/ErrParse.sol/error.DuplicateLHSItem.html">DuplicateLHSItem</a></li>
<li><a href="src/error/ErrParse.sol/error.ExcessLHSItems.html">ExcessLHSItems</a></li>
<li><a href="src/error/ErrParse.sol/error.NotAcceptingInputs.html">NotAcceptingInputs</a></li>
<li><a href="src/error/ErrParse.sol/error.ExcessRHSItems.html">ExcessRHSItems</a></li>
<li><a href="src/error/ErrParse.sol/error.WordSize.html">WordSize</a></li>
<li><a href="src/error/ErrParse.sol/error.UnknownWord.html">UnknownWord</a></li>
<li><a href="src/error/ErrParse.sol/error.MaxSources.html">MaxSources</a></li>
<li><a href="src/error/ErrParse.sol/error.DanglingSource.html">DanglingSource</a></li>
<li><a href="src/error/ErrParse.sol/error.ParserOutOfBounds.html">ParserOutOfBounds</a></li>
<li><a href="src/error/ErrParse.sol/error.ParseStackOverflow.html">ParseStackOverflow</a></li>
<li><a href="src/error/ErrParse.sol/error.ParseStackUnderflow.html">ParseStackUnderflow</a></li>
<li><a href="src/error/ErrParse.sol/error.ParenOverflow.html">ParenOverflow</a></li>
<li><a href="src/error/ErrParse.sol/error.NoWhitespaceAfterUsingWordsFrom.html">NoWhitespaceAfterUsingWordsFrom</a></li>
<li><a href="src/error/ErrParse.sol/error.InvalidAddressLength.html">InvalidAddressLength</a></li>
<li><a href="src/error/ErrParse.sol/error.BadSubParserResult.html">BadSubParserResult</a></li>
<li><a href="src/error/ErrSubParse.sol/error.IncompatibleSubParser.html">IncompatibleSubParser</a></li>
<li><a href="src/error/ErrSubParse.sol/error.ExternDispatchConstantsHeightOverflow.html">ExternDispatchConstantsHeightOverflow</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="errbitwise"><a class="header" href="#errbitwise">ErrBitwise</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBitwise.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unsupportedbitwiseshiftamount"><a class="header" href="#unsupportedbitwiseshiftamount">UnsupportedBitwiseShiftAmount</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBitwise.sol">Git Source</a></p>
<p>Thrown during integrity check when a bitwise shift operation is attempted
with a shift amount greater than 255 or 0. As the shift amount is taken from
the operand, this is a compile time error so there's no need to support
behaviour that would always evaluate to 0 or be a noop.</p>
<pre><code class="language-solidity">error UnsupportedBitwiseShiftAmount(uint256 shiftAmount);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="truncatedbitwiseencoding"><a class="header" href="#truncatedbitwiseencoding">TruncatedBitwiseEncoding</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBitwise.sol">Git Source</a></p>
<p>Thrown during integrity check when bitwise (en|de)coding would be truncated
due to the end bit position being beyond 256.</p>
<pre><code class="language-solidity">error TruncatedBitwiseEncoding(uint256 startBit, uint256 length);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>startBit</code></td><td><code>uint256</code></td><td>The start of the OOB encoding.</td></tr>
<tr><td><code>length</code></td><td><code>uint256</code></td><td>The length of the OOB encoding.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="zerolengthbitwiseencoding"><a class="header" href="#zerolengthbitwiseencoding">ZeroLengthBitwiseEncoding</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBitwise.sol">Git Source</a></p>
<p>Thrown during integrity check when the length of a bitwise (en|de)coding
would be 0.</p>
<pre><code class="language-solidity">error ZeroLengthBitwiseEncoding();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="errbytecode"><a class="header" href="#errbytecode">ErrBytecode</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="sourceindexoutofbounds"><a class="header" href="#sourceindexoutofbounds">SourceIndexOutOfBounds</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when a bytecode source index is out of bounds.</p>
<pre><code class="language-solidity">error SourceIndexOutOfBounds(bytes bytecode, uint256 sourceIndex);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>uint256</code></td><td>The source index that was out of bounds.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedsources"><a class="header" href="#unexpectedsources">UnexpectedSources</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when a bytecode reports itself as 0 sources but has more than 1 byte.</p>
<pre><code class="language-solidity">error UnexpectedSources(bytes bytecode);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedtrailingoffsetbytes"><a class="header" href="#unexpectedtrailingoffsetbytes">UnexpectedTrailingOffsetBytes</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when bytes are discovered between the offsets and the sources.</p>
<pre><code class="language-solidity">error UnexpectedTrailingOffsetBytes(bytes bytecode);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="truncatedsource"><a class="header" href="#truncatedsource">TruncatedSource</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when the end of a source as self reported by its header doesnt match
the start of the next source or the end of the bytecode.</p>
<pre><code class="language-solidity">error TruncatedSource(bytes bytecode);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="truncatedheader"><a class="header" href="#truncatedheader">TruncatedHeader</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when the offset to a source points to a location that cannot fit a
header before the start of the next source or the end of the bytecode.</p>
<pre><code class="language-solidity">error TruncatedHeader(bytes bytecode);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="truncatedheaderoffsets"><a class="header" href="#truncatedheaderoffsets">TruncatedHeaderOffsets</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when the bytecode is truncated before the end of the header offsets.</p>
<pre><code class="language-solidity">error TruncatedHeaderOffsets(bytes bytecode);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="stacksizingsnotmonotonic"><a class="header" href="#stacksizingsnotmonotonic">StackSizingsNotMonotonic</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrBytecode.sol">Git Source</a></p>
<p>Thrown when the stack sizings, allocation, inputs and outputs, are not
monotonically increasing.</p>
<pre><code class="language-solidity">error StackSizingsNotMonotonic(bytes bytecode, uint256 relativeOffset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode that was inspected.</td></tr>
<tr><td><code>relativeOffset</code></td><td><code>uint256</code></td><td>The relative offset of the source that was inspected.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="errdeploy"><a class="header" href="#errdeploy">ErrDeploy</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrDeploy.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedpointers"><a class="header" href="#unexpectedpointers">UnexpectedPointers</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrDeploy.sol">Git Source</a></p>
<p><em>Thrown when the pointers known to the expression deployer DO NOT match
the interpreter it is constructed for. This WILL cause undefined expression
behaviour so MUST REVERT.</em></p>
<pre><code class="language-solidity">error UnexpectedPointers(bytes actualPointers);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>actualPointers</code></td><td><code>bytes</code></td><td>The actual function pointers found at the interpreter address upon construction.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedinterpreterbytecodehash"><a class="header" href="#unexpectedinterpreterbytecodehash">UnexpectedInterpreterBytecodeHash</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrDeploy.sol">Git Source</a></p>
<p>Thrown when the <code>RainterpreterExpressionDeployerNPE2</code> is constructed with
unknown interpreter bytecode.</p>
<pre><code class="language-solidity">error UnexpectedInterpreterBytecodeHash(bytes32 expectedBytecodeHash, bytes32 actualBytecodeHash);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedBytecodeHash</code></td><td><code>bytes32</code></td><td>The bytecode hash that was expected at the interpreter address upon construction.</td></tr>
<tr><td><code>actualBytecodeHash</code></td><td><code>bytes32</code></td><td>The bytecode hash that was found at the interpreter address upon construction.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedstorebytecodehash"><a class="header" href="#unexpectedstorebytecodehash">UnexpectedStoreBytecodeHash</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrDeploy.sol">Git Source</a></p>
<p>Thrown when the <code>RainterpreterNPE2</code> is constructed with unknown store bytecode.</p>
<pre><code class="language-solidity">error UnexpectedStoreBytecodeHash(bytes32 expectedBytecodeHash, bytes32 actualBytecodeHash);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedBytecodeHash</code></td><td><code>bytes32</code></td><td>The bytecode hash that was expected at the store address upon construction.</td></tr>
<tr><td><code>actualBytecodeHash</code></td><td><code>bytes32</code></td><td>The bytecode hash that was found at the store address upon construction.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedparserbytecodehash"><a class="header" href="#unexpectedparserbytecodehash">UnexpectedParserBytecodeHash</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrDeploy.sol">Git Source</a></p>
<p>Thrown when the <code>RainterpreterNPE2</code> is constructed with unknown parser
bytecode.</p>
<pre><code class="language-solidity">error UnexpectedParserBytecodeHash(bytes32 expectedBytecodeHash, bytes32 actualBytecodeHash);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedBytecodeHash</code></td><td><code>bytes32</code></td><td>The bytecode hash that was expected at the parser address upon construction.</td></tr>
<tr><td><code>actualBytecodeHash</code></td><td><code>bytes32</code></td><td>The bytecode hash that was found at the parser address upon construction.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedconstructionmetahash"><a class="header" href="#unexpectedconstructionmetahash">UnexpectedConstructionMetaHash</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrDeploy.sol">Git Source</a></p>
<p>Thrown when the <code>RainterpreterNPE2</code> is constructed with unknown meta.</p>
<pre><code class="language-solidity">error UnexpectedConstructionMetaHash(bytes32 expectedConstructionMetaHash, bytes32 actualConstructionMetaHash);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expectedConstructionMetaHash</code></td><td><code>bytes32</code></td><td>The meta hash that was expected upon construction.</td></tr>
<tr><td><code>actualConstructionMetaHash</code></td><td><code>bytes32</code></td><td>The meta hash that was found upon construction.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="errextern"><a class="header" href="#errextern">ErrExtern</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrExtern.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="notanexterncontract"><a class="header" href="#notanexterncontract">NotAnExternContract</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrExtern.sol">Git Source</a></p>
<p>Thrown when the extern interface is not supported.</p>
<pre><code class="language-solidity">error NotAnExternContract(address extern);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="badinputs"><a class="header" href="#badinputs">BadInputs</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrExtern.sol">Git Source</a></p>
<p>Thrown by the extern contract at runtime when the inputs don't match the
expected inputs.</p>
<pre><code class="language-solidity">error BadInputs(uint256 expected, uint256 actual);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expected</code></td><td><code>uint256</code></td><td>The expected number of inputs.</td></tr>
<tr><td><code>actual</code></td><td><code>uint256</code></td><td>The actual number of inputs.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="erroplist"><a class="header" href="#erroplist">ErrOpList</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrOpList.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="baddynamiclength"><a class="header" href="#baddynamiclength">BadDynamicLength</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrOpList.sol">Git Source</a></p>
<p>Thrown when a dynamic length array is NOT 1 more than a fixed length array.
Should never happen outside a major breaking change to memory layouts.</p>
<pre><code class="language-solidity">error BadDynamicLength(uint256 dynamicLength, uint256 standardOpsLength);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="errparse"><a class="header" href="#errparse">ErrParse</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedoperand"><a class="header" href="#unexpectedoperand">UnexpectedOperand</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Thrown when parsing a source string and an operand opening <code>&lt;</code> paren is found
somewhere that we don't expect it or can't handle it.</p>
<pre><code class="language-solidity">error UnexpectedOperand();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedoperandvalue"><a class="header" href="#unexpectedoperandvalue">UnexpectedOperandValue</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Thrown when there are more operand values in the operand than the handler
is expecting.</p>
<pre><code class="language-solidity">error UnexpectedOperandValue();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expectedoperand"><a class="header" href="#expectedoperand">ExpectedOperand</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Thrown when parsing an operand and some required component of the operand is
not found in the source string.</p>
<pre><code class="language-solidity">error ExpectedOperand();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operandoverflow"><a class="header" href="#operandoverflow">OperandOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Thrown when parsing an operand and the literal in the source string is too
large to fit in the bits allocated for it in the operand.</p>
<pre><code class="language-solidity">error OperandOverflow();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operandvaluesoverflow"><a class="header" href="#operandvaluesoverflow">OperandValuesOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Thrown when the number of values encountered in a single operand parsing is
longer than the memory allocated to hold them.</p>
<pre><code class="language-solidity">error OperandValuesOverflow(uint256 offset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>offset</code></td><td><code>uint256</code></td><td>The offset in the source string where the error occurred.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unclosedoperand"><a class="header" href="#unclosedoperand">UnclosedOperand</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Thrown when parsing an operand and the closing <code>&gt;</code> paren is not found.</p>
<pre><code class="language-solidity">error UnclosedOperand(uint256 offset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>offset</code></td><td><code>uint256</code></td><td>The offset in the source string where the error occurred.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="unsupportedliteraltype"><a class="header" href="#unsupportedliteraltype">UnsupportedLiteralType</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser tried to bound an unsupported literal that we have no type for.</p>
<pre><code class="language-solidity">error UnsupportedLiteralType(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stringtoolong"><a class="header" href="#stringtoolong">StringTooLong</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a string literal that is larger than supported.</p>
<pre><code class="language-solidity">error StringTooLong(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unclosedstringliteral"><a class="header" href="#unclosedstringliteral">UnclosedStringLiteral</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a string that does not have a valid end, e.g. we found some char
that was not printable ASCII and had to stop.</p>
<pre><code class="language-solidity">error UnclosedStringLiteral(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hexliteraloverflow"><a class="header" href="#hexliteraloverflow">HexLiteralOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a literal that is larger than supported.</p>
<pre><code class="language-solidity">error HexLiteralOverflow(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zerolengthhexliteral"><a class="header" href="#zerolengthhexliteral">ZeroLengthHexLiteral</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a zero length hex literal.</p>
<pre><code class="language-solidity">error ZeroLengthHexLiteral(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="oddlengthhexliteral"><a class="header" href="#oddlengthhexliteral">OddLengthHexLiteral</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered an odd sized hex literal.</p>
<pre><code class="language-solidity">error OddLengthHexLiteral(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="malformedhexliteral"><a class="header" href="#malformedhexliteral">MalformedHexLiteral</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a hex literal with an invalid character.</p>
<pre><code class="language-solidity">error MalformedHexLiteral(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="decimalliteraloverflow"><a class="header" href="#decimalliteraloverflow">DecimalLiteralOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a decimal literal that is larger than supported.</p>
<pre><code class="language-solidity">error DecimalLiteralOverflow(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="malformedexponentdigits"><a class="header" href="#malformedexponentdigits">MalformedExponentDigits</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a decimal literal with an exponent that has too many or no
digits.</p>
<pre><code class="language-solidity">error MalformedExponentDigits(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="zerolengthdecimal"><a class="header" href="#zerolengthdecimal">ZeroLengthDecimal</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a zero length decimal literal.</p>
<pre><code class="language-solidity">error ZeroLengthDecimal(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="missingfinalsemi"><a class="header" href="#missingfinalsemi">MissingFinalSemi</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The expression does not finish with a semicolon (EOF).</p>
<pre><code class="language-solidity">error MissingFinalSemi(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedlhschar"><a class="header" href="#unexpectedlhschar">UnexpectedLHSChar</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Enountered an unexpected character on the LHS.</p>
<pre><code class="language-solidity">error UnexpectedLHSChar(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedrhschar"><a class="header" href="#unexpectedrhschar">UnexpectedRHSChar</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered an unexpected character on the RHS.</p>
<pre><code class="language-solidity">error UnexpectedRHSChar(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="expectedleftparen"><a class="header" href="#expectedleftparen">ExpectedLeftParen</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>More specific version of UnexpectedRHSChar where we specifically expected
a left paren but got some other char.</p>
<pre><code class="language-solidity">error ExpectedLeftParen(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedrightparen"><a class="header" href="#unexpectedrightparen">UnexpectedRightParen</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a right paren without a matching left paren.</p>
<pre><code class="language-solidity">error UnexpectedRightParen(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unclosedleftparen"><a class="header" href="#unclosedleftparen">UnclosedLeftParen</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered an unclosed left paren.</p>
<pre><code class="language-solidity">error UnclosedLeftParen(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unexpectedcomment"><a class="header" href="#unexpectedcomment">UnexpectedComment</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a comment outside the interstitial space between lines.</p>
<pre><code class="language-solidity">error UnexpectedComment(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unclosedcomment"><a class="header" href="#unclosedcomment">UnclosedComment</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a comment that never ends.</p>
<pre><code class="language-solidity">error UnclosedComment(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="malformedcommentstart"><a class="header" href="#malformedcommentstart">MalformedCommentStart</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a comment start sequence that is malformed.</p>
<pre><code class="language-solidity">error MalformedCommentStart(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="duplicatelhsitem"><a class="header" href="#duplicatelhsitem">DuplicateLHSItem</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p><em>Thrown when a stack name is duplicated. Shadowing in all forms is
disallowed in Rainlang.</em></p>
<pre><code class="language-solidity">error DuplicateLHSItem(uint256 errorOffset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="excesslhsitems"><a class="header" href="#excesslhsitems">ExcessLHSItems</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered too many LHS items.</p>
<pre><code class="language-solidity">error ExcessLHSItems(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="notacceptinginputs"><a class="header" href="#notacceptinginputs">NotAcceptingInputs</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered inputs where they can't be handled.</p>
<pre><code class="language-solidity">error NotAcceptingInputs(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="excessrhsitems"><a class="header" href="#excessrhsitems">ExcessRHSItems</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered too many RHS items.</p>
<pre><code class="language-solidity">error ExcessRHSItems(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wordsize"><a class="header" href="#wordsize">WordSize</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Encountered a word that is longer than 32 bytes.</p>
<pre><code class="language-solidity">error WordSize(string word);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="unknownword"><a class="header" href="#unknownword">UnknownWord</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>Parsed a word that is not in the meta.</p>
<pre><code class="language-solidity">error UnknownWord();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="maxsources"><a class="header" href="#maxsources">MaxSources</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser exceeded the maximum number of sources that it can build.</p>
<pre><code class="language-solidity">error MaxSources();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="danglingsource"><a class="header" href="#danglingsource">DanglingSource</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser encountered a dangling source. This is a bug in the parser.</p>
<pre><code class="language-solidity">error DanglingSource();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parseroutofbounds"><a class="header" href="#parseroutofbounds">ParserOutOfBounds</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser moved past the end of the data.</p>
<pre><code class="language-solidity">error ParserOutOfBounds();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parsestackoverflow"><a class="header" href="#parsestackoverflow">ParseStackOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser encountered a stack deeper than it can process in the memory
region allocated for stack names.</p>
<pre><code class="language-solidity">error ParseStackOverflow();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parsestackunderflow"><a class="header" href="#parsestackunderflow">ParseStackUnderflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser encountered a stack underflow.</p>
<pre><code class="language-solidity">error ParseStackUnderflow();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parenoverflow"><a class="header" href="#parenoverflow">ParenOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser encountered a paren group deeper than it can process in the
memory region allocated for paren tracking.</p>
<pre><code class="language-solidity">error ParenOverflow();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="nowhitespaceafterusingwordsfrom"><a class="header" href="#nowhitespaceafterusingwordsfrom">NoWhitespaceAfterUsingWordsFrom</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser did not find any whitespace after the pragma keyword.</p>
<pre><code class="language-solidity">error NoWhitespaceAfterUsingWordsFrom(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidaddresslength"><a class="header" href="#invalidaddresslength">InvalidAddressLength</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The parser encountered a hex literal that is the wrong size to be an address.</p>
<pre><code class="language-solidity">error InvalidAddressLength(uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="badsubparserresult"><a class="header" href="#badsubparserresult">BadSubParserResult</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrParse.sol">Git Source</a></p>
<p>The sub parser returned some bytecode that the main parser could not
understand.</p>
<pre><code class="language-solidity">error BadSubParserResult(bytes bytecode);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="incompatiblesubparser"><a class="header" href="#incompatiblesubparser">IncompatibleSubParser</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrSubParse.sol">Git Source</a></p>
<p><em>When a subparser is not compatible with the main parser it MUST error
on <code>subParse</code> calls rather than simply return false.</em></p>
<pre><code class="language-solidity">error IncompatibleSubParser();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="externdispatchconstantsheightoverflow"><a class="header" href="#externdispatchconstantsheightoverflow">ExternDispatchConstantsHeightOverflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/error/ErrSubParse.sol">Git Source</a></p>
<p><em>Thrown when a subparser is asked to build an extern dispatch when the
constants height is outside the range a single byte can represent.</em></p>
<pre><code class="language-solidity">error ExternDispatchConstantsHeightOverflow(uint256 constantsHeight);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-3"><a class="header" href="#contents-3">Contents</a></h1>
<ul>
<li><a href="src/interface//src/interface/deprecated">deprecated</a></li>
<li><a href="src/interface//src/interface/unstable">unstable</a></li>
<li><a href="src/interface/IInterpreterCallerV2.sol/struct.EvaluableConfigV3.html">EvaluableConfigV3</a></li>
<li><a href="src/interface/IInterpreterCallerV2.sol/struct.EvaluableV2.html">EvaluableV2</a></li>
<li><a href="src/interface/IInterpreterCallerV2.sol/struct.SignedContextV1.html">SignedContextV1</a></li>
<li><a href="src/interface/IInterpreterCallerV2.sol/interface.IInterpreterCallerV2.html">IInterpreterCallerV2</a></li>
<li><a href="src/interface/IInterpreterCallerV2.sol/constants.IInterpreterCallerV2.html">IInterpreterCallerV2 constants</a></li>
<li><a href="src/interface/IInterpreterStoreV1.sol/type.FullyQualifiedNamespace.html">FullyQualifiedNamespace</a></li>
<li><a href="src/interface/IInterpreterStoreV1.sol/interface.IInterpreterStoreV1.html">IInterpreterStoreV1</a></li>
<li><a href="src/interface/IInterpreterStoreV1.sol/constants.IInterpreterStoreV1.html">IInterpreterStoreV1 constants</a></li>
<li><a href="src/interface/IParserV1.sol/struct.AuthoringMeta.html">AuthoringMeta</a></li>
<li><a href="src/interface/IParserV1.sol/struct.AuthoringMetaV2.html">AuthoringMetaV2</a></li>
<li><a href="src/interface/IParserV1.sol/interface.IParserV1.html">IParserV1</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-4"><a class="header" href="#contents-4">Contents</a></h1>
<ul>
<li><a href="src/interface/deprecated/IDebugExpressionDeployerV1.sol/interface.IDebugExpressionDeployerV1.html">IDebugExpressionDeployerV1</a></li>
<li><a href="src/interface/deprecated/IDebugExpressionDeployerV2.sol/interface.IDebugExpressionDeployerV2.html">IDebugExpressionDeployerV2</a></li>
<li><a href="src/interface/deprecated/IDebugInterpreterV1.sol/interface.IDebugInterpreterV1.html">IDebugInterpreterV1</a></li>
<li><a href="src/interface/deprecated/IDebugInterpreterV2.sol/interface.IDebugInterpreterV2.html">IDebugInterpreterV2</a></li>
<li><a href="src/interface/deprecated/IExpressionDeployerV1.sol/interface.IExpressionDeployerV1.html">IExpressionDeployerV1</a></li>
<li><a href="src/interface/deprecated/IExpressionDeployerV1.sol/constants.IExpressionDeployerV1.html">IExpressionDeployerV1 constants</a></li>
<li><a href="src/interface/deprecated/IExpressionDeployerV2.sol/interface.IExpressionDeployerV2.html">IExpressionDeployerV2</a></li>
<li><a href="src/interface/deprecated/IExpressionDeployerV2.sol/constants.IExpressionDeployerV2.html">IExpressionDeployerV2 constants</a></li>
<li><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.EvaluableConfig.html">EvaluableConfig</a></li>
<li><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.EvaluableConfigV2.html">EvaluableConfigV2</a></li>
<li><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.Evaluable.html">Evaluable</a></li>
<li><a href="src/interface/deprecated/IInterpreterCallerV1.sol/struct.SignedContext.html">SignedContext</a></li>
<li><a href="src/interface/deprecated/IInterpreterCallerV1.sol/interface.IInterpreterCallerV1.html">IInterpreterCallerV1</a></li>
<li><a href="src/interface/deprecated/IInterpreterCallerV1.sol/constants.IInterpreterCallerV1.html">IInterpreterCallerV1 constants</a></li>
<li><a href="src/interface/deprecated/IInterpreterExternV1.sol/type.EncodedExternDispatch.html">EncodedExternDispatch</a></li>
<li><a href="src/interface/deprecated/IInterpreterExternV1.sol/type.ExternDispatch.html">ExternDispatch</a></li>
<li><a href="src/interface/deprecated/IInterpreterExternV1.sol/interface.IInterpreterExternV1.html">IInterpreterExternV1</a></li>
<li><a href="src/interface/deprecated/IInterpreterExternV2.sol/interface.IInterpreterExternV2.html">IInterpreterExternV2</a></li>
<li><a href="src/interface/deprecated/IInterpreterV1.sol/type.SourceIndex.html">SourceIndex</a></li>
<li><a href="src/interface/deprecated/IInterpreterV1.sol/type.EncodedDispatch.html">EncodedDispatch</a></li>
<li><a href="src/interface/deprecated/IInterpreterV1.sol/type.StateNamespace.html">StateNamespace</a></li>
<li><a href="src/interface/deprecated/IInterpreterV1.sol/type.Operand.html">Operand</a></li>
<li><a href="src/interface/deprecated/IInterpreterV1.sol/interface.IInterpreterV1.html">IInterpreterV1</a></li>
<li><a href="src/interface/deprecated/IInterpreterV1.sol/constants.IInterpreterV1.html">IInterpreterV1 constants</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="idebugexpressiondeployerv1"><a class="header" href="#idebugexpressiondeployerv1">IDebugExpressionDeployerV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IDebugExpressionDeployerV1.sol">Git Source</a></p>
<h2 id="functions-11"><a class="header" href="#functions-11">Functions</a></h2>
<h3 id="offchaindebugeval"><a class="header" href="#offchaindebugeval">offchainDebugEval</a></h3>
<pre><code class="language-solidity">function offchainDebugEval(
    bytes[] memory sources,
    uint256[] memory constants,
    FullyQualifiedNamespace namespace,
    uint256[][] memory context,
    SourceIndex sourceIndex,
    uint256[] memory initialStack,
    uint8 minOutputs
) external view returns (uint256[] memory finalStack, uint256[] memory kvs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="idebugexpressiondeployerv2"><a class="header" href="#idebugexpressiondeployerv2">IDebugExpressionDeployerV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IDebugExpressionDeployerV2.sol">Git Source</a></p>
<h2 id="functions-12"><a class="header" href="#functions-12">Functions</a></h2>
<h3 id="integritycheck"><a class="header" href="#integritycheck">integrityCheck</a></h3>
<p>Drives an integrity check of the provided bytecode and constants.
Unlike <code>IDebugExpressionDeployerV1</code> this version ONLY checks the
integrity of bytecode as produced by <code>IParserV1.parse</code>. There is an eval
debug method on <code>IDebugInterpreterV2</code> that can be used to check the
runtime outputs of bytecode that passes the integrity check.
Integrity check MUST revert with a descriptive error if the bytecode
fails the integrity check.</p>
<pre><code class="language-solidity">function integrityCheck(bytes calldata bytecode, uint256[] calldata constants, uint256[] calldata minOutputs)
    external
    view;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to check.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>The constants to check.</td></tr>
<tr><td><code>minOutputs</code></td><td><code>uint256[]</code></td><td>The minimum number of outputs expected from each of the sources. Only applies to sources that are entrypoints. Internal sources have their integrity checked implicitly by the use of opcodes such as <code>call</code> that have min/max outputs in their operand.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="idebuginterpreterv1"><a class="header" href="#idebuginterpreterv1">IDebugInterpreterV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IDebugInterpreterV1.sol">Git Source</a></p>
<h2 id="functions-13"><a class="header" href="#functions-13">Functions</a></h2>
<h3 id="offchaindebugeval-1"><a class="header" href="#offchaindebugeval-1">offchainDebugEval</a></h3>
<pre><code class="language-solidity">function offchainDebugEval(
    IInterpreterStoreV1 store,
    FullyQualifiedNamespace namespace,
    bytes[] calldata compiledSources,
    uint256[] calldata constants,
    uint256[][] calldata context,
    uint256[] calldata initialStack,
    SourceIndex sourceIndex_
) external view returns (uint256[] calldata finalStack, uint256[] calldata kvs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="idebuginterpreterv2"><a class="header" href="#idebuginterpreterv2">IDebugInterpreterV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IDebugInterpreterV2.sol">Git Source</a></p>
<h2 id="functions-14"><a class="header" href="#functions-14">Functions</a></h2>
<h3 id="offchaindebugeval-2"><a class="header" href="#offchaindebugeval-2">offchainDebugEval</a></h3>
<p>A more explicit/open version of <code>eval</code> that is designed for offchain
debugging. It MUST function identically to <code>eval</code> so implementations
MAY call it directly internally for <code>eval</code> to ensure consistency at the
expense of a small amount of gas.
The affordances made for debugging are:</p>
<ul>
<li>A fully qualified namespace is passed in. This allows for storage reads
from the perspective of an arbitrary caller during <code>eval</code>. Note that it
does not allow for arbitrary writes, which are still gated by the store
contract itself, so this is safe to expose.</li>
<li>The bytecode is passed in directly. This allows for debugging of
bytecode that has not been deployed to the chain yet.</li>
<li>The components of the encoded dispatch other than the onchain
expression address are passed separately. This remove the need to
provide an address at all.</li>
<li>Inputs to the entrypoint stack are passed in directly. This allows for
debugging/simulating logic that could normally only be accessed via.
some internal dispatch with a mid-flight state creating inputs for the
internal call.</li>
</ul>
<pre><code class="language-solidity">function offchainDebugEval(
    IInterpreterStoreV1 store,
    FullyQualifiedNamespace namespace,
    bytes calldata expressionData,
    SourceIndex sourceIndex,
    uint256 maxOutputs,
    uint256[][] calldata context,
    uint256[] calldata inputs
) external view returns (uint256[] calldata finalStack, uint256[] calldata writes);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iexpressiondeployerv1"><a class="header" href="#iexpressiondeployerv1">IExpressionDeployerV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IExpressionDeployerV1.sol">Git Source</a></p>
<p>Companion to <code>IInterpreterV1</code> responsible for onchain static code
analysis and deploying expressions. Each <code>IExpressionDeployerV1</code> is tightly
coupled at the bytecode level to some interpreter that it knows how to
analyse and deploy expressions for. The expression deployer can perform an
integrity check &quot;dry run&quot; of candidate source code for the intepreter. The
critical analysis/transformation includes:</p>
<ul>
<li>Enforcement of no out of bounds memory reads/writes</li>
<li>Calculation of memory required to eval the stack with a single allocation</li>
<li>Replacing index based opcodes with absolute interpreter function pointers</li>
<li>Enforcement that all opcodes and operands used exist and are valid
This analysis is highly sensitive to the specific implementation and position
of all opcodes and function pointers as compiled into the interpreter. This
is what makes the coupling between an interpreter and expression deployer
so tight. Ideally all responsibilities would be handled by a single contract
but this introduces code size issues quickly by roughly doubling the compiled
logic of each opcode (half for the integrity check and half for evaluation).
Interpreters MUST assume that expression deployers are malicious and fail
gracefully if the integrity check is corrupt/bypassed and/or function
pointers are incorrect, etc. i.e. the interpreter MUST always return a stack
from <code>eval</code> in a read only way or error. I.e. it is the expression deployer's
responsibility to do everything it can to prevent undefined behaviour in the
interpreter, and the interpreter's responsibility to handle the expression
deployer completely failing to do so.</li>
</ul>
<h2 id="functions-15"><a class="header" href="#functions-15">Functions</a></h2>
<h3 id="deployexpression"><a class="header" href="#deployexpression">deployExpression</a></h3>
<p>Expressions are expected to be deployed onchain as immutable contract
code with a first class address like any other contract or account.
Technically this is optional in the sense that all the tools required to
eval some expression and define all its opcodes are available as
libraries.
In practise there are enough advantages to deploying the sources directly
onchain as contract data and loading them from the interpreter at eval:</p>
<ul>
<li>Loading and storing binary data is gas efficient as immutable contract
data</li>
<li>Expressions need to be immutable between their deploy time integrity
check and runtime evaluation</li>
<li>Passing the address of an expression through calldata to an interpreter
is cheaper than passing an entire expression through calldata</li>
<li>Conceptually a very simple approach, even if implementations like
SSTORE2 are subtle under the hood
The expression deployer MUST perform an integrity check of the source
code before it puts the expression onchain at a known address. The
integrity check MUST at a minimum (it is free to do additional static
analysis) calculate the memory required to be allocated for the stack in
total, and that no out of bounds memory reads/writes occur within this
stack. A simple example of an invalid source would be one that pushes one
value to the stack then attempts to pops two values, clearly we cannot
remove more values than we added. The <code>IExpressionDeployerV1</code> MUST revert
in the case of any integrity failure, all integrity checks MUST pass in
order for the deployment to complete.
Once the integrity check is complete the <code>IExpressionDeployerV1</code> MUST do
any additional processing required by its paired interpreter.
For example, the <code>IExpressionDeployerV1</code> MAY NEED to replace the indexed
opcodes in the <code>ExpressionConfig</code> sources with real function pointers
from the corresponding interpreter.</li>
</ul>
<pre><code class="language-solidity">function deployExpression(bytes[] memory sources, uint256[] memory constants, uint256[] memory minOutputs)
    external
    returns (IInterpreterV1 interpreter, IInterpreterStoreV1 store, address expression);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sources</code></td><td><code>bytes[]</code></td><td>Sources verbatim. These sources MUST be provided in their sequential/index opcode form as the deployment process will need to index into BOTH the integrity check and the final runtime function pointers. This will be emitted in an event for offchain processing to use the indexed opcode sources. The first N sources are considered entrypoints and will be integrity checked by the expression deployer against a starting stack height of 0. Non-entrypoint sources MAY be provided for internal use such as the <code>call</code> opcode but will NOT be integrity checked UNLESS entered by an opcode in an entrypoint.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Constants verbatim. Constants are provided alongside sources rather than inline as it allows us to avoid variable length opcodes and can be more memory efficient if the same constant is referenced several times from the sources.</td></tr>
<tr><td><code>minOutputs</code></td><td><code>uint256[]</code></td><td>The first N sources on the state config are entrypoints to the expression where N is the length of the <code>minOutputs</code> array. Each item in the <code>minOutputs</code> array specifies the number of outputs that MUST be present on the final stack for an evaluation of each entrypoint. The minimum output for some entrypoint MAY be zero if the expectation is that the expression only applies checks and error logic. Non-entrypoint sources MUST NOT have a minimum outputs length specified.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interpreter</code></td><td><code>IInterpreterV1</code></td><td>The interpreter the deployer believes it is qualified to perform integrity checks on behalf of.</td></tr>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>The interpreter store the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>expression</code></td><td><code>address</code></td><td>The address of the deployed onchain expression. MUST be valid according to all integrity checks the deployer is aware of.</td></tr>
</tbody></table>
</div>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<h3 id="dispair"><a class="header" href="#dispair">DISpair</a></h3>
<p>This is the literal InterpreterOpMeta bytes to be used offchain to make
sense of the opcodes in this interpreter deployment, as a human. For
formats like json that make heavy use of boilerplate, repetition and
whitespace, some kind of compression is recommended.</p>
<pre><code class="language-solidity">event DISpair(address sender, address deployer, address interpreter, address store, bytes opMeta);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>The <code>msg.sender</code> providing the op meta.</td></tr>
<tr><td><code>deployer</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>interpreter</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>store</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>opMeta</code></td><td><code>bytes</code></td><td>The raw binary data of the op meta. Maybe compressed data etc. and is intended for offchain consumption.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-7"><a class="header" href="#constants-7">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IExpressionDeployerV1.sol">Git Source</a></p>
<h3 id="ierc1820_name_iexpression_deployer_v1"><a class="header" href="#ierc1820_name_iexpression_deployer_v1">IERC1820_NAME_IEXPRESSION_DEPLOYER_V1</a></h3>
<pre><code class="language-solidity">string constant IERC1820_NAME_IEXPRESSION_DEPLOYER_V1 = &quot;IExpressionDeployerV1&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iexpressiondeployerv2"><a class="header" href="#iexpressiondeployerv2">IExpressionDeployerV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IExpressionDeployerV2.sol">Git Source</a></p>
<p>Companion to <code>IInterpreterV1</code> responsible for onchain static code
analysis and deploying expressions. Each <code>IExpressionDeployerV2</code> is tightly
coupled at the bytecode level to some interpreter that it knows how to
analyse and deploy expressions for. The expression deployer can perform an
integrity check &quot;dry run&quot; of candidate source code for the intepreter. The
critical analysis/transformation includes:</p>
<ul>
<li>Enforcement of no out of bounds memory reads/writes</li>
<li>Calculation of memory required to eval the stack with a single allocation</li>
<li>Replacing index based opcodes with absolute interpreter function pointers</li>
<li>Enforcement that all opcodes and operands used exist and are valid
This analysis is highly sensitive to the specific implementation and position
of all opcodes and function pointers as compiled into the interpreter. This
is what makes the coupling between an interpreter and expression deployer
so tight. Ideally all responsibilities would be handled by a single contract
but this introduces code size issues quickly by roughly doubling the compiled
logic of each opcode (half for the integrity check and half for evaluation).
Interpreters MUST assume that expression deployers are malicious and fail
gracefully if the integrity check is corrupt/bypassed and/or function
pointers are incorrect, etc. i.e. the interpreter MUST always return a stack
from <code>eval</code> in a read only way or error. I.e. it is the expression deployer's
responsibility to do everything it can to prevent undefined behaviour in the
interpreter, and the interpreter's responsibility to handle the expression
deployer completely failing to do so.</li>
</ul>
<h2 id="functions-16"><a class="header" href="#functions-16">Functions</a></h2>
<h3 id="deployexpression-1"><a class="header" href="#deployexpression-1">deployExpression</a></h3>
<p>Expressions are expected to be deployed onchain as immutable contract
code with a first class address like any other contract or account.
Technically this is optional in the sense that all the tools required to
eval some expression and define all its opcodes are available as
libraries.
In practise there are enough advantages to deploying the sources directly
onchain as contract data and loading them from the interpreter at eval:</p>
<ul>
<li>Loading and storing binary data is gas efficient as immutable contract
data</li>
<li>Expressions need to be immutable between their deploy time integrity
check and runtime evaluation</li>
<li>Passing the address of an expression through calldata to an interpreter
is cheaper than passing an entire expression through calldata</li>
<li>Conceptually a very simple approach, even if implementations like
SSTORE2 are subtle under the hood
The expression deployer MUST perform an integrity check of the source
code before it puts the expression onchain at a known address. The
integrity check MUST at a minimum (it is free to do additional static
analysis) calculate the memory required to be allocated for the stack in
total, and that no out of bounds memory reads/writes occur within this
stack. A simple example of an invalid source would be one that pushes one
value to the stack then attempts to pops two values, clearly we cannot
remove more values than we added. The <code>IExpressionDeployerV2</code> MUST revert
in the case of any integrity failure, all integrity checks MUST pass in
order for the deployment to complete.
Once the integrity check is complete the <code>IExpressionDeployerV2</code> MUST do
any additional processing required by its paired interpreter.
For example, the <code>IExpressionDeployerV2</code> MAY NEED to replace the indexed
opcodes in the <code>ExpressionConfig</code> sources with real function pointers
from the corresponding interpreter.</li>
</ul>
<pre><code class="language-solidity">function deployExpression(bytes calldata bytecode, uint256[] calldata constants, uint256[] calldata minOutputs)
    external
    returns (IInterpreterV1 interpreter, IInterpreterStoreV1 store, address expression);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>Bytecode verbatim. Exactly how the bytecode is structured is up to the deployer and interpreter. The deployer MUST NOT modify the bytecode in any way. The interpreter MUST NOT assume anything about the bytecode other than that it is valid according to the interpreter's integrity checks. It is assumed that the bytecode will be produced from a human friendly string via. <code>IParserV1.parse</code> but this is not required if the caller has some other means to prooduce valid bytecode.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Constants verbatim. Constants are provided alongside sources rather than inline as it allows us to avoid variable length opcodes and can be more memory efficient if the same constant is referenced several times from the sources.</td></tr>
<tr><td><code>minOutputs</code></td><td><code>uint256[]</code></td><td>The first N sources on the state config are entrypoints to the expression where N is the length of the <code>minOutputs</code> array. Each item in the <code>minOutputs</code> array specifies the number of outputs that MUST be present on the final stack for an evaluation of each entrypoint. The minimum output for some entrypoint MAY be zero if the expectation is that the expression only applies checks and error logic. Non-entrypoint sources MUST NOT have a minimum outputs length specified.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interpreter</code></td><td><code>IInterpreterV1</code></td><td>The interpreter the deployer believes it is qualified to perform integrity checks on behalf of.</td></tr>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>The interpreter store the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>expression</code></td><td><code>address</code></td><td>The address of the deployed onchain expression. MUST be valid according to all integrity checks the deployer is aware of.</td></tr>
</tbody></table>
</div>
<h2 id="events-1"><a class="header" href="#events-1">Events</a></h2>
<h3 id="dispair-1"><a class="header" href="#dispair-1">DISpair</a></h3>
<p>This is the literal InterpreterOpMeta bytes to be used offchain to make
sense of the opcodes in this interpreter deployment, as a human. For
formats like json that make heavy use of boilerplate, repetition and
whitespace, some kind of compression is recommended.</p>
<pre><code class="language-solidity">event DISpair(address sender, address deployer, address interpreter, address store, bytes meta);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>The <code>msg.sender</code> providing the op meta.</td></tr>
<tr><td><code>deployer</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>interpreter</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>store</code></td><td><code>address</code></td><td></td></tr>
<tr><td><code>meta</code></td><td><code>bytes</code></td><td>The raw binary data of the construction meta. Maybe compressed data etc. and is intended for offchain consumption.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-8"><a class="header" href="#constants-8">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IExpressionDeployerV2.sol">Git Source</a></p>
<h3 id="ierc1820_name_iexpression_deployer_v2"><a class="header" href="#ierc1820_name_iexpression_deployer_v2">IERC1820_NAME_IEXPRESSION_DEPLOYER_V2</a></h3>
<pre><code class="language-solidity">string constant IERC1820_NAME_IEXPRESSION_DEPLOYER_V2 = &quot;IExpressionDeployerV2&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="evaluableconfig"><a class="header" href="#evaluableconfig">EvaluableConfig</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterCallerV1.sol">Git Source</a></p>
<p>Standard struct that can be embedded in ABIs in a consistent format for
tooling to read/write. MAY be useful to bundle up the data required to call
<code>IExpressionDeployerV1</code> but is NOT mandatory.</p>
<pre><code class="language-solidity">struct EvaluableConfig {
    IExpressionDeployerV1 deployer;
    bytes[] sources;
    uint256[] constants;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deployer</code></td><td><code>IExpressionDeployerV1</code></td><td>Will deploy the expression from sources and constants.</td></tr>
<tr><td><code>sources</code></td><td><code>bytes[]</code></td><td>Will be deployed to an expression address for use in <code>Evaluable</code>.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Will be available to the expression at runtime.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="evaluableconfigv2"><a class="header" href="#evaluableconfigv2">EvaluableConfigV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterCallerV1.sol">Git Source</a></p>
<p>Standard struct that can be embedded in ABIs in a consistent format for
tooling to read/write. MAY be useful to bundle up the data required to call
<code>IExpressionDeployerV2</code> but is NOT mandatory.</p>
<pre><code class="language-solidity">struct EvaluableConfigV2 {
    IExpressionDeployerV2 deployer;
    bytes bytecode;
    uint256[] constants;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deployer</code></td><td><code>IExpressionDeployerV2</code></td><td>Will deploy the expression from sources and constants.</td></tr>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>Will be deployed to an expression address for use in <code>Evaluable</code>.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Will be available to the expression at runtime.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="evaluable"><a class="header" href="#evaluable">Evaluable</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterCallerV1.sol">Git Source</a></p>
<p>Struct over the return of <code>IExpressionDeployerV1.deployExpression</code>
which MAY be more convenient to work with than raw addresses.</p>
<pre><code class="language-solidity">struct Evaluable {
    IInterpreterV1 interpreter;
    IInterpreterStoreV1 store;
    address expression;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interpreter</code></td><td><code>IInterpreterV1</code></td><td>Will evaluate the expression.</td></tr>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>Will store state changes due to evaluation of the expression.</td></tr>
<tr><td><code>expression</code></td><td><code>address</code></td><td>Will be evaluated by the interpreter.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="signedcontext"><a class="header" href="#signedcontext">SignedContext</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterCallerV1.sol">Git Source</a></p>
<p>Typed embodiment of some context data with associated signer and signature.
The signature MUST be over the packed encoded bytes of the context array,
i.e. the context array concatenated as bytes without the length prefix, then
hashed, then handled as per EIP-191 to produce a final hash to be signed.
The calling contract (likely with the help of <code>LibContext</code>) is responsible
for ensuring the authenticity of the signature, but not authorizing <em>who</em> can
sign. IN ADDITION to authorisation of the signer to known-good entities the
expression is also responsible for:</p>
<ul>
<li>Enforcing the context is the expected data (e.g. with a domain separator)</li>
<li>Tracking and enforcing nonces if signed contexts are only usable one time</li>
<li>Tracking and enforcing uniqueness of signed data if relevant</li>
<li>Checking and enforcing expiry times if present and relevant in the context</li>
<li>Many other potential constraints that expressions may want to enforce
EIP-1271 smart contract signatures are supported in addition to EOA
signatures via. the Open Zeppelin <code>SignatureChecker</code> library, which is
wrapped by <code>LibContext.build</code>. As smart contract signatures are checked
onchain they CAN BE REVOKED AT ANY MOMENT as the smart contract can simply
return <code>false</code> when it previously returned <code>true</code>.</li>
</ul>
<pre><code class="language-solidity">struct SignedContext {
    address signer;
    bytes signature;
    uint256[] context;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>The account that produced the signature for <code>context</code>. The calling contract MUST authenticate that the signer produced the signature.</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The cryptographic signature for <code>context</code>. The calling contract MUST authenticate that the signature is valid for the <code>signer</code> and <code>context</code>.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[]</code></td><td>The signed data in a format that can be merged into a 2-dimensional context matrix as-is.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpretercallerv1"><a class="header" href="#iinterpretercallerv1">IInterpreterCallerV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterCallerV1.sol">Git Source</a></p>
<p>A contract that calls an <code>IInterpreterV1</code> via. <code>eval</code>. There are near
zero requirements on a caller other than:</p>
<ul>
<li>Emit some meta about itself upon construction so humans know what the
contract does</li>
<li>Provide the context, which can be built in a standard way by <code>LibContext</code></li>
<li>Handle the stack array returned from <code>eval</code></li>
<li>OPTIONALLY emit the <code>Context</code> event</li>
<li>OPTIONALLY set state on the <code>IInterpreterStoreV1</code> returned from eval.</li>
</ul>
<h2 id="events-2"><a class="header" href="#events-2">Events</a></h2>
<h3 id="context"><a class="header" href="#context">Context</a></h3>
<p>Calling contracts SHOULD emit <code>Context</code> before calling <code>eval</code> if they
are able. Notably <code>eval</code> MAY be called within a static call which means
that events cannot be emitted, in which case this does not apply. It MAY
NOT be useful to emit this multiple times for several eval calls if they
all share a common context, in which case a single emit is sufficient.</p>
<pre><code class="language-solidity">event Context(address sender, uint256[][] context);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td><code>msg.sender</code> building the context.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[][]</code></td><td>The context that was built.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-9"><a class="header" href="#constants-9">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterCallerV1.sol">Git Source</a></p>
<h3 id="signed_context_signer_offset"><a class="header" href="#signed_context_signer_offset">SIGNED_CONTEXT_SIGNER_OFFSET</a></h3>
<pre><code class="language-solidity">uint256 constant SIGNED_CONTEXT_SIGNER_OFFSET = 0;
</code></pre>
<h3 id="signed_context_context_offset"><a class="header" href="#signed_context_context_offset">SIGNED_CONTEXT_CONTEXT_OFFSET</a></h3>
<pre><code class="language-solidity">uint256 constant SIGNED_CONTEXT_CONTEXT_OFFSET = 0x20;
</code></pre>
<h3 id="signed_context_signature_offset"><a class="header" href="#signed_context_signature_offset">SIGNED_CONTEXT_SIGNATURE_OFFSET</a></h3>
<pre><code class="language-solidity">uint256 constant SIGNED_CONTEXT_SIGNATURE_OFFSET = 0x40;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="encodedexterndispatch"><a class="header" href="#encodedexterndispatch">EncodedExternDispatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterExternV1.sol">Git Source</a></p>
<pre><code class="language-solidity">type EncodedExternDispatch is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="externdispatch"><a class="header" href="#externdispatch">ExternDispatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterExternV1.sol">Git Source</a></p>
<pre><code class="language-solidity">type ExternDispatch is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterexternv1"><a class="header" href="#iinterpreterexternv1">IInterpreterExternV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterExternV1.sol">Git Source</a></p>
<h2 id="functions-17"><a class="header" href="#functions-17">Functions</a></h2>
<h3 id="extern-1"><a class="header" href="#extern-1">extern</a></h3>
<p>Handles a single dispatch.</p>
<pre><code class="language-solidity">function extern(ExternDispatch dispatch, uint256[] memory inputs) external view returns (uint256[] memory outputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatch</code></td><td><code>ExternDispatch</code></td><td>Encoded information about the extern to dispatch. Analogous to the opcode/operand in the interpreter.</td></tr>
<tr><td><code>inputs</code></td><td><code>uint256[]</code></td><td>The array of inputs for the dispatched logic.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>outputs</code></td><td><code>uint256[]</code></td><td>The result of the dispatched logic.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterexternv2"><a class="header" href="#iinterpreterexternv2">IInterpreterExternV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterExternV2.sol">Git Source</a></p>
<h2 id="functions-18"><a class="header" href="#functions-18">Functions</a></h2>
<h3 id="extern-2"><a class="header" href="#extern-2">extern</a></h3>
<p>Handles a single dispatch.</p>
<pre><code class="language-solidity">function extern(ExternDispatch dispatch, uint256[] calldata inputs)
    external
    view
    returns (uint256[] calldata outputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatch</code></td><td><code>ExternDispatch</code></td><td>Encoded information about the extern to dispatch. Analogous to the opcode/operand in the interpreter.</td></tr>
<tr><td><code>inputs</code></td><td><code>uint256[]</code></td><td>The array of inputs for the dispatched logic.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>outputs</code></td><td><code>uint256[]</code></td><td>The result of the dispatched logic.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="sourceindex"><a class="header" href="#sourceindex">SourceIndex</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterV1.sol">Git Source</a></p>
<p><em>The index of a source within a deployed expression that can be evaluated
by an <code>IInterpreterV1</code>. MAY be an entrypoint or the index of a source called
internally such as by the <code>call</code> opcode.</em></p>
<pre><code class="language-solidity">type SourceIndex is uint16;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="encodeddispatch"><a class="header" href="#encodeddispatch">EncodedDispatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterV1.sol">Git Source</a></p>
<p><em>Encoded information about a specific evaluation including the expression
address onchain, entrypoint and expected return values.</em></p>
<pre><code class="language-solidity">type EncodedDispatch is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="statenamespace"><a class="header" href="#statenamespace">StateNamespace</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterV1.sol">Git Source</a></p>
<p><em>The namespace for state changes as requested by the calling contract.
The interpreter MUST apply this namespace IN ADDITION to namespacing by
caller etc.</em></p>
<pre><code class="language-solidity">type StateNamespace is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="operand"><a class="header" href="#operand">Operand</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterV1.sol">Git Source</a></p>
<p><em>Additional bytes that can be used to configure a single opcode dispatch.
Commonly used to specify the number of inputs to a variadic function such
as addition or multiplication.</em></p>
<pre><code class="language-solidity">type Operand is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterv1"><a class="header" href="#iinterpreterv1">IInterpreterV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterV1.sol">Git Source</a></p>
<h2 id="functions-19"><a class="header" href="#functions-19">Functions</a></h2>
<h3 id="functionpointers-1"><a class="header" href="#functionpointers-1">functionPointers</a></h3>
<p>Exposes the function pointers as <code>uint16</code> values packed into a single
<code>bytes</code> in the same order as they would be indexed into by opcodes. For
example, if opcode <code>2</code> should dispatch function at position <code>0x1234</code> then
the start of the returned bytes would be <code>0xXXXXXXXX1234</code> where <code>X</code> is
a placeholder for the function pointers of opcodes <code>0</code> and <code>1</code>.
<code>IExpressionDeployerV1</code> contracts use these function pointers to
&quot;compile&quot; the expression into something that an interpreter can dispatch
directly without paying gas to lookup the same at runtime. As the
validity of any integrity check and subsequent dispatch is highly
sensitive to both the function pointers and overall bytecode of the
interpreter, <code>IExpressionDeployerV1</code> contracts SHOULD implement guards
against accidentally being deployed onchain paired against an unknown
interpreter. It is very easy for an apparent compatible pairing to be
subtly and critically incompatible due to addition/removal/reordering of
opcodes and compiler optimisations on the interpreter bytecode.
This MAY return different values during construction vs. all other times
after the interpreter has been successfully deployed onchain. DO NOT rely
on function pointers reported during contract construction.</p>
<pre><code class="language-solidity">function functionPointers() external view returns (bytes memory);
</code></pre>
<h3 id="eval"><a class="header" href="#eval">eval</a></h3>
<p>The raison d'etre for an interpreter. Given some expression and per-call
additional contextual data, produce a stack of results and a set of state
changes that the caller MAY OPTIONALLY pass back to be persisted by a
call to <code>IInterpreterStoreV1.set</code>.</p>
<pre><code class="language-solidity">function eval(
    IInterpreterStoreV1 store,
    StateNamespace namespace,
    EncodedDispatch dispatch,
    uint256[][] calldata context
) external view returns (uint256[] memory stack, uint256[] memory kvs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>The storage contract that the returned key/value pairs MUST be passed to IF the calling contract is in a non-static calling context. Static calling contexts MUST pass <code>address(0)</code>.</td></tr>
<tr><td><code>namespace</code></td><td><code>StateNamespace</code></td><td>The state namespace that will be fully qualified by the interpreter at runtime in order to perform gets on the underlying store. MUST be the same namespace passed to the store by the calling contract when sending the resulting key/value items to storage.</td></tr>
<tr><td><code>dispatch</code></td><td><code>EncodedDispatch</code></td><td>All the information required for the interpreter to load an expression, select an entrypoint and return the values expected by the caller. The interpreter MAY encode dispatches differently to <code>LibEncodedDispatch</code> but this WILL negatively impact compatibility for calling contracts that hardcode the encoding logic.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[][]</code></td><td>A 2-dimensional array of data that can be indexed into at runtime by the interpreter. The calling contract is responsible for ensuring the authenticity and completeness of context data. The interpreter MUST revert at runtime if an expression attempts to index into some context value that is not provided by the caller. This implies that context reads cannot be checked for out of bounds reads at deploy time, as the runtime context MAY be provided in a different shape to what the expression is expecting. Same as <code>eval</code> but allowing the caller to specify a namespace under which the state changes will be applied. The interpeter MUST ensure that keys will never collide across namespaces, even if, for example: - The calling contract is malicious and attempts to craft a collision with state changes from another contract - The expression is malicious and attempts to craft a collision with other expressions evaluated by the same calling contract A malicious entity MAY have access to significant offchain resources to attempt to precompute key collisions through brute force. The collision resistance of namespaces should be comparable or equivalent to the collision resistance of the hashing algorithms employed by the blockchain itself, such as the design of <code>mapping</code> in Solidity that hashes each nested key to produce a collision resistant compound key.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stack</code></td><td><code>uint256[]</code></td><td>The list of values produced by evaluating the expression. MUST NOT be longer than the maximum length specified by <code>dispatch</code>, if applicable.</td></tr>
<tr><td><code>kvs</code></td><td><code>uint256[]</code></td><td>A list of pairwise key/value items to be saved in the store.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-10"><a class="header" href="#constants-10">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/deprecated/IInterpreterV1.sol">Git Source</a></p>
<h3 id="default_state_namespace"><a class="header" href="#default_state_namespace">DEFAULT_STATE_NAMESPACE</a></h3>
<p><em>The default state namespace MUST be used when a calling contract has no
particular opinion on or need for dynamic namespaces.</em></p>
<pre><code class="language-solidity">StateNamespace constant DEFAULT_STATE_NAMESPACE = StateNamespace.wrap(0);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-5"><a class="header" href="#contents-5">Contents</a></h1>
<ul>
<li><a href="src/interface/unstable/IExpressionDeployerV3.sol/interface.IExpressionDeployerV3.html">IExpressionDeployerV3</a></li>
<li><a href="src/interface/unstable/IExpressionDeployerV3.sol/constants.IExpressionDeployerV3.html">IExpressionDeployerV3 constants</a></li>
<li><a href="src/interface/unstable/IInterpreterExternV3.sol/interface.IInterpreterExternV3.html">IInterpreterExternV3</a></li>
<li><a href="src/interface/unstable/IInterpreterStoreV2.sol/interface.IInterpreterStoreV2.html">IInterpreterStoreV2</a></li>
<li><a href="src/interface/unstable/IInterpreterV2.sol/type.SourceIndexV2.html">SourceIndexV2</a></li>
<li><a href="src/interface/unstable/IInterpreterV2.sol/interface.IInterpreterV2.html">IInterpreterV2</a></li>
<li><a href="src/interface/unstable/IInterpreterV2.sol/constants.IInterpreterV2.html">IInterpreterV2 constants</a></li>
<li><a href="src/interface/unstable/ISubParserV1.sol/interface.ISubParserV1.html">ISubParserV1</a></li>
<li><a href="src/interface/unstable/ISubParserV1.sol/constants.ISubParserV1.html">ISubParserV1 constants</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iexpressiondeployerv3"><a class="header" href="#iexpressiondeployerv3">IExpressionDeployerV3</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IExpressionDeployerV3.sol">Git Source</a></p>
<p>Companion to <code>IInterpreterV2</code> responsible for onchain static code
analysis and deploying expressions. Each <code>IExpressionDeployerV3</code> is tightly
coupled at the bytecode level to some interpreter that it knows how to
analyse and deploy expressions for. The expression deployer can perform an
integrity check &quot;dry run&quot; of candidate source code for the intepreter. The
critical analysis/transformation includes:</p>
<ul>
<li>Enforcement of no out of bounds memory reads/writes</li>
<li>Calculation of memory required to eval the stack with a single allocation</li>
<li>Replacing index based opcodes with absolute interpreter function pointers</li>
<li>Enforcement that all opcodes and operands used exist and are valid
This analysis is highly sensitive to the specific implementation and position
of all opcodes and function pointers as compiled into the interpreter. This
is what makes the coupling between an interpreter and expression deployer
so tight. Ideally all responsibilities would be handled by a single contract
but this introduces code size issues quickly by roughly doubling the compiled
logic of each opcode (half for the integrity check and half for evaluation).
Interpreters MUST assume that expression deployers are malicious and fail
gracefully if the integrity check is corrupt/bypassed and/or function
pointers are incorrect, etc. i.e. the interpreter MUST always return a stack
from <code>eval</code> in a read only way or error. I.e. it is the expression deployer's
responsibility to do everything it can to prevent undefined behaviour in the
interpreter, and the interpreter's responsibility to handle the expression
deployer completely failing to do so.</li>
</ul>
<h2 id="functions-20"><a class="header" href="#functions-20">Functions</a></h2>
<h3 id="deployexpression2-1"><a class="header" href="#deployexpression2-1">deployExpression2</a></h3>
<p>Expressions are expected to be deployed onchain as immutable contract
code with a first class address like any other contract or account.
Technically this is optional in the sense that all the tools required to
eval some expression and define all its opcodes are available as
libraries.
In practise there are enough advantages to deploying the sources directly
onchain as contract data and loading them from the interpreter at eval:</p>
<ul>
<li>Loading and storing binary data is gas efficient as immutable contract
data</li>
<li>Expressions need to be immutable between their deploy time integrity
check and runtime evaluation</li>
<li>Passing the address of an expression through calldata to an interpreter
is cheaper than passing an entire expression through calldata</li>
<li>Conceptually a very simple approach, even if implementations like
SSTORE2 are subtle under the hood
The expression deployer MUST perform an integrity check of the source
code before it puts the expression onchain at a known address. The
integrity check MUST at a minimum (it is free to do additional static
analysis) calculate the memory required to be allocated for the stack in
total, and that no out of bounds memory reads/writes occur within this
stack. A simple example of an invalid source would be one that pushes one
value to the stack then attempts to pops two values, clearly we cannot
remove more values than we added. The <code>IExpressionDeployerV3</code> MUST revert
in the case of any integrity failure, all integrity checks MUST pass in
order for the deployment to complete.
Once the integrity check is complete the <code>IExpressionDeployerV3</code> MUST do
any additional processing required by its paired interpreter.
For example, the <code>IExpressionDeployerV3</code> MAY NEED to replace the indexed
opcodes in the <code>ExpressionConfig</code> sources with real function pointers
from the corresponding interpreter.
The caller MUST check the <code>io</code> returned by this function to determine
the number of inputs and outputs for each source are within the bounds
of the caller's expectations.</li>
</ul>
<pre><code class="language-solidity">function deployExpression2(bytes calldata bytecode, uint256[] calldata constants)
    external
    returns (IInterpreterV2 interpreter, IInterpreterStoreV1 store, address expression, bytes calldata io);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>Bytecode verbatim. Exactly how the bytecode is structured is up to the deployer and interpreter. The deployer MUST NOT modify the bytecode in any way. The interpreter MUST NOT assume anything about the bytecode other than that it is valid according to the interpreter's integrity checks. It is assumed that the bytecode will be produced from a human friendly string via. <code>IParserV1.parse</code> but this is not required if the caller has some other means to prooduce valid bytecode.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Constants verbatim. Constants are provided alongside sources rather than inline as it allows us to avoid variable length opcodes and can be more memory efficient if the same constant is referenced several times from the sources.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interpreter</code></td><td><code>IInterpreterV2</code></td><td>The interpreter the deployer believes it is qualified to perform integrity checks on behalf of.</td></tr>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>The interpreter store the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>expression</code></td><td><code>address</code></td><td>The address of the deployed onchain expression. MUST be valid according to all integrity checks the deployer is aware of.</td></tr>
<tr><td><code>io</code></td><td><code>bytes</code></td><td>Binary data where each 2 bytes input and output counts for each source of the bytecode. MAY simply be copied verbatim from the relevant bytes in the bytecode if they exist and integrity checks guarantee that the bytecode is valid.</td></tr>
</tbody></table>
</div>
<h2 id="events-3"><a class="header" href="#events-3">Events</a></h2>
<h3 id="newexpression"><a class="header" href="#newexpression">NewExpression</a></h3>
<p>The config of the deployed expression including uncompiled sources. MUST
be emitted after the config passes the integrity check.</p>
<pre><code class="language-solidity">event NewExpression(address sender, bytes bytecode, uint256[] constants);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>The caller of <code>deployExpression2</code>.</td></tr>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>As per <code>IExpressionDeployerV3.deployExpression2</code> inputs.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>As per <code>IExpressionDeployerV3.deployExpression2</code> inputs.</td></tr>
</tbody></table>
</div>
<h3 id="deployedexpression"><a class="header" href="#deployedexpression">DeployedExpression</a></h3>
<p>The address of the deployed expression. MUST be emitted once the
expression can be loaded and deserialized into an evaluable interpreter
state.</p>
<pre><code class="language-solidity">event DeployedExpression(
    address sender, IInterpreterV2 interpreter, IInterpreterStoreV1 store, address expression, bytes io
);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>The caller of <code>deployExpression2</code>.</td></tr>
<tr><td><code>interpreter</code></td><td><code>IInterpreterV2</code></td><td>As per <code>IExpressionDeployerV3.deployExpression2</code> return.</td></tr>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>As per <code>IExpressionDeployerV3.deployExpression2</code> return.</td></tr>
<tr><td><code>expression</code></td><td><code>address</code></td><td>As per <code>IExpressionDeployerV3.deployExpression2</code> return.</td></tr>
<tr><td><code>io</code></td><td><code>bytes</code></td><td>As per <code>IExpressionDeployerV3.deployExpression2</code> return.</td></tr>
</tbody></table>
</div>
<h3 id="dispair-2"><a class="header" href="#dispair-2">DISPair</a></h3>
<p>This is the literal InterpreterOpMeta bytes to be used offchain to make
sense of the opcodes in this interpreter deployment, as a human. For
formats like json that make heavy use of boilerplate, repetition and
whitespace, some kind of compression is recommended.
The DISPair is a pairing of:</p>
<ul>
<li>Deployer (this contract)</li>
<li>Interpreter</li>
<li>Store</li>
<li>Parser</li>
</ul>
<pre><code class="language-solidity">event DISPair(address sender, address interpreter, address store, address parser, bytes meta);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td>The <code>msg.sender</code> providing the op meta.</td></tr>
<tr><td><code>interpreter</code></td><td><code>address</code></td><td>The interpreter the deployer believes it is qualified to perform integrity checks on behalf of.</td></tr>
<tr><td><code>store</code></td><td><code>address</code></td><td>The interpreter store the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>parser</code></td><td><code>address</code></td><td>The parser the deployer believes is compatible with the interpreter.</td></tr>
<tr><td><code>meta</code></td><td><code>bytes</code></td><td>The raw binary data of the construction meta. Maybe compressed data etc. and is intended for offchain consumption.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-11"><a class="header" href="#constants-11">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IExpressionDeployerV3.sol">Git Source</a></p>
<h3 id="ierc1820_name_iexpression_deployer_v3"><a class="header" href="#ierc1820_name_iexpression_deployer_v3">IERC1820_NAME_IEXPRESSION_DEPLOYER_V3</a></h3>
<pre><code class="language-solidity">string constant IERC1820_NAME_IEXPRESSION_DEPLOYER_V3 = &quot;IExpressionDeployerV3&quot;;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterexternv3"><a class="header" href="#iinterpreterexternv3">IInterpreterExternV3</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IInterpreterExternV3.sol">Git Source</a></p>
<h2 id="functions-21"><a class="header" href="#functions-21">Functions</a></h2>
<h3 id="externintegrity-1"><a class="header" href="#externintegrity-1">externIntegrity</a></h3>
<p>Checks the integrity of some extern call.</p>
<pre><code class="language-solidity">function externIntegrity(ExternDispatch dispatch, uint256 expectedInputs, uint256 expectedOutputs)
    external
    view
    returns (uint256 actualInputs, uint256 actualOutputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatch</code></td><td><code>ExternDispatch</code></td><td>Encoded information about the extern to dispatch. Analogous to the opcode/operand in the interpreter.</td></tr>
<tr><td><code>expectedInputs</code></td><td><code>uint256</code></td><td>The number of inputs expected for the dispatched logic.</td></tr>
<tr><td><code>expectedOutputs</code></td><td><code>uint256</code></td><td>The number of outputs expected for the dispatched logic.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>actualInputs</code></td><td><code>uint256</code></td><td>The actual number of inputs for the dispatched logic.</td></tr>
<tr><td><code>actualOutputs</code></td><td><code>uint256</code></td><td>The actual number of outputs for the dispatched logic.</td></tr>
</tbody></table>
</div>
<h3 id="extern-3"><a class="header" href="#extern-3">extern</a></h3>
<p>Handles a single dispatch.</p>
<pre><code class="language-solidity">function extern(ExternDispatch dispatch, uint256[] calldata inputs)
    external
    view
    returns (uint256[] calldata outputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>dispatch</code></td><td><code>ExternDispatch</code></td><td>Encoded information about the extern to dispatch. Analogous to the opcode/operand in the interpreter.</td></tr>
<tr><td><code>inputs</code></td><td><code>uint256[]</code></td><td>The array of inputs for the dispatched logic.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>outputs</code></td><td><code>uint256[]</code></td><td>The result of the dispatched logic.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterstorev2"><a class="header" href="#iinterpreterstorev2">IInterpreterStoreV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IInterpreterStoreV2.sol">Git Source</a></p>
<p>Tracks state changes on behalf of an interpreter. A single store can
handle state changes for many calling contracts, many interpreters and many
expressions. The store is responsible for ensuring that applying these state
changes is safe from key collisions with calls to <code>set</code> from different
<code>msg.sender</code> callers. I.e. it MUST NOT be possible for a caller to modify the
state changes associated with some other caller.
The store defines the shape of its own state changes, which is opaque to the
calling contract. For example, some store may treat the list of state changes
as a pairwise key/value set, and some other store may treat it as a literal
list to be stored as-is.
Each interpreter decides for itself which store to use based on the
compatibility of its own opcodes.
The store MUST assume the state changes have been corrupted by the calling
contract due to bugs or malicious intent, and enforce state isolation between
callers despite arbitrarily invalid state changes. The store MUST revert if
it can detect invalid state changes, such as a key/value list having an odd
number of items, but this MAY NOT be possible if the corruption is
undetectable.</p>
<h2 id="functions-22"><a class="header" href="#functions-22">Functions</a></h2>
<h3 id="set-1"><a class="header" href="#set-1">set</a></h3>
<p>Mutates the interpreter store in bulk. The bulk values are provided in
the form of a <code>uint256[]</code> which can be treated e.g. as pairwise keys and
values to be stored in a Solidity mapping. The <code>IInterpreterStoreV2</code>
defines the meaning of the <code>uint256[]</code> for its own storage logic.</p>
<pre><code class="language-solidity">function set(StateNamespace namespace, uint256[] calldata kvs) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>StateNamespace</code></td><td>The unqualified namespace for the set that MUST be fully qualified by the <code>IInterpreterStoreV2</code> to prevent key collisions between callers. The fully qualified namespace forms a compound key with the keys for each value to set.</td></tr>
<tr><td><code>kvs</code></td><td><code>uint256[]</code></td><td>The list of changes to apply to the store's internal state.</td></tr>
</tbody></table>
</div>
<h3 id="get-1"><a class="header" href="#get-1">get</a></h3>
<p>Given a fully qualified namespace and key, return the associated value.
Ostensibly the interpreter can use this to implement opcodes that read
previously set values. The interpreter MUST apply the same qualification
logic as the store that it uses to guarantee consistent round tripping of
data and prevent malicious behaviours. Technically also allows onchain
reads of any set value from any contract, not just interpreters, but in
this case readers MUST be aware and handle inconsistencies between get
and set while the state changes are still in memory in the calling
context and haven't yet been persisted to the store.
<code>IInterpreterStoreV2</code> uses the same fallback behaviour for unset keys as
Solidity. Specifically, any UNSET VALUES SILENTLY FALLBACK TO <code>0</code>.</p>
<pre><code class="language-solidity">function get(FullyQualifiedNamespace namespace, uint256 key) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>The fully qualified namespace to get a single value for.</td></tr>
<tr><td><code>key</code></td><td><code>uint256</code></td><td>The key to get the value for within the namespace.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The value OR ZERO IF NOT SET.</td></tr>
</tbody></table>
</div>
<h2 id="events-4"><a class="header" href="#events-4">Events</a></h2>
<h3 id="set-2"><a class="header" href="#set-2">Set</a></h3>
<p>MUST be emitted by the store on <code>set</code> to its internal storage.</p>
<pre><code class="language-solidity">event Set(FullyQualifiedNamespace namespace, uint256 key, uint256 value);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>The fully qualified namespace that the store is setting.</td></tr>
<tr><td><code>key</code></td><td><code>uint256</code></td><td>The key that the store is setting.</td></tr>
<tr><td><code>value</code></td><td><code>uint256</code></td><td>The value that the store is setting.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="sourceindexv2"><a class="header" href="#sourceindexv2">SourceIndexV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IInterpreterV2.sol">Git Source</a></p>
<p><em>The index of a source within a deployed expression that can be evaluated
by an <code>IInterpreterV2</code>. MAY be an entrypoint or the index of a source called
internally such as by the <code>call</code> opcode.</em></p>
<pre><code class="language-solidity">type SourceIndexV2 is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterv2"><a class="header" href="#iinterpreterv2">IInterpreterV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IInterpreterV2.sol">Git Source</a></p>
<h2 id="functions-23"><a class="header" href="#functions-23">Functions</a></h2>
<h3 id="functionpointers-2"><a class="header" href="#functionpointers-2">functionPointers</a></h3>
<p>Exposes the function pointers as <code>uint16</code> values packed into a single
<code>bytes</code> in the same order as they would be indexed into by opcodes. For
example, if opcode <code>2</code> should dispatch function at position <code>0x1234</code> then
the start of the returned bytes would be <code>0xXXXXXXXX1234</code> where <code>X</code> is
a placeholder for the function pointers of opcodes <code>0</code> and <code>1</code>.
<code>IExpressionDeployerV3</code> contracts use these function pointers to
&quot;compile&quot; the expression into something that an interpreter can dispatch
directly without paying gas to lookup the same at runtime. As the
validity of any integrity check and subsequent dispatch is highly
sensitive to both the function pointers and overall bytecode of the
interpreter, <code>IExpressionDeployerV3</code> contracts SHOULD implement guards
against accidentally being deployed onchain paired against an unknown
interpreter. It is very easy for an apparent compatible pairing to be
subtly and critically incompatible due to addition/removal/reordering of
opcodes and compiler optimisations on the interpreter bytecode.
This MAY return different values during construction vs. all other times
after the interpreter has been successfully deployed onchain. DO NOT rely
on function pointers reported during contract construction.</p>
<pre><code class="language-solidity">function functionPointers() external view returns (bytes calldata);
</code></pre>
<h3 id="eval2-1"><a class="header" href="#eval2-1">eval2</a></h3>
<p>The raison d'etre for an interpreter. Given some expression and per-call
additional contextual data, produce a stack of results and a set of state
changes that the caller MAY OPTIONALLY pass back to be persisted by a
call to <code>IInterpreterStoreV1.set</code>.
There are two key differences between <code>eval</code> and <code>eval2</code>:</p>
<ul>
<li><code>eval</code> was ambiguous about whether the top value of the final stack is
the first or last item of the array. <code>eval2</code> is unambiguous in that the
top of the stack MUST be the first item in the array.</li>
<li><code>eval2</code> allows the caller to specify inputs to the entrypoint stack of
the expression. This allows the <code>eval</code> and <code>offchainDebugEval</code> functions
to be merged into a single function that can be used for both onchain and
offchain evaluation. For example, the caller can simulate &quot;internal&quot;
calls by specifying the inputs to the entrypoint stack of the expression
as the outputs of some other expression. Legacy behaviour can be achieved
by passing an empty array for <code>inputs</code>.</li>
</ul>
<pre><code class="language-solidity">function eval2(
    IInterpreterStoreV1 store,
    FullyQualifiedNamespace namespace,
    EncodedDispatch dispatch,
    uint256[][] calldata context,
    uint256[] calldata inputs
) external view returns (uint256[] calldata stack, uint256[] calldata writes);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>The storage contract that the returned key/value pairs MUST be passed to IF the calling contract is in a non-static calling context. Static calling contexts MUST pass <code>address(0)</code>.</td></tr>
<tr><td><code>namespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>The fully qualified namespace that will be used by the interpreter at runtime in order to perform gets on the underlying store.</td></tr>
<tr><td><code>dispatch</code></td><td><code>EncodedDispatch</code></td><td>All the information required for the interpreter to load an expression, select an entrypoint and return the values expected by the caller. The interpreter MAY encode dispatches differently to <code>LibEncodedDispatch</code> but this WILL negatively impact compatibility for calling contracts that hardcode the encoding logic.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[][]</code></td><td>A 2-dimensional array of data that can be indexed into at runtime by the interpreter. The calling contract is responsible for ensuring the authenticity and completeness of context data. The interpreter MUST revert at runtime if an expression attempts to index into some context value that is not provided by the caller. This implies that context reads cannot be checked for out of bounds reads at deploy time, as the runtime context MAY be provided in a different shape to what the expression is expecting.</td></tr>
<tr><td><code>inputs</code></td><td><code>uint256[]</code></td><td>The inputs to the entrypoint stack of the expression. MAY be empty if the caller prefers to specify all inputs via. context.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stack</code></td><td><code>uint256[]</code></td><td>The list of values produced by evaluating the expression. MUST NOT be longer than the maximum length specified by <code>dispatch</code>, if applicable. MUST be ordered such that the top of the stack is the FIRST item in the array.</td></tr>
<tr><td><code>writes</code></td><td><code>uint256[]</code></td><td>A list of values to be processed by a store. Most likely will be pairwise key/value items but this is not strictly required if some store expects some other format.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-12"><a class="header" href="#constants-12">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/IInterpreterV2.sol">Git Source</a></p>
<h3 id="opcode_stack"><a class="header" href="#opcode_stack">OPCODE_STACK</a></h3>
<p><em>For maximum compatibility with external contracts, the <code>IInterpreterV2</code>
should implement an opcode that reads from the stack by index as opcode <code>0</code>.</em></p>
<pre><code class="language-solidity">uint256 constant OPCODE_STACK = 0;
</code></pre>
<h3 id="opcode_constant"><a class="header" href="#opcode_constant">OPCODE_CONSTANT</a></h3>
<p><em>For maximum compatibility with external contracts, the <code>IInterpreterV2</code>
should implement an opcode that reads constants by index as opcode <code>1</code>.</em></p>
<pre><code class="language-solidity">uint256 constant OPCODE_CONSTANT = 1;
</code></pre>
<h3 id="opcode_extern"><a class="header" href="#opcode_extern">OPCODE_EXTERN</a></h3>
<p><em>For maximum compatibility with external contracts, the <code>IInterpreterV2</code>
should implement an opcode that calls externs by index as opcode <code>2</code>.</em></p>
<pre><code class="language-solidity">uint256 constant OPCODE_EXTERN = 2;
</code></pre>
<h3 id="opcode_unknown"><a class="header" href="#opcode_unknown">OPCODE_UNKNOWN</a></h3>
<p><em>For maximum compatibility with opcode lists, the <code>IInterpreterV2</code>
should implement the opcode for locally unknown words that need sub parsing
as opcode <code>255</code>.</em></p>
<pre><code class="language-solidity">uint256 constant OPCODE_UNKNOWN = 0xFF;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="isubparserv1"><a class="header" href="#isubparserv1">ISubParserV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/ISubParserV1.sol">Git Source</a></p>
<h2 id="functions-24"><a class="header" href="#functions-24">Functions</a></h2>
<h3 id="subparse-1"><a class="header" href="#subparse-1">subParse</a></h3>
<p>Handle parsing some data on behalf of a parser. The structure and meaning
of the data is entirely up to the parser, the compatibility version
indicates a unique ID for a particular parseble data convention.</p>
<pre><code class="language-solidity">function subParse(bytes32 compatibility, bytes calldata data)
    external
    pure
    returns (bool success, bytes calldata bytecode, uint256[] calldata constants);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>compatibility</code></td><td><code>bytes32</code></td><td>The compatibility version of the data to parse. The sub parser is free to handle this however it likes, but it MUST revert if it is unsure how to handle the data. E.g. the sub parser MAY revert any compatibility version that is not an exact match to a singular known constant, or it may attempt to support several versions.</td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>The data to parse. The main parser will provide arbitrary data that is expected to match the conventions implied by the compatibility version. As sub parsing is a read only operation, any corrupt data could only possibly harm the main parser, which in turn should be parsing as a read only operation to protect itself from malicious inputs.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>success</code></td><td><code>bool</code></td><td>The first return value is a success flag, yet the sub parser MAY REVERT under certain conditions. It is important to know when to revert and when to return false. The general rule is that if the inputs are understood by the subparser, and look wrong to the subparser, then the subparser MUST revert. If the inputs are not understood by the subparser, it MUST NOT revert, as it is not in a position to know if the inputs are wrong or not, and there is very likely some other subparser known to the main parser that can handle the data as a fallback. For example, the following situations are expected to revert: - The compatibility ID is not supported by the sub parser. Every sub parser knows what it is compatible with, so it is safe to revert anything incompatible. - The data parses to something the sub parser knows how to handle, but the data is malformed in some way. For example, the sub parser knows the word it is parsing, but perhaps some associated data such as the constants height is out of a valid range. Similarly, the following situations are expected to return false and not revert: - The compatibility ID is supported by the sub parser, and the data appears to have the correct structure, but there are no recognized words in the data. This MUST NOT revert, as some other sub parser MAY recognize the word and handle it as a fallback.</td></tr>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>If successful, the second return value is the bytecode that the subparser has generated. The main parser is expected to merge this into the main bytecode as-is, so it MUST match main parser behaviour as per the compatibility conventions. If unsuccessful, a zero length byte array.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>If successful, and the generated bytecode implies additions to the constants array, the third return value is the constants that the subparser has generated. The main parser is expected to merge this into the main constants array as-is. If the parsing is unsuccessful, or the generated bytecode does not require any new constants, a zero length array.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-13"><a class="header" href="#constants-13">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/unstable/ISubParserV1.sol">Git Source</a></p>
<h3 id="compatiblity_v0"><a class="header" href="#compatiblity_v0">COMPATIBLITY_V0</a></h3>
<p>*This is the first compatibility version of the subparser interface.
Likely it won't survive long, but it's here to demonstrate the concept.
The structure of data for this version is:</p>
<ul>
<li>bytes [0,1]: The current height of the constants array on the main parser.</li>
<li>bytes [2,2]: The IO byte, that at the time of writing represents the
number of inputs to the word.</li>
<li>bytes [3, .. ]: A string slice that the parser could not parse. For well
formed rainlang it will be a word and any associated operands, from the
first word char to the char before the opening <code>(</code> paren.*</li>
</ul>
<pre><code class="language-solidity">bytes32 constant COMPATIBLITY_V0 = keccak256(&quot;2023.12.17 Rainlang Parser v0&quot;);
</code></pre>
<h3 id="compatiblity_v1"><a class="header" href="#compatiblity_v1">COMPATIBLITY_V1</a></h3>
<p>*This is the second compatibility version of the subparser interface.
Likely it won't survive long, but it's here to demonstrate the concept.
The structure of data for this version is:</p>
<ul>
<li>bytes [0,1]: The current height of the constants array on the main parser.</li>
<li>bytes [2,2]: The IO byte, that at the time of writing represents the
number of inputs to the word.</li>
<li>bytes [3,4]; Two bytes that encodes N where N is the length in bytes of the
rainlang word that could not be parsed in bytes.</li>
<li>bytes [5, N+5]: A string slice that the parser could not parse. For well
formed rainlang it will be a word WITHOUT any associated operands. The
parsing of operands is handled by the main parser, and the subparser is
only expected to parse the word itself and handle the pre-parsed operand
values.</li>
<li>bytes [N+5,...]: The operands that the main parser has already parsed as
a standard <code>uint256[]</code> array. The subparser is expected to handle these
operands as-is, and return bytecode that is compatible with the operand
values. The first word of the array is the array length.*</li>
</ul>
<pre><code class="language-solidity">bytes32 constant COMPATIBLITY_V1 = keccak256(&quot;2023.12.26 Rainlang Parser v1&quot;);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="evaluableconfigv3"><a class="header" href="#evaluableconfigv3">EvaluableConfigV3</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterCallerV2.sol">Git Source</a></p>
<p>Standard struct that can be embedded in ABIs in a consistent format for
tooling to read/write. MAY be useful to bundle up the data required to call
<code>IExpressionDeployerV3</code> but is NOT mandatory.</p>
<pre><code class="language-solidity">struct EvaluableConfigV3 {
    IExpressionDeployerV3 deployer;
    bytes bytecode;
    uint256[] constants;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>deployer</code></td><td><code>IExpressionDeployerV3</code></td><td>Will deploy the expression from sources and constants.</td></tr>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>Will be deployed to an expression address for use in <code>Evaluable</code>.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>Will be available to the expression at runtime.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="evaluablev2"><a class="header" href="#evaluablev2">EvaluableV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterCallerV2.sol">Git Source</a></p>
<p>Struct over the return of <code>IExpressionDeployerV3.deployExpression2</code>
which MAY be more convenient to work with than raw addresses.</p>
<pre><code class="language-solidity">struct EvaluableV2 {
    IInterpreterV2 interpreter;
    IInterpreterStoreV1 store;
    address expression;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>interpreter</code></td><td><code>IInterpreterV2</code></td><td>Will evaluate the expression.</td></tr>
<tr><td><code>store</code></td><td><code>IInterpreterStoreV1</code></td><td>Will store state changes due to evaluation of the expression.</td></tr>
<tr><td><code>expression</code></td><td><code>address</code></td><td>Will be evaluated by the interpreter.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="signedcontextv1"><a class="header" href="#signedcontextv1">SignedContextV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterCallerV2.sol">Git Source</a></p>
<p>Typed embodiment of some context data with associated signer and signature.
The signature MUST be over the packed encoded bytes of the context array,
i.e. the context array concatenated as bytes without the length prefix, then
hashed, then handled as per EIP-191 to produce a final hash to be signed.
The calling contract (likely with the help of <code>LibContext</code>) is responsible
for ensuring the authenticity of the signature, but not authorizing <em>who</em> can
sign. IN ADDITION to authorisation of the signer to known-good entities the
expression is also responsible for:</p>
<ul>
<li>Enforcing the context is the expected data (e.g. with a domain separator)</li>
<li>Tracking and enforcing nonces if signed contexts are only usable one time</li>
<li>Tracking and enforcing uniqueness of signed data if relevant</li>
<li>Checking and enforcing expiry times if present and relevant in the context</li>
<li>Many other potential constraints that expressions may want to enforce
EIP-1271 smart contract signatures are supported in addition to EOA
signatures via. the Open Zeppelin <code>SignatureChecker</code> library, which is
wrapped by <code>LibContext.build</code>. As smart contract signatures are checked
onchain they CAN BE REVOKED AT ANY MOMENT as the smart contract can simply
return <code>false</code> when it previously returned <code>true</code>.</li>
</ul>
<pre><code class="language-solidity">struct SignedContextV1 {
    address signer;
    uint256[] context;
    bytes signature;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signer</code></td><td><code>address</code></td><td>The account that produced the signature for <code>context</code>. The calling contract MUST authenticate that the signer produced the signature.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[]</code></td><td>The signed data in a format that can be merged into a 2-dimensional context matrix as-is.</td></tr>
<tr><td><code>signature</code></td><td><code>bytes</code></td><td>The cryptographic signature for <code>context</code>. The calling contract MUST authenticate that the signature is valid for the <code>signer</code> and <code>context</code>.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpretercallerv2"><a class="header" href="#iinterpretercallerv2">IInterpreterCallerV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterCallerV2.sol">Git Source</a></p>
<p>A contract that calls an <code>IInterpreterV1</code> via. <code>eval</code>. There are near
zero requirements on a caller other than:</p>
<ul>
<li>Emit some meta about itself upon construction so humans know what the
contract does</li>
<li>Provide the context, which can be built in a standard way by <code>LibContext</code></li>
<li>Handle the stack array returned from <code>eval</code></li>
<li>OPTIONALLY emit the <code>Context</code> event</li>
<li>OPTIONALLY set state on the <code>IInterpreterStoreV1</code> returned from eval.</li>
</ul>
<h2 id="events-5"><a class="header" href="#events-5">Events</a></h2>
<h3 id="context-1"><a class="header" href="#context-1">Context</a></h3>
<p>Calling contracts SHOULD emit <code>Context</code> before calling <code>eval</code> if they
are able. Notably <code>eval</code> MAY be called within a static call which means
that events cannot be emitted, in which case this does not apply. It MAY
NOT be useful to emit this multiple times for several eval calls if they
all share a common context, in which case a single emit is sufficient.</p>
<pre><code class="language-solidity">event Context(address sender, uint256[][] context);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sender</code></td><td><code>address</code></td><td><code>msg.sender</code> building the context.</td></tr>
<tr><td><code>context</code></td><td><code>uint256[][]</code></td><td>The context that was built.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-14"><a class="header" href="#constants-14">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterCallerV2.sol">Git Source</a></p>
<h3 id="signed_context_signer_offset-1"><a class="header" href="#signed_context_signer_offset-1">SIGNED_CONTEXT_SIGNER_OFFSET</a></h3>
<pre><code class="language-solidity">uint256 constant SIGNED_CONTEXT_SIGNER_OFFSET = 0;
</code></pre>
<h3 id="signed_context_context_offset-1"><a class="header" href="#signed_context_context_offset-1">SIGNED_CONTEXT_CONTEXT_OFFSET</a></h3>
<pre><code class="language-solidity">uint256 constant SIGNED_CONTEXT_CONTEXT_OFFSET = 0x20;
</code></pre>
<h3 id="signed_context_signature_offset-1"><a class="header" href="#signed_context_signature_offset-1">SIGNED_CONTEXT_SIGNATURE_OFFSET</a></h3>
<pre><code class="language-solidity">uint256 constant SIGNED_CONTEXT_SIGNATURE_OFFSET = 0x40;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fullyqualifiednamespace"><a class="header" href="#fullyqualifiednamespace">FullyQualifiedNamespace</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterStoreV1.sol">Git Source</a></p>
<p>A fully qualified namespace includes the interpreter's own namespacing logic
IN ADDITION to the calling contract's requested <code>StateNamespace</code>. Typically
this involves hashing the <code>msg.sender</code> into the <code>StateNamespace</code> so that each
caller operates within its own disjoint state universe. Intepreters MUST NOT
allow either the caller nor any expression/word to modify this directly on
pain of potential key collisions on writes to the interpreter's own storage.</p>
<pre><code class="language-solidity">type FullyQualifiedNamespace is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iinterpreterstorev1"><a class="header" href="#iinterpreterstorev1">IInterpreterStoreV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterStoreV1.sol">Git Source</a></p>
<p>Tracks state changes on behalf of an interpreter. A single store can
handle state changes for many calling contracts, many interpreters and many
expressions. The store is responsible for ensuring that applying these state
changes is safe from key collisions with calls to <code>set</code> from different
<code>msg.sender</code> callers. I.e. it MUST NOT be possible for a caller to modify the
state changes associated with some other caller.
The store defines the shape of its own state changes, which is opaque to the
calling contract. For example, some store may treat the list of state changes
as a pairwise key/value set, and some other store may treat it as a literal
list to be stored as-is.
Each interpreter decides for itself which store to use based on the
compatibility of its own opcodes.
The store MUST assume the state changes have been corrupted by the calling
contract due to bugs or malicious intent, and enforce state isolation between
callers despite arbitrarily invalid state changes. The store MUST revert if
it can detect invalid state changes, such as a key/value list having an odd
number of items, but this MAY NOT be possible if the corruption is
undetectable.</p>
<h2 id="functions-25"><a class="header" href="#functions-25">Functions</a></h2>
<h3 id="set-3"><a class="header" href="#set-3">set</a></h3>
<p>Mutates the interpreter store in bulk. The bulk values are provided in
the form of a <code>uint256[]</code> which can be treated e.g. as pairwise keys and
values to be stored in a Solidity mapping. The <code>IInterpreterStoreV1</code>
defines the meaning of the <code>uint256[]</code> for its own storage logic.</p>
<pre><code class="language-solidity">function set(StateNamespace namespace, uint256[] calldata kvs) external;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>StateNamespace</code></td><td>The unqualified namespace for the set that MUST be fully qualified by the <code>IInterpreterStoreV1</code> to prevent key collisions between callers. The fully qualified namespace forms a compound key with the keys for each value to set.</td></tr>
<tr><td><code>kvs</code></td><td><code>uint256[]</code></td><td>The list of changes to apply to the store's internal state.</td></tr>
</tbody></table>
</div>
<h3 id="get-2"><a class="header" href="#get-2">get</a></h3>
<p>Given a fully qualified namespace and key, return the associated value.
Ostensibly the interpreter can use this to implement opcodes that read
previously set values. The interpreter MUST apply the same qualification
logic as the store that it uses to guarantee consistent round tripping of
data and prevent malicious behaviours. Technically also allows onchain
reads of any set value from any contract, not just interpreters, but in
this case readers MUST be aware and handle inconsistencies between get
and set while the state changes are still in memory in the calling
context and haven't yet been persisted to the store.
<code>IInterpreterStoreV1</code> uses the same fallback behaviour for unset keys as
Solidity. Specifically, any UNSET VALUES SILENTLY FALLBACK TO <code>0</code>.</p>
<pre><code class="language-solidity">function get(FullyQualifiedNamespace namespace, uint256 key) external view returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>namespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>The fully qualified namespace to get a single value for.</td></tr>
<tr><td><code>key</code></td><td><code>uint256</code></td><td>The key to get the value for within the namespace.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The value OR ZERO IF NOT SET.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-15"><a class="header" href="#constants-15">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IInterpreterStoreV1.sol">Git Source</a></p>
<h3 id="no_store"><a class="header" href="#no_store">NO_STORE</a></h3>
<pre><code class="language-solidity">IInterpreterStoreV1 constant NO_STORE = IInterpreterStoreV1(address(0));
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="authoringmeta"><a class="header" href="#authoringmeta">AuthoringMeta</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IParserV1.sol">Git Source</a></p>
<pre><code class="language-solidity">struct AuthoringMeta {
    bytes32 word;
    uint8 operandParserOffset;
    string description;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="authoringmetav2-1"><a class="header" href="#authoringmetav2-1">AuthoringMetaV2</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IParserV1.sol">Git Source</a></p>
<p>Identical to AuthoringMeta but without operandParserOffset.</p>
<pre><code class="language-solidity">struct AuthoringMetaV2 {
    bytes32 word;
    string description;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iparserv1"><a class="header" href="#iparserv1">IParserV1</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/interface/IParserV1.sol">Git Source</a></p>
<h2 id="functions-26"><a class="header" href="#functions-26">Functions</a></h2>
<h3 id="parse-1"><a class="header" href="#parse-1">parse</a></h3>
<p>Parses a Rainlang string into an evaluable expression. MUST be
deterministic and MUST NOT have side effects. The only inputs are the
Rainlang string and the parse meta. MAY revert if the Rainlang string
is invalid. This function takes <code>bytes</code> instead of <code>string</code> to allow
for definitions of &quot;string&quot; other than UTF-8.</p>
<pre><code class="language-solidity">function parse(bytes calldata data) external pure returns (bytes calldata bytecode, uint256[] calldata constants);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>data</code></td><td><code>bytes</code></td><td>The Rainlang bytes to parse.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The expressions that can be evaluated.</td></tr>
<tr><td><code>constants</code></td><td><code>uint256[]</code></td><td>The constants that can be referenced by sources.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-6"><a class="header" href="#contents-6">Contents</a></h1>
<ul>
<li><a href="src/lib//src/lib/bitwise">bitwise</a></li>
<li><a href="src/lib//src/lib/bytecode">bytecode</a></li>
<li><a href="src/lib//src/lib/caller">caller</a></li>
<li><a href="src/lib//src/lib/compile">compile</a></li>
<li><a href="src/lib//src/lib/eval">eval</a></li>
<li><a href="src/lib//src/lib/extern">extern</a></li>
<li><a href="src/lib//src/lib/integrity">integrity</a></li>
<li><a href="src/lib//src/lib/ns">ns</a></li>
<li><a href="src/lib//src/lib/op">op</a></li>
<li><a href="src/lib//src/lib/parse">parse</a></li>
<li><a href="src/lib//src/lib/state">state</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-7"><a class="header" href="#contents-7">Contents</a></h1>
<ul>
<li><a href="src/lib/bitwise/LibCtPop.sol/library.LibCtPop.html">LibCtPop</a></li>
<li><a href="src/lib/bitwise/LibCtPop.sol/constants.LibCtPop.html">LibCtPop constants</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libctpop"><a class="header" href="#libctpop">LibCtPop</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/bitwise/LibCtPop.sol">Git Source</a></p>
<h2 id="functions-27"><a class="header" href="#functions-27">Functions</a></h2>
<h3 id="ctpop"><a class="header" href="#ctpop">ctpop</a></h3>
<p>Optimised version of ctpop.
https://en.wikipedia.org/wiki/Hamming_weight</p>
<pre><code class="language-solidity">function ctpop(uint256 x) internal pure returns (uint256);
</code></pre>
<h3 id="ctpopslow"><a class="header" href="#ctpopslow">ctpopSlow</a></h3>
<p>This is the slowest possible implementation of ctpop. It is used to
verify the correctness of the optimized implementation in LibCtPop.
It should be obviously correct by visual inspection, referencing the
wikipedia article.
https://en.wikipedia.org/wiki/Hamming_weight</p>
<pre><code class="language-solidity">function ctpopSlow(uint256 x) internal pure returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-16"><a class="header" href="#constants-16">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/bitwise/LibCtPop.sol">Git Source</a></p>
<h3 id="ctpop_m1"><a class="header" href="#ctpop_m1">CTPOP_M1</a></h3>
<p><em>010101... for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M1 = 0x5555555555555555555555555555555555555555555555555555555555555555;
</code></pre>
<h3 id="ctpop_m2"><a class="header" href="#ctpop_m2">CTPOP_M2</a></h3>
<p><em>00110011.. for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M2 = 0x3333333333333333333333333333333333333333333333333333333333333333;
</code></pre>
<h3 id="ctpop_m4"><a class="header" href="#ctpop_m4">CTPOP_M4</a></h3>
<p><em>4 bits alternating for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M4 = 0x0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F;
</code></pre>
<h3 id="ctpop_m8"><a class="header" href="#ctpop_m8">CTPOP_M8</a></h3>
<p><em>8 bits alternating for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M8 = 0x00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF00FF;
</code></pre>
<h3 id="ctpop_m16"><a class="header" href="#ctpop_m16">CTPOP_M16</a></h3>
<p><em>16 bits alternating for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M16 = 0x0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF0000FFFF;
</code></pre>
<h3 id="ctpop_m32"><a class="header" href="#ctpop_m32">CTPOP_M32</a></h3>
<p><em>32 bits alternating for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M32 = 0x00000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF00000000FFFFFFFF;
</code></pre>
<h3 id="ctpop_m64"><a class="header" href="#ctpop_m64">CTPOP_M64</a></h3>
<p><em>64 bits alternating for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M64 = 0x0000000000000000FFFFFFFFFFFFFFFF0000000000000000FFFFFFFFFFFFFFFF;
</code></pre>
<h3 id="ctpop_m128"><a class="header" href="#ctpop_m128">CTPOP_M128</a></h3>
<p><em>128 bits alternating for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_M128 = 0x00000000000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF;
</code></pre>
<h3 id="ctpop_h01"><a class="header" href="#ctpop_h01">CTPOP_H01</a></h3>
<p><em>1 bytes for ctpop</em></p>
<pre><code class="language-solidity">uint256 constant CTPOP_H01 = 0x0101010101010101010101010101010101010101010101010101010101010101;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-8"><a class="header" href="#contents-8">Contents</a></h1>
<ul>
<li><a href="src/lib/bytecode/LibBytecode.sol/library.LibBytecode.html">LibBytecode</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libbytecode"><a class="header" href="#libbytecode">LibBytecode</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/bytecode/LibBytecode.sol">Git Source</a></p>
<p>A library for inspecting the bytecode of an expression. Largely
focused on reading the source headers rather than the opcodes themselves.
Designed to be efficient enough to be used in the interpreter directly.
As such, it is not particularly safe, notably it always assumes that the
headers are not lying about the structure and runtime behaviour of the
bytecode. This is by design as it allows much more simple, efficient and
decoupled implementation of authoring/parsing logic, which makes the author
of an expression responsible for producing well formed bytecode, such as
balanced LHS/RHS stacks. The deployment integrity checks are responsible for
checking that the headers match the structure and behaviour of the bytecode.</p>
<h2 id="functions-28"><a class="header" href="#functions-28">Functions</a></h2>
<h3 id="sourcecount"><a class="header" href="#sourcecount">sourceCount</a></h3>
<p>The number of sources in the bytecode.
If the bytecode is empty, returns 0.
Otherwise, returns the first byte of the bytecode, which is the number
of sources.
Implies that 0x and 0x00 are equivalent, both having 0 sources. For this
reason, contracts that handle bytecode MUST NOT rely on simple data
length checks to determine if the bytecode is empty or not.
DOES NOT check the integrity or even existence of the sources.</p>
<pre><code class="language-solidity">function sourceCount(bytes memory bytecode) internal pure returns (uint256 count);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to inspect.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>count</code></td><td><code>uint256</code></td><td>The number of sources in the bytecode.</td></tr>
</tbody></table>
</div>
<h3 id="checknooobpointers"><a class="header" href="#checknooobpointers">checkNoOOBPointers</a></h3>
<p>Checks the structural integrity of the bytecode from the perspective of
potential out of bounds reads. Will revert if the bytecode is not
well-formed. This check MUST be done BEFORE any attempts at per-opcode
integrity checks, as the per-opcode checks assume that the headers define
valid regions in memory to iterate over.
Checks:</p>
<ul>
<li>The offsets are populated according to the source count.</li>
<li>The offsets point to positions within the bytecode <code>bytes</code>.</li>
<li>There exists at least the 4 byte header for each source at the offset,
within the bounds of the bytecode <code>bytes</code>.</li>
<li>The number of opcodes specified in the header of each source locates
the end of the source exactly at either the offset of the next source
or the end of the bytecode <code>bytes</code>.</li>
</ul>
<pre><code class="language-solidity">function checkNoOOBPointers(bytes memory bytecode) internal pure;
</code></pre>
<h3 id="sourcerelativeoffset"><a class="header" href="#sourcerelativeoffset">sourceRelativeOffset</a></h3>
<p>The relative byte offset of a source in the bytecode.
This is the offset from the start of the first source header, which is
after the source count byte and the source offsets.
This function DOES NOT check that the relative offset is within the
bounds of the bytecode. Callers MUST <code>checkNoOOBPointers</code> BEFORE
attempting to traverse the bytecode, otherwise the relative offset MAY
point to memory outside the bytecode <code>bytes</code>.</p>
<pre><code class="language-solidity">function sourceRelativeOffset(bytes memory bytecode, uint256 sourceIndex) internal pure returns (uint256 offset);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to inspect.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>uint256</code></td><td>The index of the source to inspect.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>offset</code></td><td><code>uint256</code></td><td>The relative byte offset of the source in the bytecode.</td></tr>
</tbody></table>
</div>
<h3 id="sourcepointer"><a class="header" href="#sourcepointer">sourcePointer</a></h3>
<p>The absolute byte pointer of a source in the bytecode. Points to the
header of the source, NOT the first opcode.
This function DOES NOT check that the source index is within the bounds
of the bytecode. Callers MUST <code>checkNoOOBPointers</code> BEFORE attempting to
traverse the bytecode, otherwise the relative offset MAY point to memory
outside the bytecode <code>bytes</code>.</p>
<pre><code class="language-solidity">function sourcePointer(bytes memory bytecode, uint256 sourceIndex) internal pure returns (Pointer pointer);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to inspect.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>uint256</code></td><td>The index of the source to inspect.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>pointer</code></td><td><code>Pointer</code></td><td>The absolute byte pointer of the source in the bytecode.</td></tr>
</tbody></table>
</div>
<h3 id="sourceopscount"><a class="header" href="#sourceopscount">sourceOpsCount</a></h3>
<p>The number of opcodes in a source.
This function DOES NOT check that the source index is within the bounds
of the bytecode. Callers MUST <code>checkNoOOBPointers</code> BEFORE attempting to
traverse the bytecode, otherwise the relative offset MAY point to memory
outside the bytecode <code>bytes</code>.</p>
<pre><code class="language-solidity">function sourceOpsCount(bytes memory bytecode, uint256 sourceIndex) internal pure returns (uint256 opsCount);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to inspect.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>uint256</code></td><td>The index of the source to inspect.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>opsCount</code></td><td><code>uint256</code></td><td>The number of opcodes in the source.</td></tr>
</tbody></table>
</div>
<h3 id="sourcestackallocation"><a class="header" href="#sourcestackallocation">sourceStackAllocation</a></h3>
<p>The number of stack slots allocated by a source. This is the number of
32 byte words that MUST be allocated for the stack for the given source
index to avoid memory corruption when executing the source.
This function DOES NOT check that the source index is within the bounds
of the bytecode. Callers MUST <code>checkNoOOBPointers</code> BEFORE attempting to
traverse the bytecode, otherwise the relative offset MAY point to memory
outside the bytecode <code>bytes</code>.</p>
<pre><code class="language-solidity">function sourceStackAllocation(bytes memory bytecode, uint256 sourceIndex) internal pure returns (uint256 allocation);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to inspect.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>uint256</code></td><td>The index of the source to inspect.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>allocation</code></td><td><code>uint256</code></td><td>The number of stack slots allocated by the source.</td></tr>
</tbody></table>
</div>
<h3 id="sourceinputsoutputslength"><a class="header" href="#sourceinputsoutputslength">sourceInputsOutputsLength</a></h3>
<p>The number of inputs and outputs of a source.
This function DOES NOT check that the source index is within the bounds
of the bytecode. Callers MUST <code>checkNoOOBPointers</code> BEFORE attempting to
traverse the bytecode, otherwise the relative offset MAY point to memory
outside the bytecode <code>bytes</code>.
Note that both the inputs and outputs are always returned togther, this
is because the caller SHOULD be checking both together whenever using
some bytecode. Returning two values is more efficient than two separate
function calls.</p>
<pre><code class="language-solidity">function sourceInputsOutputsLength(bytes memory bytecode, uint256 sourceIndex)
    internal
    pure
    returns (uint256 inputs, uint256 outputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytecode</code></td><td><code>bytes</code></td><td>The bytecode to inspect.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>uint256</code></td><td>The index of the source to inspect.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>inputs</code></td><td><code>uint256</code></td><td>The number of inputs of the source.</td></tr>
<tr><td><code>outputs</code></td><td><code>uint256</code></td><td>The number of outputs of the source.</td></tr>
</tbody></table>
</div>
<h3 id="bytecodetosources"><a class="header" href="#bytecodetosources">bytecodeToSources</a></h3>
<p>Backwards compatibility with the old way of representing sources.
Requires allocation and copying so it isn't particularly efficient, but
allows us to use the new bytecode format with old interpreter code. Not
recommended for production code but useful for testing.</p>
<pre><code class="language-solidity">function bytecodeToSources(bytes memory bytecode) internal pure returns (bytes[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-9"><a class="header" href="#contents-9">Contents</a></h1>
<ul>
<li><a href="src/lib/caller/LibContext.sol/error.InvalidSignature.html">InvalidSignature</a></li>
<li><a href="src/lib/caller/LibContext.sol/library.LibContext.html">LibContext</a></li>
<li><a href="src/lib/caller/LibDeployerDiscoverable.sol/library.LibDeployerDiscoverable.html">LibDeployerDiscoverable</a></li>
<li><a href="src/lib/caller/LibEncodedDispatch.sol/library.LibEncodedDispatch.html">LibEncodedDispatch</a></li>
<li><a href="src/lib/caller/LibEvaluable.sol/library.LibEvaluable.html">LibEvaluable</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="invalidsignature"><a class="header" href="#invalidsignature">InvalidSignature</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/caller/LibContext.sol">Git Source</a></p>
<p>Thrown when the ith signature from a list of signed contexts is invalid.</p>
<pre><code class="language-solidity">error InvalidSignature(uint256 i);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libcontext"><a class="header" href="#libcontext">LibContext</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/caller/LibContext.sol">Git Source</a></p>
<p>Conventions for working with context as a calling contract. All of
this functionality is OPTIONAL but probably useful for the majority of use
cases. By building and authenticating onchain, caller provided and signed
contexts all in a standard way the overall usability of context is greatly
improved for expression authors and readers. Any calling contract that can
match the context expectations of an existing expression is one large step
closer to compatibility and portability, inheriting network effects of what
has already been authored elsewhere.</p>
<h2 id="functions-29"><a class="header" href="#functions-29">Functions</a></h2>
<h3 id="base"><a class="header" href="#base">base</a></h3>
<p>The base context is the <code>msg.sender</code> and address of the calling contract.
As the interpreter itself is called via an external interface and may be
statically calling itself, it MAY NOT have any ability to inspect either
of these values. Even if this were not the case the calling contract
cannot assume the existence of some opcode(s) in the interpreter that
inspect the caller, so providing these two values as context is
sufficient to decouple the calling contract from the interpreter. It is
STRONGLY RECOMMENDED that even if the calling contract has &quot;no context&quot;
that it still provides this base to every <code>eval</code>.
Calling contracts DO NOT need to call this directly. It is built and
merged automatically into the standard context built by <code>build</code>.</p>
<pre><code class="language-solidity">function base() internal view returns (uint256[] memory);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256[]</code></td><td>The <code>msg.sender</code> and address of the calling contract using this library, as a context-compatible array.</td></tr>
</tbody></table>
</div>
<h3 id="hash"><a class="header" href="#hash">hash</a></h3>
<p>Standard hashing process over a single <code>SignedContextV1</code>. Notably used
to hash a list as <code>SignedContextV1[]</code> but could also be used to hash a
single <code>SignedContextV1</code> in isolation. Avoids allocating memory by
hashing each struct field in sequence within the memory scratch space.</p>
<pre><code class="language-solidity">function hash(SignedContextV1 memory signedContext) internal pure returns (bytes32 hashed);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signedContext</code></td><td><code>SignedContextV1</code></td><td>The signed context to hash.</td></tr>
</tbody></table>
</div>
<h3 id="hash-1"><a class="header" href="#hash-1">hash</a></h3>
<p>Standard hashing process over a list of signed contexts. Situationally
useful if the calling contract wants to record that it has seen a set of
signed data then later compare it against some input (e.g. to ensure that
many calls of some function all share the same input values). Note that
unlike the internals of <code>build</code>, this hashes over the signer and the
signature, to ensure that some data cannot be re-signed and used under
a different provenance later.</p>
<pre><code class="language-solidity">function hash(SignedContextV1[] memory signedContexts) internal pure returns (bytes32 hashed);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>signedContexts</code></td><td><code>SignedContextV1[]</code></td><td>The list of signed contexts to hash over.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>hashed</code></td><td><code>bytes32</code></td><td>The hash of the signed contexts.</td></tr>
</tbody></table>
</div>
<h3 id="build"><a class="header" href="#build">build</a></h3>
<p>Builds a standard 2-dimensional context array from base, calling and
signed contexts. Note that &quot;columns&quot; of a context array refer to each
<code>uint256[]</code> and each item within a <code>uint256[]</code> is a &quot;row&quot;.</p>
<pre><code class="language-solidity">function build(uint256[][] memory baseContext, SignedContextV1[] memory signedContexts)
    internal
    view
    returns (uint256[][] memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>baseContext</code></td><td><code>uint256[][]</code></td><td>Anything the calling contract can provide which MAY include input from the <code>msg.sender</code> of the calling contract. The default base context from <code>LibContext.base()</code> DOES NOT need to be provided by the caller, this matrix MAY be empty and will be simply merged into the final context. The base context matrix MUST contain a consistent number of columns from the calling contract so that the expression can always predict how many unsigned columns there will be when it runs.</td></tr>
<tr><td><code>signedContexts</code></td><td><code>SignedContextV1[]</code></td><td>Signed contexts are provided by the <code>msg.sender</code> but signed by a third party. The expression (author) defines <em>who</em> may sign and the calling contract authenticates the signature over the signed data. Technically <code>build</code> handles all the authentication inline for the calling contract so if some context builds it can be treated as authentic. The builder WILL REVERT if any of the signatures are invalid. Note two things about the structure of the final built context re: signed contexts: - The first column is a list of the signers in order of what they signed - The <code>msg.sender</code> can provide an arbitrary number of signed contexts so expressions DO NOT know exactly how many columns there are. The expression is responsible for defining e.g. a domain separator in a position that would force signed context to be provided in the &quot;correct&quot; order, rather than relying on the <code>msg.sender</code> to honestly present data in any particular structure/order.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="libdeployerdiscoverable"><a class="header" href="#libdeployerdiscoverable">LibDeployerDiscoverable</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/caller/LibDeployerDiscoverable.sol">Git Source</a></p>
<h2 id="functions-30"><a class="header" href="#functions-30">Functions</a></h2>
<h3 id="touchdeployerv3"><a class="header" href="#touchdeployerv3">touchDeployerV3</a></h3>
<p>Hack so that some deployer will emit an event with the sender as the
caller of <code>touchDeployer</code>. This MAY be needed by indexers such as
subgraph that can only index events from the first moment they are aware
of some contract. The deployer MUST be registered in ERC1820 registry
before it is touched, THEN the caller meta MUST be emitted after the
deployer is touched. This allows indexers such as subgraph to index the
deployer, then see the caller, then see the caller's meta emitted in the
same transaction.
This is NOT required if ANY other expression is deployed in the same
transaction as the caller meta, there only needs to be one expression on
ANY deployer known to ERC1820.</p>
<pre><code class="language-solidity">function touchDeployerV3(address deployer) internal;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libencodeddispatch"><a class="header" href="#libencodeddispatch">LibEncodedDispatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/caller/LibEncodedDispatch.sol">Git Source</a></p>
<p>Establishes and implements a convention for encoding an interpreter
dispatch. Handles encoding of several things required for efficient dispatch.</p>
<h2 id="functions-31"><a class="header" href="#functions-31">Functions</a></h2>
<h3 id="encode2"><a class="header" href="#encode2">encode2</a></h3>
<p>Builds an <code>EncodedDispatch</code> from its constituent parts.</p>
<pre><code class="language-solidity">function encode2(address expression, SourceIndexV2 sourceIndex, uint256 maxOutputs)
    internal
    pure
    returns (EncodedDispatch);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expression</code></td><td><code>address</code></td><td>The onchain address of the expression to run.</td></tr>
<tr><td><code>sourceIndex</code></td><td><code>SourceIndexV2</code></td><td>The index of the source to run within the expression as an entrypoint.</td></tr>
<tr><td><code>maxOutputs</code></td><td><code>uint256</code></td><td>The maximum outputs the caller can meaningfully use. If the interpreter returns a larger stack than this it is merely wasting gas across the external call boundary.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>EncodedDispatch</code></td><td>The encoded dispatch.</td></tr>
</tbody></table>
</div>
<h3 id="decode2"><a class="header" href="#decode2">decode2</a></h3>
<pre><code class="language-solidity">function decode2(EncodedDispatch dispatch) internal pure returns (address, SourceIndexV2, uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libevaluable"><a class="header" href="#libevaluable">LibEvaluable</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/caller/LibEvaluable.sol">Git Source</a></p>
<p>Common logic to provide consistent implementations of common tasks
that could be arbitrarily/ambiguously implemented, but work much better if
consistently implemented.</p>
<h2 id="functions-32"><a class="header" href="#functions-32">Functions</a></h2>
<h3 id="hash-2"><a class="header" href="#hash-2">hash</a></h3>
<p>Hashes an <code>Evaluable</code>, ostensibly so that only the hash need be stored,
thus only storing a single <code>uint256</code> instead of 3x <code>uint160</code>.</p>
<pre><code class="language-solidity">function hash(EvaluableV2 memory evaluable) internal pure returns (bytes32 evaluableHash);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>evaluable</code></td><td><code>EvaluableV2</code></td><td>The evaluable to hash.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>evaluableHash</code></td><td><code>bytes32</code></td><td>Standard hash of the evaluable.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-10"><a class="header" href="#contents-10">Contents</a></h1>
<ul>
<li><a href="src/lib/compile/LibCompile.sol/library.LibCompile.html">LibCompile</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libcompile"><a class="header" href="#libcompile">LibCompile</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/compile/LibCompile.sol">Git Source</a></p>
<h2 id="functions-33"><a class="header" href="#functions-33">Functions</a></h2>
<h3 id="unsafecompile"><a class="header" href="#unsafecompile">unsafeCompile</a></h3>
<p>Given a source in opcodes compile to an equivalent source with real
function pointers for a given Interpreter contract. The &quot;compilation&quot;
involves simply replacing the opcode with the pointer at the index of
the opcode. i.e. opcode 4 will be replaced with <code>pointers_[4]</code>.
Relies heavily on the integrity checks ensuring opcodes used are not OOB
and that the pointers provided are valid and in the correct order. As the
expression deployer is typically handling compilation during
serialization, NOT the interpreter, the interpreter MUST guard against
the compilation being garbage or outright hostile during <code>eval</code> by
pointing to arbitrary internal functions of the interpreter.</p>
<pre><code class="language-solidity">function unsafeCompile(bytes memory source, bytes memory pointers) internal pure;
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>source</code></td><td><code>bytes</code></td><td>The input source as index based opcodes.</td></tr>
<tr><td><code>pointers</code></td><td><code>bytes</code></td><td>The function pointers ordered by index to replace the index based opcodes with.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-11"><a class="header" href="#contents-11">Contents</a></h1>
<ul>
<li><a href="src/lib/eval/LibEvalNP.sol/error.InputsLengthMismatch.html">InputsLengthMismatch</a></li>
<li><a href="src/lib/eval/LibEvalNP.sol/library.LibEvalNP.html">LibEvalNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inputslengthmismatch"><a class="header" href="#inputslengthmismatch">InputsLengthMismatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/eval/LibEvalNP.sol">Git Source</a></p>
<p>Thrown when the inputs length does not match the expected inputs length.</p>
<pre><code class="language-solidity">error InputsLengthMismatch(uint256 expected, uint256 actual);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>expected</code></td><td><code>uint256</code></td><td>The expected number of inputs.</td></tr>
<tr><td><code>actual</code></td><td><code>uint256</code></td><td>The actual number of inputs.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="libevalnp"><a class="header" href="#libevalnp">LibEvalNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/eval/LibEvalNP.sol">Git Source</a></p>
<h2 id="functions-34"><a class="header" href="#functions-34">Functions</a></h2>
<h3 id="evalloopnp"><a class="header" href="#evalloopnp">evalLoopNP</a></h3>
<pre><code class="language-solidity">function evalLoopNP(InterpreterStateNP memory state, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="eval2-2"><a class="header" href="#eval2-2">eval2</a></h3>
<pre><code class="language-solidity">function eval2(InterpreterStateNP memory state, uint256[] memory inputs, uint256 maxOutputs)
    internal
    view
    returns (uint256[] memory, uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-12"><a class="header" href="#contents-12">Contents</a></h1>
<ul>
<li><a href="src/lib/extern/LibExtern.sol/library.LibExtern.html">LibExtern</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libextern"><a class="header" href="#libextern">LibExtern</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/extern/LibExtern.sol">Git Source</a></p>
<h2 id="functions-35"><a class="header" href="#functions-35">Functions</a></h2>
<h3 id="encodeexterndispatch"><a class="header" href="#encodeexterndispatch">encodeExternDispatch</a></h3>
<p>Converts an opcode and operand pair into a single 32-byte word.
The encoding scheme is:</p>
<ul>
<li>bits [0,16): the operand</li>
<li>bits [16,32): the opcode
IMPORTANT: The encoding process does not check that either the opcode or
operand fit within 16 bits. This is the responsibility of the caller.</li>
</ul>
<pre><code class="language-solidity">function encodeExternDispatch(uint256 opcode, Operand operand) internal pure returns (ExternDispatch);
</code></pre>
<h3 id="decodeexterndispatch"><a class="header" href="#decodeexterndispatch">decodeExternDispatch</a></h3>
<p>Inverse of <code>encodeExternDispatch</code>.</p>
<pre><code class="language-solidity">function decodeExternDispatch(ExternDispatch dispatch) internal pure returns (uint256, Operand);
</code></pre>
<h3 id="encodeexterncall"><a class="header" href="#encodeexterncall">encodeExternCall</a></h3>
<p>Encodes an extern address and dispatch pair into a single 32-byte word.
This is the full data required to actually call an extern contract.
The encoding scheme is:</p>
<ul>
<li>bits [0,160): the address of the extern contract</li>
<li>bits [160,176): the dispatch operand</li>
<li>bits [176,192): the dispatch opcode
Note that the high bits are implied by a correctly encoded
<code>ExternDispatch</code>. Use <code>encodeExternDispatch</code> to ensure this.
IMPORTANT: The encoding process does not check that any of the values
fit within their respective bit ranges. This is the responsibility of
the caller.</li>
</ul>
<pre><code class="language-solidity">function encodeExternCall(IInterpreterExternV3 extern, ExternDispatch dispatch)
    internal
    pure
    returns (EncodedExternDispatch);
</code></pre>
<h3 id="decodeexterncall"><a class="header" href="#decodeexterncall">decodeExternCall</a></h3>
<p>Inverse of <code>encodeExternCall</code>.</p>
<pre><code class="language-solidity">function decodeExternCall(EncodedExternDispatch dispatch)
    internal
    pure
    returns (IInterpreterExternV3, ExternDispatch);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-13"><a class="header" href="#contents-13">Contents</a></h1>
<ul>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.EntrypointMissing.html">EntrypointMissing</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.EntrypointNonZeroInput.html">EntrypointNonZeroInput</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.BadOpInputsLength.html">BadOpInputsLength</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackUnderflow.html">StackUnderflow</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackUnderflowHighwater.html">StackUnderflowHighwater</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackAllocationMismatch.html">StackAllocationMismatch</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/error.StackOutputsMismatch.html">StackOutputsMismatch</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/struct.IntegrityCheckStateNP.html">IntegrityCheckStateNP</a></li>
<li><a href="src/lib/integrity/LibIntegrityCheckNP.sol/library.LibIntegrityCheckNP.html">LibIntegrityCheckNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="entrypointmissing"><a class="header" href="#entrypointmissing">EntrypointMissing</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p><em>There are more entrypoints defined by the minimum stack outputs than
there are provided sources. This means the calling contract WILL attempt to
eval a dangling reference to a non-existent source at some point, so this
MUST REVERT.</em></p>
<pre><code class="language-solidity">error EntrypointMissing(uint256 expectedEntrypoints, uint256 actualEntrypoints);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="entrypointnonzeroinput"><a class="header" href="#entrypointnonzeroinput">EntrypointNonZeroInput</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p>Thrown when some entrypoint has non-zero inputs. This is not allowed as
only internal dispatches can have source level inputs.</p>
<pre><code class="language-solidity">error EntrypointNonZeroInput(uint256 entrypointIndex, uint256 inputsLength);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="badopinputslength"><a class="header" href="#badopinputslength">BadOpInputsLength</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p>The bytecode and integrity function disagree on number of inputs.</p>
<pre><code class="language-solidity">error BadOpInputsLength(uint256 opIndex, uint256 calculatedInputs, uint256 bytecodeInputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stackunderflow"><a class="header" href="#stackunderflow">StackUnderflow</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p>The stack underflowed during integrity check.</p>
<pre><code class="language-solidity">error StackUnderflow(uint256 opIndex, uint256 stackIndex, uint256 calculatedInputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stackunderflowhighwater"><a class="header" href="#stackunderflowhighwater">StackUnderflowHighwater</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p>The stack underflowed the highwater during integrity check.</p>
<pre><code class="language-solidity">error StackUnderflowHighwater(uint256 opIndex, uint256 stackIndex, uint256 stackHighwater);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stackallocationmismatch"><a class="header" href="#stackallocationmismatch">StackAllocationMismatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p>The bytecode stack allocation does not match the allocation calculated by
the integrity check.</p>
<pre><code class="language-solidity">error StackAllocationMismatch(uint256 stackMaxIndex, uint256 bytecodeAllocation);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="stackoutputsmismatch"><a class="header" href="#stackoutputsmismatch">StackOutputsMismatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<p>The final stack index does not match the bytecode outputs.</p>
<pre><code class="language-solidity">error StackOutputsMismatch(uint256 stackIndex, uint256 bytecodeOutputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="integritycheckstatenp"><a class="header" href="#integritycheckstatenp">IntegrityCheckStateNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<pre><code class="language-solidity">struct IntegrityCheckStateNP {
    uint256 stackIndex;
    uint256 stackMaxIndex;
    uint256 readHighwater;
    uint256[] constants;
    uint256 opIndex;
    bytes bytecode;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libintegritychecknp"><a class="header" href="#libintegritychecknp">LibIntegrityCheckNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/integrity/LibIntegrityCheckNP.sol">Git Source</a></p>
<h2 id="functions-36"><a class="header" href="#functions-36">Functions</a></h2>
<h3 id="newstate"><a class="header" href="#newstate">newState</a></h3>
<pre><code class="language-solidity">function newState(bytes memory bytecode, uint256 stackIndex, uint256[] memory constants)
    internal
    pure
    returns (IntegrityCheckStateNP memory);
</code></pre>
<h3 id="integritycheck2"><a class="header" href="#integritycheck2">integrityCheck2</a></h3>
<pre><code class="language-solidity">function integrityCheck2(bytes memory fPointers, bytes memory bytecode, uint256[] memory constants)
    internal
    view
    returns (bytes memory io);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-14"><a class="header" href="#contents-14">Contents</a></h1>
<ul>
<li><a href="src/lib/ns/LibNamespace.sol/library.LibNamespace.html">LibNamespace</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libnamespace"><a class="header" href="#libnamespace">LibNamespace</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/ns/LibNamespace.sol">Git Source</a></p>
<h2 id="functions-37"><a class="header" href="#functions-37">Functions</a></h2>
<h3 id="qualifynamespace"><a class="header" href="#qualifynamespace">qualifyNamespace</a></h3>
<p>Standard way to elevate a caller-provided state namespace to a universal
namespace that is disjoint from all other caller-provided namespaces.
Essentially just hashes the <code>msg.sender</code> into the state namespace as-is.
This is deterministic such that the same combination of state namespace
and caller will produce the same fully qualified namespace, even across
multiple transactions/blocks.</p>
<pre><code class="language-solidity">function qualifyNamespace(StateNamespace stateNamespace, address sender)
    internal
    pure
    returns (FullyQualifiedNamespace qualifiedNamespace);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>stateNamespace</code></td><td><code>StateNamespace</code></td><td>The state namespace as specified by the caller.</td></tr>
<tr><td><code>sender</code></td><td><code>address</code></td><td>The caller this namespace is bound to.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>qualifiedNamespace</code></td><td><code>FullyQualifiedNamespace</code></td><td>A fully qualified namespace that cannot collide with any other state namespace specified by any other caller.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="contents-15"><a class="header" href="#contents-15">Contents</a></h1>
<ul>
<li><a href="src/lib/op//src/lib/op/00">00</a></li>
<li><a href="src/lib/op//src/lib/op/bitwise">bitwise</a></li>
<li><a href="src/lib/op//src/lib/op/call">call</a></li>
<li><a href="src/lib/op//src/lib/op/context">context</a></li>
<li><a href="src/lib/op//src/lib/op/crypto">crypto</a></li>
<li><a href="src/lib/op//src/lib/op/erc20">erc20</a></li>
<li><a href="src/lib/op//src/lib/op/erc5313">erc5313</a></li>
<li><a href="src/lib/op//src/lib/op/erc721">erc721</a></li>
<li><a href="src/lib/op//src/lib/op/evm">evm</a></li>
<li><a href="src/lib/op//src/lib/op/logic">logic</a></li>
<li><a href="src/lib/op//src/lib/op/math">math</a></li>
<li><a href="src/lib/op//src/lib/op/store">store</a></li>
<li><a href="src/lib/op//src/lib/op/uniswap">uniswap</a></li>
<li><a href="src/lib/op/LibAllStandardOpsNP.sol/library.LibAllStandardOpsNP.html">LibAllStandardOpsNP</a></li>
<li><a href="src/lib/op/LibAllStandardOpsNP.sol/constants.LibAllStandardOpsNP.html">LibAllStandardOpsNP constants</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-16"><a class="header" href="#contents-16">Contents</a></h1>
<ul>
<li><a href="src/lib/op/00/LibOpConstantNP.sol/error.OutOfBoundsConstantRead.html">OutOfBoundsConstantRead</a></li>
<li><a href="src/lib/op/00/LibOpConstantNP.sol/library.LibOpConstantNP.html">LibOpConstantNP</a></li>
<li><a href="src/lib/op/00/LibOpExternNP.sol/error.OutOfBoundsConstantRead.html">OutOfBoundsConstantRead</a></li>
<li><a href="src/lib/op/00/LibOpExternNP.sol/error.BadOutputsLength.html">BadOutputsLength</a></li>
<li><a href="src/lib/op/00/LibOpExternNP.sol/library.LibOpExternNP.html">LibOpExternNP</a></li>
<li><a href="src/lib/op/00/LibOpStackNP.sol/error.OutOfBoundsStackRead.html">OutOfBoundsStackRead</a></li>
<li><a href="src/lib/op/00/LibOpStackNP.sol/library.LibOpStackNP.html">LibOpStackNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="outofboundsconstantread"><a class="header" href="#outofboundsconstantread">OutOfBoundsConstantRead</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpConstantNP.sol">Git Source</a></p>
<p>Thrown when a constant read index is outside the constants array.</p>
<pre><code class="language-solidity">error OutOfBoundsConstantRead(uint256 opIndex, uint256 constantsLength, uint256 constantRead);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopconstantnp"><a class="header" href="#libopconstantnp">LibOpConstantNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpConstantNP.sol">Git Source</a></p>
<h2 id="functions-38"><a class="header" href="#functions-38">Functions</a></h2>
<h3 id="integrity-1"><a class="header" href="#integrity-1">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory state, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-1"><a class="header" href="#run-1">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn"><a class="header" href="#referencefn">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory state, Operand operand, uint256[] memory)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="outofboundsconstantread-1"><a class="header" href="#outofboundsconstantread-1">OutOfBoundsConstantRead</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpExternNP.sol">Git Source</a></p>
<p>Thrown when a constant read index is outside the constants array.</p>
<pre><code class="language-solidity">error OutOfBoundsConstantRead(uint256 opIndex, uint256 constantsLength, uint256 constantRead);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="badoutputslength"><a class="header" href="#badoutputslength">BadOutputsLength</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpExternNP.sol">Git Source</a></p>
<p>Thrown when the outputs length is not equal to the expected length.</p>
<pre><code class="language-solidity">error BadOutputsLength(uint256 expectedLength, uint256 actualLength);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopexternnp"><a class="header" href="#libopexternnp">LibOpExternNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpExternNP.sol">Git Source</a></p>
<p>Implementation of calling an external contract.</p>
<h2 id="functions-39"><a class="header" href="#functions-39">Functions</a></h2>
<h3 id="integrity-2"><a class="header" href="#integrity-2">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory state, Operand operand) internal view returns (uint256, uint256);
</code></pre>
<h3 id="run-2"><a class="header" href="#run-2">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-1"><a class="header" href="#referencefn-1">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory state, Operand operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="outofboundsstackread"><a class="header" href="#outofboundsstackread">OutOfBoundsStackRead</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpStackNP.sol">Git Source</a></p>
<p>Thrown when a stack read index is outside the current stack top.</p>
<pre><code class="language-solidity">error OutOfBoundsStackRead(uint256 opIndex, uint256 stackTopIndex, uint256 stackRead);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopstacknp"><a class="header" href="#libopstacknp">LibOpStackNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/00/LibOpStackNP.sol">Git Source</a></p>
<h2 id="functions-40"><a class="header" href="#functions-40">Functions</a></h2>
<h3 id="integrity-3"><a class="header" href="#integrity-3">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory state, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-3"><a class="header" href="#run-3">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-17"><a class="header" href="#contents-17">Contents</a></h1>
<ul>
<li><a href="src/lib/op/bitwise/LibOpBitwiseAndNP.sol/library.LibOpBitwiseAndNP.html">LibOpBitwiseAndNP</a></li>
<li><a href="src/lib/op/bitwise/LibOpBitwiseOrNP.sol/library.LibOpBitwiseOrNP.html">LibOpBitwiseOrNP</a></li>
<li><a href="src/lib/op/bitwise/LibOpCtPopNP.sol/library.LibOpCtPopNP.html">LibOpCtPopNP</a></li>
<li><a href="src/lib/op/bitwise/LibOpDecodeBitsNP.sol/library.LibOpDecodeBitsNP.html">LibOpDecodeBitsNP</a></li>
<li><a href="src/lib/op/bitwise/LibOpEncodeBitsNP.sol/library.LibOpEncodeBitsNP.html">LibOpEncodeBitsNP</a></li>
<li><a href="src/lib/op/bitwise/LibOpShiftBitsLeftNP.sol/library.LibOpShiftBitsLeftNP.html">LibOpShiftBitsLeftNP</a></li>
<li><a href="src/lib/op/bitwise/LibOpShiftBitsRightNP.sol/library.LibOpShiftBitsRightNP.html">LibOpShiftBitsRightNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopbitwiseandnp"><a class="header" href="#libopbitwiseandnp">LibOpBitwiseAndNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpBitwiseAndNP.sol">Git Source</a></p>
<p>Opcode for computing bitwise AND from the top two items on the stack.</p>
<h2 id="functions-41"><a class="header" href="#functions-41">Functions</a></h2>
<h3 id="integrity-4"><a class="header" href="#integrity-4">integrity</a></h3>
<p>The operand does nothing. Always 2 inputs and 1 output.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-4"><a class="header" href="#run-4">run</a></h3>
<p>Bitwise AND the top two items on the stack.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-2"><a class="header" href="#referencefn-2">referenceFn</a></h3>
<p>Reference implementation for bitwise AND.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopbitwiseornp"><a class="header" href="#libopbitwiseornp">LibOpBitwiseOrNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpBitwiseOrNP.sol">Git Source</a></p>
<p>Opcode for computing bitwise OR from the top two items on the stack.</p>
<h2 id="functions-42"><a class="header" href="#functions-42">Functions</a></h2>
<h3 id="integrity-5"><a class="header" href="#integrity-5">integrity</a></h3>
<p>The operand does nothing. Always 2 inputs and 1 output.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-5"><a class="header" href="#run-5">run</a></h3>
<p>Bitwise OR the top two items on the stack.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-3"><a class="header" href="#referencefn-3">referenceFn</a></h3>
<p>Reference implementation for bitwise OR.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopctpopnp"><a class="header" href="#libopctpopnp">LibOpCtPopNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpCtPopNP.sol">Git Source</a></p>
<p>An opcode that counts the number of bits set in a word. This is
called ctpop because that's the name of this kind of thing elsewhere, but
the more common name is &quot;population count&quot; or &quot;Hamming weight&quot;. The word
in the standard ops lib is called <code>bitwise-count-ones</code>, which follows the
Rust naming convention.
There is no evm opcode for this, so we have to implement it ourselves.</p>
<h2 id="functions-43"><a class="header" href="#functions-43">Functions</a></h2>
<h3 id="integrity-6"><a class="header" href="#integrity-6">integrity</a></h3>
<p>ctpop unconditionally takes one value and returns one value.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-6"><a class="header" href="#run-6">run</a></h3>
<p>Output is the number of bits set to one in the input. Thin wrapper around
<code>LibCtPop.ctpop</code>.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-4"><a class="header" href="#referencefn-4">referenceFn</a></h3>
<p>The reference implementation of ctpop.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecodebitsnp"><a class="header" href="#libopdecodebitsnp">LibOpDecodeBitsNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpDecodeBitsNP.sol">Git Source</a></p>
<p>Opcode for decoding binary data from a 256 bit value that was encoded
with LibOpEncodeBitsNP.</p>
<h2 id="functions-44"><a class="header" href="#functions-44">Functions</a></h2>
<h3 id="integrity-7"><a class="header" href="#integrity-7">integrity</a></h3>
<p>Decode takes a single value and returns the decoded value.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory state, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-7"><a class="header" href="#run-7">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-5"><a class="header" href="#referencefn-5">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopencodebitsnp"><a class="header" href="#libopencodebitsnp">LibOpEncodeBitsNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpEncodeBitsNP.sol">Git Source</a></p>
<p>Opcode for encoding binary data into a 256 bit value.</p>
<h2 id="functions-45"><a class="header" href="#functions-45">Functions</a></h2>
<h3 id="integrity-8"><a class="header" href="#integrity-8">integrity</a></h3>
<p>Encode takes two values and returns one value. The first value is the
source, the second value is the target.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-8"><a class="header" href="#run-8">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-6"><a class="header" href="#referencefn-6">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopshiftbitsleftnp"><a class="header" href="#libopshiftbitsleftnp">LibOpShiftBitsLeftNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpShiftBitsLeftNP.sol">Git Source</a></p>
<p>Opcode for shifting bits left. The shift amount is taken from the
operand so it is compile time constant.</p>
<h2 id="functions-46"><a class="header" href="#functions-46">Functions</a></h2>
<h3 id="integrity-9"><a class="header" href="#integrity-9">integrity</a></h3>
<p>Shift bits left by the amount specified in the operand.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-9"><a class="header" href="#run-9">run</a></h3>
<p>Shift bits left by the amount specified in the operand.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-7"><a class="header" href="#referencefn-7">referenceFn</a></h3>
<p>Reference implementation for shifting bits left.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopshiftbitsrightnp"><a class="header" href="#libopshiftbitsrightnp">LibOpShiftBitsRightNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/bitwise/LibOpShiftBitsRightNP.sol">Git Source</a></p>
<p>Opcode for shifting bits right. The shift amount is taken from the
operand so it is compile time constant.</p>
<h2 id="functions-47"><a class="header" href="#functions-47">Functions</a></h2>
<h3 id="integrity-10"><a class="header" href="#integrity-10">integrity</a></h3>
<p>Shift bits right by the amount specified in the operand.</p>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-10"><a class="header" href="#run-10">run</a></h3>
<p>Shift bits right by the amount specified in the operand.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-8"><a class="header" href="#referencefn-8">referenceFn</a></h3>
<p>Reference implementation for shifting bits right.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-18"><a class="header" href="#contents-18">Contents</a></h1>
<ul>
<li><a href="src/lib/op/call/LibOpCallNP.sol/error.CallOutputsExceedSource.html">CallOutputsExceedSource</a></li>
<li><a href="src/lib/op/call/LibOpCallNP.sol/library.LibOpCallNP.html">LibOpCallNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="calloutputsexceedsource"><a class="header" href="#calloutputsexceedsource">CallOutputsExceedSource</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/call/LibOpCallNP.sol">Git Source</a></p>
<p>Thrown when the outputs requested by the operand exceed the outputs
available from the source.</p>
<pre><code class="language-solidity">error CallOutputsExceedSource(uint256 sourceOutputs, uint256 outputs);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>sourceOutputs</code></td><td><code>uint256</code></td><td>The number of outputs available from the source.</td></tr>
<tr><td><code>outputs</code></td><td><code>uint256</code></td><td>The number of outputs requested by the operand.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="libopcallnp"><a class="header" href="#libopcallnp">LibOpCallNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/call/LibOpCallNP.sol">Git Source</a></p>
<p>Contains the call operation. This allows sources to be treated in a
function-like manner. Primarily intended as a way for expression authors to
create reusable logic inline with their expression, in a way that mimics how
words and stack consumption works at the Solidity level.
Similarities between <code>call</code> and a traditional function:</p>
<ul>
<li>The source is called with a set of 0+ inputs.</li>
<li>The source returns a set of 0+ outputs.</li>
<li>The source has a fixed number of inputs and outputs.</li>
<li>When the source executes it has its own stack/scope.</li>
<li>Sources use lexical scoping rules for named LHS items.</li>
<li>The source can be called from multiple places.</li>
<li>The source can <code>call</code> other sources.</li>
<li>The source is stateless across calls
(although it can use words like get/set to read/write external state).</li>
<li>The caller and callee have to agree on the number of inputs
(but not outputs, see below).</li>
<li>Generally speaking, the behaviour of a source can be reasoned about
without needing to know the context in which it is called. Which is the
basic requirement for reusability.
Differences between <code>call</code> and a traditional function:</li>
<li>The caller defines the number of outputs to be returned, NOT the callee.
This is because the caller is responsible for allocating space on the
stack for the outputs, and the callee is responsible for providing the
outputs. The only limitation is that the caller cannot request more
outputs than the callee has available. This means that two calls to the
same source can return different numbers of outputs in different contexts.</li>
<li>The inputs to a source are considered to be the top of the callee's stack
from the perspective of the caller. This means that the inputs are eligible
to be read as outputs, if the caller chooses to do so.</li>
<li>The sources are not named, they are identified by their index in the
bytecode. Tooling can provide sugar over this but the underlying
representation is just an index.</li>
<li>Sources are not &quot;first class&quot; like functions often are, i.e. they cannot
be passed as arguments to other sources or otherwise be treated as values.</li>
<li>Recursion is not supported. This is because currently there is no laziness
in the interpreter, so a recursive call would result in an infinite loop
unconditionally (even when wrapped in an <code>if</code>). This may change in the
future.</li>
<li>The memory allocation for a source must be known at compile time.</li>
<li>There's no way to return early from a source.
The order of inputs and outputs is designed so that the visual representation
of a source call matches the visual representation of a function call. This
requires some reversals of order &quot;under the hood&quot; while copying data around
but it makes the behaviour of <code>call</code> more intuitive.
Illustrative example:</li>
</ul>
<pre><code>* Final result */
* a = 2 */
* b = 9 */
a b: call&lt;1 2&gt;(10 5); ten five:, a b: int-div(ten five) 9;
</code></pre>
<h2 id="functions-48"><a class="header" href="#functions-48">Functions</a></h2>
<h3 id="integrity-11"><a class="header" href="#integrity-11">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory state, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-11"><a class="header" href="#run-11">run</a></h3>
<p>The <code>call</code> word is conceptually very simple. It takes a source index, a
number of outputs, and a number of inputs. It then runs the standard
eval loop for the source, with a starting stack pointer above the inputs,
and then copies the outputs to the calling stack.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-19"><a class="header" href="#contents-19">Contents</a></h1>
<ul>
<li><a href="src/lib/op/context/LibOpContextNP.sol/library.LibOpContextNP.html">LibOpContextNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopcontextnp"><a class="header" href="#libopcontextnp">LibOpContextNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/context/LibOpContextNP.sol">Git Source</a></p>
<h2 id="functions-49"><a class="header" href="#functions-49">Functions</a></h2>
<h3 id="integrity-12"><a class="header" href="#integrity-12">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-12"><a class="header" href="#run-12">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-9"><a class="header" href="#referencefn-9">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory state, Operand operand, uint256[] memory)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-20"><a class="header" href="#contents-20">Contents</a></h1>
<ul>
<li><a href="src/lib/op/crypto/LibOpHashNP.sol/library.LibOpHashNP.html">LibOpHashNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libophashnp"><a class="header" href="#libophashnp">LibOpHashNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/crypto/LibOpHashNP.sol">Git Source</a></p>
<h2 id="functions-50"><a class="header" href="#functions-50">Functions</a></h2>
<h3 id="integrity-13"><a class="header" href="#integrity-13">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-13"><a class="header" href="#run-13">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-10"><a class="header" href="#referencefn-10">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-21"><a class="header" href="#contents-21">Contents</a></h1>
<ul>
<li><a href="src/lib/op/erc20/LibOpERC20AllowanceNP.sol/library.LibOpERC20AllowanceNP.html">LibOpERC20AllowanceNP</a></li>
<li><a href="src/lib/op/erc20/LibOpERC20BalanceOfNP.sol/library.LibOpERC20BalanceOfNP.html">LibOpERC20BalanceOfNP</a></li>
<li><a href="src/lib/op/erc20/LibOpERC20TotalSupplyNP.sol/library.LibOpERC20TotalSupplyNP.html">LibOpERC20TotalSupplyNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboperc20allowancenp"><a class="header" href="#liboperc20allowancenp">LibOpERC20AllowanceNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/erc20/LibOpERC20AllowanceNP.sol">Git Source</a></p>
<p>Opcode for getting the current erc20 allowance of an account.</p>
<h2 id="functions-51"><a class="header" href="#functions-51">Functions</a></h2>
<h3 id="integrity-14"><a class="header" href="#integrity-14">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-14"><a class="header" href="#run-14">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-11"><a class="header" href="#referencefn-11">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboperc20balanceofnp"><a class="header" href="#liboperc20balanceofnp">LibOpERC20BalanceOfNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/erc20/LibOpERC20BalanceOfNP.sol">Git Source</a></p>
<p>Opcode for getting the current erc20 balance of an account.</p>
<h2 id="functions-52"><a class="header" href="#functions-52">Functions</a></h2>
<h3 id="integrity-15"><a class="header" href="#integrity-15">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-15"><a class="header" href="#run-15">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-12"><a class="header" href="#referencefn-12">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboperc20totalsupplynp"><a class="header" href="#liboperc20totalsupplynp">LibOpERC20TotalSupplyNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/erc20/LibOpERC20TotalSupplyNP.sol">Git Source</a></p>
<p>Opcode for ERC20 <code>totalSupply</code>.</p>
<h2 id="functions-53"><a class="header" href="#functions-53">Functions</a></h2>
<h3 id="integrity-16"><a class="header" href="#integrity-16">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-16"><a class="header" href="#run-16">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-13"><a class="header" href="#referencefn-13">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-22"><a class="header" href="#contents-22">Contents</a></h1>
<ul>
<li><a href="src/lib/op/erc5313/LibOpERC5313OwnerNP.sol/library.LibOpERC5313OwnerNP.html">LibOpERC5313OwnerNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboperc5313ownernp"><a class="header" href="#liboperc5313ownernp">LibOpERC5313OwnerNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/erc5313/LibOpERC5313OwnerNP.sol">Git Source</a></p>
<p>Opcode for ERC5313 <code>owner</code>.</p>
<h2 id="functions-54"><a class="header" href="#functions-54">Functions</a></h2>
<h3 id="integrity-17"><a class="header" href="#integrity-17">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-17"><a class="header" href="#run-17">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-14"><a class="header" href="#referencefn-14">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-23"><a class="header" href="#contents-23">Contents</a></h1>
<ul>
<li><a href="src/lib/op/erc721/LibOpERC721BalanceOfNP.sol/library.LibOpERC721BalanceOfNP.html">LibOpERC721BalanceOfNP</a></li>
<li><a href="src/lib/op/erc721/LibOpERC721OwnerOfNP.sol/library.LibOpERC721OwnerOfNP.html">LibOpERC721OwnerOfNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboperc721balanceofnp"><a class="header" href="#liboperc721balanceofnp">LibOpERC721BalanceOfNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/erc721/LibOpERC721BalanceOfNP.sol">Git Source</a></p>
<p>Opcode for getting the current erc721 balance of an account.</p>
<h2 id="functions-55"><a class="header" href="#functions-55">Functions</a></h2>
<h3 id="integrity-18"><a class="header" href="#integrity-18">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-18"><a class="header" href="#run-18">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-15"><a class="header" href="#referencefn-15">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboperc721ownerofnp"><a class="header" href="#liboperc721ownerofnp">LibOpERC721OwnerOfNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/erc721/LibOpERC721OwnerOfNP.sol">Git Source</a></p>
<p>Opcode for getting the current owner of an erc721 token.</p>
<h2 id="functions-56"><a class="header" href="#functions-56">Functions</a></h2>
<h3 id="integrity-19"><a class="header" href="#integrity-19">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-19"><a class="header" href="#run-19">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-16"><a class="header" href="#referencefn-16">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-24"><a class="header" href="#contents-24">Contents</a></h1>
<ul>
<li><a href="src/lib/op/evm/LibOpBlockNumberNP.sol/library.LibOpBlockNumberNP.html">LibOpBlockNumberNP</a></li>
<li><a href="src/lib/op/evm/LibOpChainIdNP.sol/library.LibOpChainIdNP.html">LibOpChainIdNP</a></li>
<li><a href="src/lib/op/evm/LibOpMaxUint256NP.sol/library.LibOpMaxUint256NP.html">LibOpMaxUint256NP</a></li>
<li><a href="src/lib/op/evm/LibOpTimestampNP.sol/library.LibOpTimestampNP.html">LibOpTimestampNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopblocknumbernp"><a class="header" href="#libopblocknumbernp">LibOpBlockNumberNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/evm/LibOpBlockNumberNP.sol">Git Source</a></p>
<h2 id="functions-57"><a class="header" href="#functions-57">Functions</a></h2>
<h3 id="integrity-20"><a class="header" href="#integrity-20">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-20"><a class="header" href="#run-20">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-17"><a class="header" href="#referencefn-17">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory) internal view returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopchainidnp"><a class="header" href="#libopchainidnp">LibOpChainIdNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/evm/LibOpChainIdNP.sol">Git Source</a></p>
<h2 id="functions-58"><a class="header" href="#functions-58">Functions</a></h2>
<h3 id="integrity-21"><a class="header" href="#integrity-21">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-21"><a class="header" href="#run-21">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-18"><a class="header" href="#referencefn-18">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory) internal view returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopmaxuint256np"><a class="header" href="#libopmaxuint256np">LibOpMaxUint256NP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/evm/LibOpMaxUint256NP.sol">Git Source</a></p>
<h2 id="functions-59"><a class="header" href="#functions-59">Functions</a></h2>
<h3 id="integrity-22"><a class="header" href="#integrity-22">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-22"><a class="header" href="#run-22">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-19"><a class="header" href="#referencefn-19">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory) internal pure returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboptimestampnp"><a class="header" href="#liboptimestampnp">LibOpTimestampNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/evm/LibOpTimestampNP.sol">Git Source</a></p>
<h2 id="functions-60"><a class="header" href="#functions-60">Functions</a></h2>
<h3 id="integrity-23"><a class="header" href="#integrity-23">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-23"><a class="header" href="#run-23">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-20"><a class="header" href="#referencefn-20">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory) internal view returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-25"><a class="header" href="#contents-25">Contents</a></h1>
<ul>
<li><a href="src/lib/op/logic/LibOpAnyNP.sol/library.LibOpAnyNP.html">LibOpAnyNP</a></li>
<li><a href="src/lib/op/logic/LibOpConditionsNP.sol/error.NoConditionsMet.html">NoConditionsMet</a></li>
<li><a href="src/lib/op/logic/LibOpConditionsNP.sol/library.LibOpConditionsNP.html">LibOpConditionsNP</a></li>
<li><a href="src/lib/op/logic/LibOpEnsureNP.sol/error.EnsureFailed.html">EnsureFailed</a></li>
<li><a href="src/lib/op/logic/LibOpEnsureNP.sol/library.LibOpEnsureNP.html">LibOpEnsureNP</a></li>
<li><a href="src/lib/op/logic/LibOpEqualToNP.sol/library.LibOpEqualToNP.html">LibOpEqualToNP</a></li>
<li><a href="src/lib/op/logic/LibOpEveryNP.sol/library.LibOpEveryNP.html">LibOpEveryNP</a></li>
<li><a href="src/lib/op/logic/LibOpGreaterThanNP.sol/library.LibOpGreaterThanNP.html">LibOpGreaterThanNP</a></li>
<li><a href="src/lib/op/logic/LibOpGreaterThanOrEqualToNP.sol/library.LibOpGreaterThanOrEqualToNP.html">LibOpGreaterThanOrEqualToNP</a></li>
<li><a href="src/lib/op/logic/LibOpIfNP.sol/library.LibOpIfNP.html">LibOpIfNP</a></li>
<li><a href="src/lib/op/logic/LibOpIsZeroNP.sol/library.LibOpIsZeroNP.html">LibOpIsZeroNP</a></li>
<li><a href="src/lib/op/logic/LibOpLessThanNP.sol/library.LibOpLessThanNP.html">LibOpLessThanNP</a></li>
<li><a href="src/lib/op/logic/LibOpLessThanOrEqualToNP.sol/library.LibOpLessThanOrEqualToNP.html">LibOpLessThanOrEqualToNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopanynp"><a class="header" href="#libopanynp">LibOpAnyNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpAnyNP.sol">Git Source</a></p>
<p>Opcode to return the first nonzero item on the stack up to the inputs
limit.</p>
<h2 id="functions-61"><a class="header" href="#functions-61">Functions</a></h2>
<h3 id="integrity-24"><a class="header" href="#integrity-24">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-24"><a class="header" href="#run-24">run</a></h3>
<p>ANY
ANY is the first nonzero item, else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-21"><a class="header" href="#referencefn-21">referenceFn</a></h3>
<p>Gas intensive reference implementation of ANY for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="noconditionsmet"><a class="header" href="#noconditionsmet">NoConditionsMet</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpConditionsNP.sol">Git Source</a></p>
<p>Thrown if no nonzero condition is found.</p>
<pre><code class="language-solidity">error NoConditionsMet(uint256 condCode);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>condCode</code></td><td><code>uint256</code></td><td>The condition code that was evaluated. This is the low 16 bits of the operand. Allows the author to provide more context about which condition failed if there is more than one in the expression.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="libopconditionsnp"><a class="header" href="#libopconditionsnp">LibOpConditionsNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpConditionsNP.sol">Git Source</a></p>
<p>Opcode to return the first nonzero item on the stack up to the inputs
limit.</p>
<h2 id="functions-62"><a class="header" href="#functions-62">Functions</a></h2>
<h3 id="integrity-25"><a class="header" href="#integrity-25">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-25"><a class="header" href="#run-25">run</a></h3>
<p><code>conditions</code>
Pairwise list of conditions and values. The first nonzero condition
evaluated puts its corresponding value on the stack. <code>conditions</code> is
eagerly evaluated. If no condition is nonzero, the expression will
revert. The number of inputs must be even. The number of outputs is 1.
If an author wants to provide some default value, they can set the last
condition to some nonzero constant value such as 1.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-22"><a class="header" href="#referencefn-22">referenceFn</a></h3>
<p>Gas intensive reference implementation of <code>condition</code> for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ensurefailed"><a class="header" href="#ensurefailed">EnsureFailed</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpEnsureNP.sol">Git Source</a></p>
<p>Thrown if a zero condition is found.</p>
<pre><code class="language-solidity">error EnsureFailed(uint256 ensureCode, uint256 errorIndex);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>ensureCode</code></td><td><code>uint256</code></td><td>The ensure code that was evaluated. This is the low 16 bits of the operand. Allows the author to provide more context about which condition failed if there is more than one in the expression.</td></tr>
<tr><td><code>errorIndex</code></td><td><code>uint256</code></td><td>The index of the condition that failed.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="libopensurenp"><a class="header" href="#libopensurenp">LibOpEnsureNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpEnsureNP.sol">Git Source</a></p>
<p>Opcode to revert if any condition is zero.</p>
<h2 id="functions-63"><a class="header" href="#functions-63">Functions</a></h2>
<h3 id="integrity-26"><a class="header" href="#integrity-26">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-26"><a class="header" href="#run-26">run</a></h3>
<p><code>ensure</code>
List of conditions. If any condition is zero, the expression will revert.
All conditions are eagerly evaluated and there are no outputs.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-23"><a class="header" href="#referencefn-23">referenceFn</a></h3>
<p>Gas intensive reference implementation of <code>ensure</code> for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopequaltonp"><a class="header" href="#libopequaltonp">LibOpEqualToNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpEqualToNP.sol">Git Source</a></p>
<p>Opcode to return 1 if the first item on the stack is equal to
the second item on the stack, else 0.</p>
<h2 id="functions-64"><a class="header" href="#functions-64">Functions</a></h2>
<h3 id="integrity-27"><a class="header" href="#integrity-27">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-27"><a class="header" href="#run-27">run</a></h3>
<p>EQ
EQ is 1 if the first item is equal to the second item, else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-24"><a class="header" href="#referencefn-24">referenceFn</a></h3>
<p>Gas intensive reference implementation of EQ for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopeverynp"><a class="header" href="#libopeverynp">LibOpEveryNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpEveryNP.sol">Git Source</a></p>
<p>Opcode to return the last item out of N items if they are all true,
else 0.</p>
<h2 id="functions-65"><a class="header" href="#functions-65">Functions</a></h2>
<h3 id="integrity-28"><a class="header" href="#integrity-28">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-28"><a class="header" href="#run-28">run</a></h3>
<p>EVERY is the last nonzero item, else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-25"><a class="header" href="#referencefn-25">referenceFn</a></h3>
<p>Gas intensive reference implementation of EVERY for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopgreaterthannp"><a class="header" href="#libopgreaterthannp">LibOpGreaterThanNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpGreaterThanNP.sol">Git Source</a></p>
<p>Opcode to return 1 if the first item on the stack is greater than
the second item on the stack, else 0.</p>
<h2 id="functions-66"><a class="header" href="#functions-66">Functions</a></h2>
<h3 id="integrity-29"><a class="header" href="#integrity-29">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-29"><a class="header" href="#run-29">run</a></h3>
<p>GT
GT is 1 if the first item is greater than the second item, else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-26"><a class="header" href="#referencefn-26">referenceFn</a></h3>
<p>Gas intensive reference implementation of GT for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopgreaterthanorequaltonp"><a class="header" href="#libopgreaterthanorequaltonp">LibOpGreaterThanOrEqualToNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpGreaterThanOrEqualToNP.sol">Git Source</a></p>
<p>Opcode to return 1 if the first item on the stack is greater than or
equal to the second item on the stack, else 0.</p>
<h2 id="functions-67"><a class="header" href="#functions-67">Functions</a></h2>
<h3 id="integrity-30"><a class="header" href="#integrity-30">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-30"><a class="header" href="#run-30">run</a></h3>
<p>GTE
GTE is 1 if the first item is greater than or equal to the second item,
else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-27"><a class="header" href="#referencefn-27">referenceFn</a></h3>
<p>Gas intensive reference implementation of GTE for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopifnp"><a class="header" href="#libopifnp">LibOpIfNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpIfNP.sol">Git Source</a></p>
<p>Opcode to choose between two values based on a condition. If is
eager, meaning both values are evaluated before the condition is checked.</p>
<h2 id="functions-68"><a class="header" href="#functions-68">Functions</a></h2>
<h3 id="integrity-31"><a class="header" href="#integrity-31">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-31"><a class="header" href="#run-31">run</a></h3>
<p>IF
IF is a conditional. If the first item on the stack is nonero, the second
item is returned, else the third item is returned.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-28"><a class="header" href="#referencefn-28">referenceFn</a></h3>
<p>Gas intensive reference implementation of IF for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopiszeronp"><a class="header" href="#libopiszeronp">LibOpIsZeroNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpIsZeroNP.sol">Git Source</a></p>
<p>Opcode to return 1 if the top item on the stack is zero, else 0.</p>
<h2 id="functions-69"><a class="header" href="#functions-69">Functions</a></h2>
<h3 id="integrity-32"><a class="header" href="#integrity-32">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-32"><a class="header" href="#run-32">run</a></h3>
<p>ISZERO
ISZERO is 1 if the top item is zero, else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-29"><a class="header" href="#referencefn-29">referenceFn</a></h3>
<p>Gas intensive reference implementation of ISZERO for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboplessthannp"><a class="header" href="#liboplessthannp">LibOpLessThanNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpLessThanNP.sol">Git Source</a></p>
<p>Opcode to return 1 if the first item on the stack is less than
the second item on the stack, else 0.</p>
<h2 id="functions-70"><a class="header" href="#functions-70">Functions</a></h2>
<h3 id="integrity-33"><a class="header" href="#integrity-33">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-33"><a class="header" href="#run-33">run</a></h3>
<p>LT
LT is 1 if the first item is less than the second item, else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-30"><a class="header" href="#referencefn-30">referenceFn</a></h3>
<p>Gas intensive reference implementation of LT for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liboplessthanorequaltonp"><a class="header" href="#liboplessthanorequaltonp">LibOpLessThanOrEqualToNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/logic/LibOpLessThanOrEqualToNP.sol">Git Source</a></p>
<p>Opcode to return 1 if the first item on the stack is less than or
equal to the second item on the stack, else 0.</p>
<h2 id="functions-71"><a class="header" href="#functions-71">Functions</a></h2>
<h3 id="integrity-34"><a class="header" href="#integrity-34">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-34"><a class="header" href="#run-34">run</a></h3>
<p>LTE
LTE is 1 if the first item is less than or equal to the second item,
else 0.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-31"><a class="header" href="#referencefn-31">referenceFn</a></h3>
<p>Gas intensive reference implementation of LTE for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-26"><a class="header" href="#contents-26">Contents</a></h1>
<ul>
<li><a href="src/lib/op/math//src/lib/op/math/decimal18">decimal18</a></li>
<li><a href="src/lib/op/math//src/lib/op/math/int">int</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-27"><a class="header" href="#contents-27">Contents</a></h1>
<ul>
<li><a href="src/lib/op/math/decimal18/LibOpDecimal18DivNP.sol/library.LibOpDecimal18DivNP.html">LibOpDecimal18DivNP</a></li>
<li><a href="src/lib/op/math/decimal18/LibOpDecimal18MulNP.sol/library.LibOpDecimal18MulNP.html">LibOpDecimal18MulNP</a></li>
<li><a href="src/lib/op/math/decimal18/LibOpDecimal18PowUNP.sol/library.LibOpDecimal18PowUNP.html">LibOpDecimal18PowUNP</a></li>
<li><a href="src/lib/op/math/decimal18/LibOpDecimal18Scale18DynamicNP.sol/library.LibOpDecimal18Scale18DynamicNP.html">LibOpDecimal18Scale18DynamicNP</a></li>
<li><a href="src/lib/op/math/decimal18/LibOpDecimal18Scale18NP.sol/library.LibOpDecimal18Scale18NP.html">LibOpDecimal18Scale18NP</a></li>
<li><a href="src/lib/op/math/decimal18/LibOpDecimal18ScaleNNP.sol/library.LibOpDecimal18ScaleNNP.html">LibOpDecimal18ScaleNNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecimal18divnp"><a class="header" href="#libopdecimal18divnp">LibOpDecimal18DivNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/decimal18/LibOpDecimal18DivNP.sol">Git Source</a></p>
<p>Used for reference implementation so that we have two independent
upstreams to compare against.</p>
<p>Opcode to div N 18 decimal fixed point values. Errors on overflow.</p>
<h2 id="functions-72"><a class="header" href="#functions-72">Functions</a></h2>
<h3 id="integrity-35"><a class="header" href="#integrity-35">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-35"><a class="header" href="#run-35">run</a></h3>
<p>decimal18-div
18 decimal fixed point division with implied overflow checks from PRB
Math.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-32"><a class="header" href="#referencefn-32">referenceFn</a></h3>
<p>Gas intensive reference implementation of division for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecimal18mulnp"><a class="header" href="#libopdecimal18mulnp">LibOpDecimal18MulNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/decimal18/LibOpDecimal18MulNP.sol">Git Source</a></p>
<p>Used for reference implementation so that we have two independent
upstreams to compare against.</p>
<p>Opcode to mul N 18 decimal fixed point values. Errors on overflow.</p>
<h2 id="functions-73"><a class="header" href="#functions-73">Functions</a></h2>
<h3 id="integrity-36"><a class="header" href="#integrity-36">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-36"><a class="header" href="#run-36">run</a></h3>
<p>decimal18-mul
18 decimal fixed point multiplication with implied overflow checks from
PRB Math.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-33"><a class="header" href="#referencefn-33">referenceFn</a></h3>
<p>Gas intensive reference implementation of multiplication for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecimal18powunp"><a class="header" href="#libopdecimal18powunp">LibOpDecimal18PowUNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/decimal18/LibOpDecimal18PowUNP.sol">Git Source</a></p>
<p>Opcode to pow N 18 decimal fixed point values to a uint256 power.</p>
<h2 id="functions-74"><a class="header" href="#functions-74">Functions</a></h2>
<h3 id="integrity-37"><a class="header" href="#integrity-37">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-37"><a class="header" href="#run-37">run</a></h3>
<p>decimal18-pow-u
18 decimal fixed point exponentiation with implied overflow checks from
PRB Math.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-34"><a class="header" href="#referencefn-34">referenceFn</a></h3>
<p>Gas intensive reference implementation of multiplication for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecimal18scale18dynamicnp"><a class="header" href="#libopdecimal18scale18dynamicnp">LibOpDecimal18Scale18DynamicNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/decimal18/LibOpDecimal18Scale18DynamicNP.sol">Git Source</a></p>
<p>Opcode for scaling a number to 18 decimal fixed point based on
runtime scale input.</p>
<h2 id="functions-75"><a class="header" href="#functions-75">Functions</a></h2>
<h3 id="integrity-38"><a class="header" href="#integrity-38">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-38"><a class="header" href="#run-38">run</a></h3>
<p>decimal18-scale18-dynamic
18 decimal fixed point scaling from runtime value.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-35"><a class="header" href="#referencefn-35">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecimal18scale18np"><a class="header" href="#libopdecimal18scale18np">LibOpDecimal18Scale18NP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/decimal18/LibOpDecimal18Scale18NP.sol">Git Source</a></p>
<p>Opcode for scaling a number to 18 decimal fixed point.</p>
<h2 id="functions-76"><a class="header" href="#functions-76">Functions</a></h2>
<h3 id="integrity-39"><a class="header" href="#integrity-39">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-39"><a class="header" href="#run-39">run</a></h3>
<p>decimal18-scale18
18 decimal fixed point scaling.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-36"><a class="header" href="#referencefn-36">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopdecimal18scalennp"><a class="header" href="#libopdecimal18scalennp">LibOpDecimal18ScaleNNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/decimal18/LibOpDecimal18ScaleNNP.sol">Git Source</a></p>
<p>Opcode for scaling a decimal18 number to some other scale N.</p>
<h2 id="functions-77"><a class="header" href="#functions-77">Functions</a></h2>
<h3 id="integrity-40"><a class="header" href="#integrity-40">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-40"><a class="header" href="#run-40">run</a></h3>
<p>decimal18-scale-n
Scale from 18 decimal to n decimal.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-37"><a class="header" href="#referencefn-37">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-28"><a class="header" href="#contents-28">Contents</a></h1>
<ul>
<li><a href="src/lib/op/math/int/LibOpIntAddNP.sol/library.LibOpIntAddNP.html">LibOpIntAddNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntDivNP.sol/library.LibOpIntDivNP.html">LibOpIntDivNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntExpNP.sol/library.LibOpIntExpNP.html">LibOpIntExpNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntMaxNP.sol/library.LibOpIntMaxNP.html">LibOpIntMaxNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntMinNP.sol/library.LibOpIntMinNP.html">LibOpIntMinNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntModNP.sol/library.LibOpIntModNP.html">LibOpIntModNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntMulNP.sol/library.LibOpIntMulNP.html">LibOpIntMulNP</a></li>
<li><a href="src/lib/op/math/int/LibOpIntSubNP.sol/library.LibOpIntSubNP.html">LibOpIntSubNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintaddnp"><a class="header" href="#libopintaddnp">LibOpIntAddNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntAddNP.sol">Git Source</a></p>
<p>Opcode to add N integers. Errors on overflow.</p>
<h2 id="functions-78"><a class="header" href="#functions-78">Functions</a></h2>
<h3 id="integrity-41"><a class="header" href="#integrity-41">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-41"><a class="header" href="#run-41">run</a></h3>
<p>int-add
Addition with implied overflow checks from the Solidity 0.8.x compiler.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-38"><a class="header" href="#referencefn-38">referenceFn</a></h3>
<p>Gas intensive reference implementation of addition for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintdivnp"><a class="header" href="#libopintdivnp">LibOpIntDivNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntDivNP.sol">Git Source</a></p>
<p>Opcode to divide N integers. Errors on divide by zero. Truncates
towards zero.</p>
<h2 id="functions-79"><a class="header" href="#functions-79">Functions</a></h2>
<h3 id="integrity-42"><a class="header" href="#integrity-42">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-42"><a class="header" href="#run-42">run</a></h3>
<p>int-div
Division with implied checks from the Solidity 0.8.x compiler.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-39"><a class="header" href="#referencefn-39">referenceFn</a></h3>
<p>Gas intensive reference implementation of division for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintexpnp"><a class="header" href="#libopintexpnp">LibOpIntExpNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntExpNP.sol">Git Source</a></p>
<p>Opcode to raise x successively to N integers. Errors on overflow.</p>
<h2 id="functions-80"><a class="header" href="#functions-80">Functions</a></h2>
<h3 id="integrity-43"><a class="header" href="#integrity-43">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-43"><a class="header" href="#run-43">run</a></h3>
<p>int-exp
Exponentiation with implied overflow checks from the Solidity 0.8.x
compiler.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-40"><a class="header" href="#referencefn-40">referenceFn</a></h3>
<p>Gas intensive reference implementation of exponentiation for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintmaxnp"><a class="header" href="#libopintmaxnp">LibOpIntMaxNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntMaxNP.sol">Git Source</a></p>
<p>Opcode to find the max from N integers.</p>
<h2 id="functions-81"><a class="header" href="#functions-81">Functions</a></h2>
<h3 id="integrity-44"><a class="header" href="#integrity-44">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-44"><a class="header" href="#run-44">run</a></h3>
<p>int-max
Finds the maximum value from N integers.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-41"><a class="header" href="#referencefn-41">referenceFn</a></h3>
<p>Gas intensive reference implementation of maximum for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintminnp"><a class="header" href="#libopintminnp">LibOpIntMinNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntMinNP.sol">Git Source</a></p>
<p>Opcode to find the min from N integers.</p>
<h2 id="functions-82"><a class="header" href="#functions-82">Functions</a></h2>
<h3 id="integrity-45"><a class="header" href="#integrity-45">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-45"><a class="header" href="#run-45">run</a></h3>
<p>int-min
Finds the minimum value from N integers.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-42"><a class="header" href="#referencefn-42">referenceFn</a></h3>
<p>Gas intensive reference implementation of minimum for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintmodnp"><a class="header" href="#libopintmodnp">LibOpIntModNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntModNP.sol">Git Source</a></p>
<p>Opcode to modulo N integers. Errors on modulo by zero.</p>
<h2 id="functions-83"><a class="header" href="#functions-83">Functions</a></h2>
<h3 id="integrity-46"><a class="header" href="#integrity-46">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-46"><a class="header" href="#run-46">run</a></h3>
<p>int-mod
Modulo with implied checks from the Solidity 0.8.x compiler.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-43"><a class="header" href="#referencefn-43">referenceFn</a></h3>
<p>Gas intensive reference implementation of modulo for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintmulnp"><a class="header" href="#libopintmulnp">LibOpIntMulNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntMulNP.sol">Git Source</a></p>
<p>Opcode to mul N integers. Errors on overflow.</p>
<h2 id="functions-84"><a class="header" href="#functions-84">Functions</a></h2>
<h3 id="integrity-47"><a class="header" href="#integrity-47">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-47"><a class="header" href="#run-47">run</a></h3>
<p>int-mul
Multiplication with implied overflow checks from the Solidity 0.8.x
compiler.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-44"><a class="header" href="#referencefn-44">referenceFn</a></h3>
<p>Gas intensive reference implementation of multiplication for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopintsubnp"><a class="header" href="#libopintsubnp">LibOpIntSubNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/math/int/LibOpIntSubNP.sol">Git Source</a></p>
<p>Opcode to subtract N integers.</p>
<h2 id="functions-85"><a class="header" href="#functions-85">Functions</a></h2>
<h3 id="integrity-48"><a class="header" href="#integrity-48">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-48"><a class="header" href="#run-48">run</a></h3>
<p>int-sub
Subtraction with implied overflow checks from the Solidity 0.8.x compiler.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-45"><a class="header" href="#referencefn-45">referenceFn</a></h3>
<p>Gas intensive reference implementation of subtraction for testing.</p>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-29"><a class="header" href="#contents-29">Contents</a></h1>
<ul>
<li><a href="src/lib/op/store/LibOpGetNP.sol/library.LibOpGetNP.html">LibOpGetNP</a></li>
<li><a href="src/lib/op/store/LibOpSetNP.sol/library.LibOpSetNP.html">LibOpSetNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopgetnp"><a class="header" href="#libopgetnp">LibOpGetNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/store/LibOpGetNP.sol">Git Source</a></p>
<p>Opcode for reading from storage.</p>
<h2 id="functions-86"><a class="header" href="#functions-86">Functions</a></h2>
<h3 id="integrity-49"><a class="header" href="#integrity-49">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-49"><a class="header" href="#run-49">run</a></h3>
<p>Implements runtime behaviour of the <code>get</code> opcode. Attempts to lookup the
key in the memory key/value store then falls back to the interpreter's
storage interface as an external call. If the key is not found in either,
the value will fallback to <code>0</code> as per default Solidity/EVM behaviour.</p>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>state</code></td><td><code>InterpreterStateNP</code></td><td>The interpreter state of the current eval.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>Operand</code></td><td></td></tr>
<tr><td><code>stackTop</code></td><td><code>Pointer</code></td><td>Pointer to the current stack top.</td></tr>
</tbody></table>
</div>
<h3 id="referencefn-46"><a class="header" href="#referencefn-46">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory state, Operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopsetnp"><a class="header" href="#libopsetnp">LibOpSetNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/store/LibOpSetNP.sol">Git Source</a></p>
<p>Opcode for recording k/v state changes to be set in storage.</p>
<h2 id="functions-87"><a class="header" href="#functions-87">Functions</a></h2>
<h3 id="integrity-50"><a class="header" href="#integrity-50">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-50"><a class="header" href="#run-50">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory state, Operand, Pointer stackTop) internal pure returns (Pointer);
</code></pre>
<h3 id="referencefn-47"><a class="header" href="#referencefn-47">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory state, Operand, uint256[] memory inputs)
    internal
    pure
    returns (uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-30"><a class="header" href="#contents-30">Contents</a></h1>
<ul>
<li><a href="src/lib/op/uniswap/LibOpUniswapV2AmountIn.sol/library.LibOpUniswapV2AmountIn.html">LibOpUniswapV2AmountIn</a></li>
<li><a href="src/lib/op/uniswap/LibOpUniswapV2AmountOut.sol/library.LibOpUniswapV2AmountOut.html">LibOpUniswapV2AmountOut</a></li>
<li><a href="src/lib/op/uniswap/LibOpUniswapV2Quote.sol/library.LibOpUniswapV2Quote.html">LibOpUniswapV2Quote</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopuniswapv2amountin"><a class="header" href="#libopuniswapv2amountin">LibOpUniswapV2AmountIn</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/uniswap/LibOpUniswapV2AmountIn.sol">Git Source</a></p>
<p>Opcode to calculate the amount in for a Uniswap V2 pair.</p>
<h2 id="functions-88"><a class="header" href="#functions-88">Functions</a></h2>
<h3 id="integrity-51"><a class="header" href="#integrity-51">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-51"><a class="header" href="#run-51">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-48"><a class="header" href="#referencefn-48">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopuniswapv2amountout"><a class="header" href="#libopuniswapv2amountout">LibOpUniswapV2AmountOut</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/uniswap/LibOpUniswapV2AmountOut.sol">Git Source</a></p>
<p>Opcode to calculate the amount out for a Uniswap V2 pair.</p>
<h2 id="functions-89"><a class="header" href="#functions-89">Functions</a></h2>
<h3 id="integrity-52"><a class="header" href="#integrity-52">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-52"><a class="header" href="#run-52">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-49"><a class="header" href="#referencefn-49">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libopuniswapv2quote"><a class="header" href="#libopuniswapv2quote">LibOpUniswapV2Quote</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/uniswap/LibOpUniswapV2Quote.sol">Git Source</a></p>
<p>Opcode to calculate the quote for a Uniswap V2 pair.</p>
<h2 id="functions-90"><a class="header" href="#functions-90">Functions</a></h2>
<h3 id="integrity-53"><a class="header" href="#integrity-53">integrity</a></h3>
<pre><code class="language-solidity">function integrity(IntegrityCheckStateNP memory, Operand operand) internal pure returns (uint256, uint256);
</code></pre>
<h3 id="run-53"><a class="header" href="#run-53">run</a></h3>
<pre><code class="language-solidity">function run(InterpreterStateNP memory, Operand operand, Pointer stackTop) internal view returns (Pointer);
</code></pre>
<h3 id="referencefn-50"><a class="header" href="#referencefn-50">referenceFn</a></h3>
<pre><code class="language-solidity">function referenceFn(InterpreterStateNP memory, Operand operand, uint256[] memory inputs)
    internal
    view
    returns (uint256[] memory outputs);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="liballstandardopsnp"><a class="header" href="#liballstandardopsnp">LibAllStandardOpsNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/LibAllStandardOpsNP.sol">Git Source</a></p>
<p>Every opcode available from the core repository laid out as a single
array to easily build function pointers for <code>IInterpreterV2</code>.</p>
<h2 id="functions-91"><a class="header" href="#functions-91">Functions</a></h2>
<h3 id="authoringmetav2-2"><a class="header" href="#authoringmetav2-2">authoringMetaV2</a></h3>
<pre><code class="language-solidity">function authoringMetaV2() internal pure returns (bytes memory);
</code></pre>
<h3 id="literalparserfunctionpointers-1"><a class="header" href="#literalparserfunctionpointers-1">literalParserFunctionPointers</a></h3>
<pre><code class="language-solidity">function literalParserFunctionPointers() internal pure returns (bytes memory);
</code></pre>
<h3 id="operandhandlerfunctionpointers-1"><a class="header" href="#operandhandlerfunctionpointers-1">operandHandlerFunctionPointers</a></h3>
<pre><code class="language-solidity">function operandHandlerFunctionPointers() internal pure returns (bytes memory);
</code></pre>
<h3 id="integrityfunctionpointers-3"><a class="header" href="#integrityfunctionpointers-3">integrityFunctionPointers</a></h3>
<pre><code class="language-solidity">function integrityFunctionPointers() internal pure returns (bytes memory);
</code></pre>
<h3 id="opcodefunctionpointers-2"><a class="header" href="#opcodefunctionpointers-2">opcodeFunctionPointers</a></h3>
<p>All function pointers for the standard opcodes. Intended to be used to
build a <code>IInterpreterV2</code> instance, specifically the <code>functionPointers</code>
method can just be a thin wrapper around this function.</p>
<pre><code class="language-solidity">function opcodeFunctionPointers() internal pure returns (bytes memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-17"><a class="header" href="#constants-17">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/op/LibAllStandardOpsNP.sol">Git Source</a></p>
<h3 id="all_standard_ops_length"><a class="header" href="#all_standard_ops_length">ALL_STANDARD_OPS_LENGTH</a></h3>
<p><em>Number of ops currently provided by <code>AllStandardOpsNP</code>.</em></p>
<pre><code class="language-solidity">uint256 constant ALL_STANDARD_OPS_LENGTH = 58;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-31"><a class="header" href="#contents-31">Contents</a></h1>
<ul>
<li><a href="src/lib/parse/LibParse.sol/library.LibParse.html">LibParse</a></li>
<li><a href="src/lib/parse/LibParse.sol/constants.LibParse.html">LibParse constants</a></li>
<li><a href="src/lib/parse/LibParseCMask.sol/contract.LibParseCMask.html">LibParseCMask</a></li>
<li><a href="src/lib/parse/LibParseCMask.sol/constants.LibParseCMask.html">LibParseCMask constants</a></li>
<li><a href="src/lib/parse/LibParseError.sol/library.LibParseError.html">LibParseError</a></li>
<li><a href="src/lib/parse/LibParseInterstitial.sol/library.LibParseInterstitial.html">LibParseInterstitial</a></li>
<li><a href="src/lib/parse/LibParseLiteral.sol/library.LibParseLiteral.html">LibParseLiteral</a></li>
<li><a href="src/lib/parse/LibParseLiteral.sol/constants.LibParseLiteral.html">LibParseLiteral constants</a></li>
<li><a href="src/lib/parse/LibParseMeta.sol/error.DuplicateFingerprint.html">DuplicateFingerprint</a></li>
<li><a href="src/lib/parse/LibParseMeta.sol/error.WordIOFnPointerMismatch.html">WordIOFnPointerMismatch</a></li>
<li><a href="src/lib/parse/LibParseMeta.sol/library.LibParseMeta.html">LibParseMeta</a></li>
<li><a href="src/lib/parse/LibParseMeta.sol/constants.LibParseMeta.html">LibParseMeta constants</a></li>
<li><a href="src/lib/parse/LibParseOperand.sol/library.LibParseOperand.html">LibParseOperand</a></li>
<li><a href="src/lib/parse/LibParsePragma.sol/library.LibParsePragma.html">LibParsePragma</a></li>
<li><a href="src/lib/parse/LibParsePragma.sol/constants.LibParsePragma.html">LibParsePragma constants</a></li>
<li><a href="src/lib/parse/LibParseStackName.sol/library.LibParseStackName.html">LibParseStackName</a></li>
<li><a href="src/lib/parse/LibParseStackTracker.sol/type.ParseStackTracker.html">ParseStackTracker</a></li>
<li><a href="src/lib/parse/LibParseStackTracker.sol/library.LibParseStackTracker.html">LibParseStackTracker</a></li>
<li><a href="src/lib/parse/LibParseState.sol/struct.ParseState.html">ParseState</a></li>
<li><a href="src/lib/parse/LibParseState.sol/library.LibParseState.html">LibParseState</a></li>
<li><a href="src/lib/parse/LibParseState.sol/constants.LibParseState.html">LibParseState constants</a></li>
<li><a href="src/lib/parse/LibSubParse.sol/library.LibSubParse.html">LibSubParse</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparse"><a class="header" href="#libparse">LibParse</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParse.sol">Git Source</a></p>
<h2 id="functions-92"><a class="header" href="#functions-92">Functions</a></h2>
<h3 id="parseword"><a class="header" href="#parseword">parseWord</a></h3>
<p>Parses a word that matches a tail mask between cursor and end. The caller
has several responsibilities while safely using this word.</p>
<ul>
<li>The caller MUST ensure that the word is not zero length.
I.e. <code>end - cursor &gt; 0</code>.</li>
<li>The caller MUST ensure the head of the word (the first character) is
valid according to some head mask. Generally it is expected that the
valid chars for a head and tail may be different.
This function will extract every other character from the word, starting
with the second character, and check that it is valid according to the
tail mask. If any invalid characters are found, the parsing will stop
looping as it is assumed the remaining data is valid as something else,
just not a word.</li>
</ul>
<pre><code class="language-solidity">function parseWord(uint256 cursor, uint256 end, uint256 mask) internal pure returns (uint256, bytes32);
</code></pre>
<h3 id="skipmask"><a class="header" href="#skipmask">skipMask</a></h3>
<p>Skip an unlimited number of chars until we find one that is not in the
mask.</p>
<pre><code class="language-solidity">function skipMask(uint256 cursor, uint256 end, uint256 mask) internal pure returns (uint256);
</code></pre>
<h3 id="parselhs"><a class="header" href="#parselhs">parseLHS</a></h3>
<pre><code class="language-solidity">function parseLHS(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<h3 id="parserhs"><a class="header" href="#parserhs">parseRHS</a></h3>
<pre><code class="language-solidity">function parseRHS(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<h3 id="parse-2"><a class="header" href="#parse-2">parse</a></h3>
<pre><code class="language-solidity">function parse(ParseState memory state) internal pure returns (bytes memory bytecode, uint256[] memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-18"><a class="header" href="#constants-18">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParse.sol">Git Source</a></p>
<h3 id="not_low_16_bit_mask"><a class="header" href="#not_low_16_bit_mask">NOT_LOW_16_BIT_MASK</a></h3>
<pre><code class="language-solidity">uint256 constant NOT_LOW_16_BIT_MASK = ~uint256(0xFFFF);
</code></pre>
<h3 id="active_source_mask"><a class="header" href="#active_source_mask">ACTIVE_SOURCE_MASK</a></h3>
<pre><code class="language-solidity">uint256 constant ACTIVE_SOURCE_MASK = NOT_LOW_16_BIT_MASK;
</code></pre>
<h3 id="sub_parser_bytecode_header_size"><a class="header" href="#sub_parser_bytecode_header_size">SUB_PARSER_BYTECODE_HEADER_SIZE</a></h3>
<pre><code class="language-solidity">uint256 constant SUB_PARSER_BYTECODE_HEADER_SIZE = 5;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparsecmask"><a class="header" href="#libparsecmask">LibParseCMask</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseCMask.sol">Git Source</a></p>
<p><em>Workaround for https://github.com/foundry-rs/foundry/issues/6572</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-19"><a class="header" href="#constants-19">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseCMask.sol">Git Source</a></p>
<h3 id="cmask_null"><a class="header" href="#cmask_null">CMASK_NULL</a></h3>
<p><em>ASCII null</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NULL = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x00&quot;)));
</code></pre>
<h3 id="cmask_start_of_heading"><a class="header" href="#cmask_start_of_heading">CMASK_START_OF_HEADING</a></h3>
<p><em>ASCII start of heading</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_START_OF_HEADING = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x01&quot;)));
</code></pre>
<h3 id="cmask_start_of_text"><a class="header" href="#cmask_start_of_text">CMASK_START_OF_TEXT</a></h3>
<p><em>ASCII start of text</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_START_OF_TEXT = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x02&quot;)));
</code></pre>
<h3 id="cmask_end_of_text"><a class="header" href="#cmask_end_of_text">CMASK_END_OF_TEXT</a></h3>
<p><em>ASCII end of text</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_END_OF_TEXT = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x03&quot;)));
</code></pre>
<h3 id="cmask_end_of_transmission"><a class="header" href="#cmask_end_of_transmission">CMASK_END_OF_TRANSMISSION</a></h3>
<p><em>ASCII end of transmission</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_END_OF_TRANSMISSION = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x04&quot;)));
</code></pre>
<h3 id="cmask_enquiry"><a class="header" href="#cmask_enquiry">CMASK_ENQUIRY</a></h3>
<p><em>ASCII enquiry</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_ENQUIRY = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x05&quot;)));
</code></pre>
<h3 id="cmask_acknowledge"><a class="header" href="#cmask_acknowledge">CMASK_ACKNOWLEDGE</a></h3>
<p><em>ASCII acknowledge</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_ACKNOWLEDGE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x06&quot;)));
</code></pre>
<h3 id="cmask_bell"><a class="header" href="#cmask_bell">CMASK_BELL</a></h3>
<p><em>ASCII bell</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_BELL = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x07&quot;)));
</code></pre>
<h3 id="cmask_backspace"><a class="header" href="#cmask_backspace">CMASK_BACKSPACE</a></h3>
<p><em>ASCII backspace</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_BACKSPACE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x08&quot;)));
</code></pre>
<h3 id="cmask_horizontal_tab"><a class="header" href="#cmask_horizontal_tab">CMASK_HORIZONTAL_TAB</a></h3>
<p><em>ASCII horizontal tab</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_HORIZONTAL_TAB = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\t&quot;)));
</code></pre>
<h3 id="cmask_line_feed"><a class="header" href="#cmask_line_feed">CMASK_LINE_FEED</a></h3>
<p><em>ASCII line feed</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LINE_FEED = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\n&quot;)));
</code></pre>
<h3 id="cmask_vertical_tab"><a class="header" href="#cmask_vertical_tab">CMASK_VERTICAL_TAB</a></h3>
<p><em>ASCII vertical tab</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_VERTICAL_TAB = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x0B&quot;)));
</code></pre>
<h3 id="cmask_form_feed"><a class="header" href="#cmask_form_feed">CMASK_FORM_FEED</a></h3>
<p><em>ASCII form feed</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_FORM_FEED = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x0C&quot;)));
</code></pre>
<h3 id="cmask_carriage_return"><a class="header" href="#cmask_carriage_return">CMASK_CARRIAGE_RETURN</a></h3>
<p><em>ASCII carriage return</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_CARRIAGE_RETURN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\r&quot;)));
</code></pre>
<h3 id="cmask_shift_out"><a class="header" href="#cmask_shift_out">CMASK_SHIFT_OUT</a></h3>
<p><em>ASCII shift out</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SHIFT_OUT = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x0E&quot;)));
</code></pre>
<h3 id="cmask_shift_in"><a class="header" href="#cmask_shift_in">CMASK_SHIFT_IN</a></h3>
<p><em>ASCII shift in</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SHIFT_IN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x0F&quot;)));
</code></pre>
<h3 id="cmask_data_link_escape"><a class="header" href="#cmask_data_link_escape">CMASK_DATA_LINK_ESCAPE</a></h3>
<p><em>ASCII data link escape</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DATA_LINK_ESCAPE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x10&quot;)));
</code></pre>
<h3 id="cmask_device_control_1"><a class="header" href="#cmask_device_control_1">CMASK_DEVICE_CONTROL_1</a></h3>
<p><em>ASCII device control 1</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DEVICE_CONTROL_1 = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x11&quot;)));
</code></pre>
<h3 id="cmask_device_control_2"><a class="header" href="#cmask_device_control_2">CMASK_DEVICE_CONTROL_2</a></h3>
<p><em>ASCII device control 2</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DEVICE_CONTROL_2 = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x12&quot;)));
</code></pre>
<h3 id="cmask_device_control_3"><a class="header" href="#cmask_device_control_3">CMASK_DEVICE_CONTROL_3</a></h3>
<p><em>ASCII device control 3</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DEVICE_CONTROL_3 = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x13&quot;)));
</code></pre>
<h3 id="cmask_device_control_4"><a class="header" href="#cmask_device_control_4">CMASK_DEVICE_CONTROL_4</a></h3>
<p><em>ASCII device control 4</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DEVICE_CONTROL_4 = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x14&quot;)));
</code></pre>
<h3 id="cmask_negative_acknowledge"><a class="header" href="#cmask_negative_acknowledge">CMASK_NEGATIVE_ACKNOWLEDGE</a></h3>
<p><em>ASCII negative acknowledge</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NEGATIVE_ACKNOWLEDGE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x15&quot;)));
</code></pre>
<h3 id="cmask_synchronous_idle"><a class="header" href="#cmask_synchronous_idle">CMASK_SYNCHRONOUS_IDLE</a></h3>
<p><em>ASCII synchronous idle</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SYNCHRONOUS_IDLE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x16&quot;)));
</code></pre>
<h3 id="cmask_end_of_transmission_block"><a class="header" href="#cmask_end_of_transmission_block">CMASK_END_OF_TRANSMISSION_BLOCK</a></h3>
<p><em>ASCII end of transmission block</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_END_OF_TRANSMISSION_BLOCK = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x17&quot;)));
</code></pre>
<h3 id="cmask_cancel"><a class="header" href="#cmask_cancel">CMASK_CANCEL</a></h3>
<p><em>ASCII cancel</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_CANCEL = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x18&quot;)));
</code></pre>
<h3 id="cmask_end_of_medium"><a class="header" href="#cmask_end_of_medium">CMASK_END_OF_MEDIUM</a></h3>
<p><em>ASCII end of medium</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_END_OF_MEDIUM = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x19&quot;)));
</code></pre>
<h3 id="cmask_substitute"><a class="header" href="#cmask_substitute">CMASK_SUBSTITUTE</a></h3>
<p><em>ASCII substitute</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SUBSTITUTE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x1A&quot;)));
</code></pre>
<h3 id="cmask_escape"><a class="header" href="#cmask_escape">CMASK_ESCAPE</a></h3>
<p><em>ASCII escape</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_ESCAPE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x1B&quot;)));
</code></pre>
<h3 id="cmask_file_separator"><a class="header" href="#cmask_file_separator">CMASK_FILE_SEPARATOR</a></h3>
<p><em>ASCII file separator</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_FILE_SEPARATOR = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x1C&quot;)));
</code></pre>
<h3 id="cmask_group_separator"><a class="header" href="#cmask_group_separator">CMASK_GROUP_SEPARATOR</a></h3>
<p><em>ASCII group separator</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_GROUP_SEPARATOR = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x1D&quot;)));
</code></pre>
<h3 id="cmask_record_separator"><a class="header" href="#cmask_record_separator">CMASK_RECORD_SEPARATOR</a></h3>
<p><em>ASCII record separator</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_RECORD_SEPARATOR = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x1E&quot;)));
</code></pre>
<h3 id="cmask_unit_separator"><a class="header" href="#cmask_unit_separator">CMASK_UNIT_SEPARATOR</a></h3>
<p><em>ASCII unit separator</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UNIT_SEPARATOR = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x1F&quot;)));
</code></pre>
<h3 id="cmask_space"><a class="header" href="#cmask_space">CMASK_SPACE</a></h3>
<p><em>ASCII space</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SPACE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot; &quot;)));
</code></pre>
<h3 id="cmask_exclamation_mark"><a class="header" href="#cmask_exclamation_mark">CMASK_EXCLAMATION_MARK</a></h3>
<p><em>ASCII !</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_EXCLAMATION_MARK = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;!&quot;)));
</code></pre>
<h3 id="cmask_quotation_mark"><a class="header" href="#cmask_quotation_mark">CMASK_QUOTATION_MARK</a></h3>
<p><em>ASCII &quot;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_QUOTATION_MARK = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\&quot;&quot;)));
</code></pre>
<h3 id="cmask_number_sign"><a class="header" href="#cmask_number_sign">CMASK_NUMBER_SIGN</a></h3>
<p><em>ASCII #</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NUMBER_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;#&quot;)));
</code></pre>
<h3 id="cmask_dollar_sign"><a class="header" href="#cmask_dollar_sign">CMASK_DOLLAR_SIGN</a></h3>
<p><em>ASCII $</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DOLLAR_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;$&quot;)));
</code></pre>
<h3 id="cmask_percent_sign"><a class="header" href="#cmask_percent_sign">CMASK_PERCENT_SIGN</a></h3>
<p><em>ASCII %</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_PERCENT_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;%&quot;)));
</code></pre>
<h3 id="cmask_ampersand"><a class="header" href="#cmask_ampersand">CMASK_AMPERSAND</a></h3>
<p><em>ASCII &amp;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_AMPERSAND = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;&amp;&quot;)));
</code></pre>
<h3 id="cmask_apostrophe"><a class="header" href="#cmask_apostrophe">CMASK_APOSTROPHE</a></h3>
<p><em>ASCII '</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_APOSTROPHE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;'&quot;)));
</code></pre>
<h3 id="cmask_left_paren"><a class="header" href="#cmask_left_paren">CMASK_LEFT_PAREN</a></h3>
<p><em>ASCII (</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LEFT_PAREN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;(&quot;)));
</code></pre>
<h3 id="cmask_right_paren"><a class="header" href="#cmask_right_paren">CMASK_RIGHT_PAREN</a></h3>
<p><em>ASCII )</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_RIGHT_PAREN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;)&quot;)));
</code></pre>
<h3 id="cmask_asterisk"><a class="header" href="#cmask_asterisk">CMASK_ASTERISK</a></h3>
<p>*ASCII **</p>
<pre><code class="language-solidity">uint128 constant CMASK_ASTERISK = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;*&quot;)));
</code></pre>
<h3 id="cmask_plus_sign"><a class="header" href="#cmask_plus_sign">CMASK_PLUS_SIGN</a></h3>
<p><em>ASCII +</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_PLUS_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;+&quot;)));
</code></pre>
<h3 id="cmask_comma"><a class="header" href="#cmask_comma">CMASK_COMMA</a></h3>
<p><em>ASCII ,</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_COMMA = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;,&quot;)));
</code></pre>
<h3 id="cmask_dash"><a class="header" href="#cmask_dash">CMASK_DASH</a></h3>
<p><em>ASCII -</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DASH = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;-&quot;)));
</code></pre>
<h3 id="cmask_full_stop"><a class="header" href="#cmask_full_stop">CMASK_FULL_STOP</a></h3>
<p><em>ASCII .</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_FULL_STOP = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;.&quot;)));
</code></pre>
<h3 id="cmask_slash"><a class="header" href="#cmask_slash">CMASK_SLASH</a></h3>
<p><em>ASCII /</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SLASH = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;/&quot;)));
</code></pre>
<h3 id="cmask_zero"><a class="header" href="#cmask_zero">CMASK_ZERO</a></h3>
<p><em>ASCII 0</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_ZERO = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;0&quot;)));
</code></pre>
<h3 id="cmask_one"><a class="header" href="#cmask_one">CMASK_ONE</a></h3>
<p><em>ASCII 1</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_ONE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;1&quot;)));
</code></pre>
<h3 id="cmask_two"><a class="header" href="#cmask_two">CMASK_TWO</a></h3>
<p><em>ASCII 2</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_TWO = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;2&quot;)));
</code></pre>
<h3 id="cmask_three"><a class="header" href="#cmask_three">CMASK_THREE</a></h3>
<p><em>ASCII 3</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_THREE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;3&quot;)));
</code></pre>
<h3 id="cmask_four"><a class="header" href="#cmask_four">CMASK_FOUR</a></h3>
<p><em>ASCII 4</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_FOUR = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;4&quot;)));
</code></pre>
<h3 id="cmask_five"><a class="header" href="#cmask_five">CMASK_FIVE</a></h3>
<p><em>ASCII 5</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_FIVE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;5&quot;)));
</code></pre>
<h3 id="cmask_six"><a class="header" href="#cmask_six">CMASK_SIX</a></h3>
<p><em>ASCII 6</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SIX = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;6&quot;)));
</code></pre>
<h3 id="cmask_seven"><a class="header" href="#cmask_seven">CMASK_SEVEN</a></h3>
<p><em>ASCII 7</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SEVEN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;7&quot;)));
</code></pre>
<h3 id="cmask_eight"><a class="header" href="#cmask_eight">CMASK_EIGHT</a></h3>
<p><em>ASCII 8</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_EIGHT = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;8&quot;)));
</code></pre>
<h3 id="cmask_nine"><a class="header" href="#cmask_nine">CMASK_NINE</a></h3>
<p><em>ASCII 9</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NINE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;9&quot;)));
</code></pre>
<h3 id="cmask_colon"><a class="header" href="#cmask_colon">CMASK_COLON</a></h3>
<p><em>ASCII :</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_COLON = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;:&quot;)));
</code></pre>
<h3 id="cmask_semicolon"><a class="header" href="#cmask_semicolon">CMASK_SEMICOLON</a></h3>
<p><em>ASCII ;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_SEMICOLON = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;;&quot;)));
</code></pre>
<h3 id="cmask_less_than_sign"><a class="header" href="#cmask_less_than_sign">CMASK_LESS_THAN_SIGN</a></h3>
<p><em>ASCII &lt;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LESS_THAN_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;&lt;&quot;)));
</code></pre>
<h3 id="cmask_equals_sign"><a class="header" href="#cmask_equals_sign">CMASK_EQUALS_SIGN</a></h3>
<p><em>ASCII =</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_EQUALS_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;=&quot;)));
</code></pre>
<h3 id="cmask_greater_than_sign"><a class="header" href="#cmask_greater_than_sign">CMASK_GREATER_THAN_SIGN</a></h3>
<p><em>ASCII &gt;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_GREATER_THAN_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;&gt;&quot;)));
</code></pre>
<h3 id="cmask_question_mark"><a class="header" href="#cmask_question_mark">CMASK_QUESTION_MARK</a></h3>
<p><em>ASCII ?</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_QUESTION_MARK = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;?&quot;)));
</code></pre>
<h3 id="cmask_at_sign"><a class="header" href="#cmask_at_sign">CMASK_AT_SIGN</a></h3>
<p><em>ASCII @</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_AT_SIGN = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;@&quot;)));
</code></pre>
<h3 id="cmask_upper_a"><a class="header" href="#cmask_upper_a">CMASK_UPPER_A</a></h3>
<p><em>ASCII A</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_A = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;A&quot;)));
</code></pre>
<h3 id="cmask_upper_b"><a class="header" href="#cmask_upper_b">CMASK_UPPER_B</a></h3>
<p><em>ASCII B</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_B = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;B&quot;)));
</code></pre>
<h3 id="cmask_upper_c"><a class="header" href="#cmask_upper_c">CMASK_UPPER_C</a></h3>
<p><em>ASCII C</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_C = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;C&quot;)));
</code></pre>
<h3 id="cmask_upper_d"><a class="header" href="#cmask_upper_d">CMASK_UPPER_D</a></h3>
<p><em>ASCII D</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_D = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;D&quot;)));
</code></pre>
<h3 id="cmask_upper_e"><a class="header" href="#cmask_upper_e">CMASK_UPPER_E</a></h3>
<p><em>ASCII E</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_E = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;E&quot;)));
</code></pre>
<h3 id="cmask_upper_f"><a class="header" href="#cmask_upper_f">CMASK_UPPER_F</a></h3>
<p><em>ASCII F</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_F = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;F&quot;)));
</code></pre>
<h3 id="cmask_upper_g"><a class="header" href="#cmask_upper_g">CMASK_UPPER_G</a></h3>
<p><em>ASCII G</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_G = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;G&quot;)));
</code></pre>
<h3 id="cmask_upper_h"><a class="header" href="#cmask_upper_h">CMASK_UPPER_H</a></h3>
<p><em>ASCII H</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_H = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;H&quot;)));
</code></pre>
<h3 id="cmask_upper_i"><a class="header" href="#cmask_upper_i">CMASK_UPPER_I</a></h3>
<p><em>ASCII I</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_I = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;I&quot;)));
</code></pre>
<h3 id="cmask_upper_j"><a class="header" href="#cmask_upper_j">CMASK_UPPER_J</a></h3>
<p><em>ASCII J</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_J = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;J&quot;)));
</code></pre>
<h3 id="cmask_upper_k"><a class="header" href="#cmask_upper_k">CMASK_UPPER_K</a></h3>
<p><em>ASCII K</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_K = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;K&quot;)));
</code></pre>
<h3 id="cmask_upper_l"><a class="header" href="#cmask_upper_l">CMASK_UPPER_L</a></h3>
<p><em>ASCII L</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_L = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;L&quot;)));
</code></pre>
<h3 id="cmask_upper_m"><a class="header" href="#cmask_upper_m">CMASK_UPPER_M</a></h3>
<p><em>ASCII M</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_M = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;M&quot;)));
</code></pre>
<h3 id="cmask_upper_n"><a class="header" href="#cmask_upper_n">CMASK_UPPER_N</a></h3>
<p><em>ASCII N</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_N = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;N&quot;)));
</code></pre>
<h3 id="cmask_upper_o"><a class="header" href="#cmask_upper_o">CMASK_UPPER_O</a></h3>
<p><em>ASCII O</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_O = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;O&quot;)));
</code></pre>
<h3 id="cmask_upper_p"><a class="header" href="#cmask_upper_p">CMASK_UPPER_P</a></h3>
<p><em>ASCII P</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_P = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;P&quot;)));
</code></pre>
<h3 id="cmask_upper_q"><a class="header" href="#cmask_upper_q">CMASK_UPPER_Q</a></h3>
<p><em>ASCII Q</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_Q = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;Q&quot;)));
</code></pre>
<h3 id="cmask_upper_r"><a class="header" href="#cmask_upper_r">CMASK_UPPER_R</a></h3>
<p><em>ASCII R</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_R = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;R&quot;)));
</code></pre>
<h3 id="cmask_upper_s"><a class="header" href="#cmask_upper_s">CMASK_UPPER_S</a></h3>
<p><em>ASCII S</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_S = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;S&quot;)));
</code></pre>
<h3 id="cmask_upper_t"><a class="header" href="#cmask_upper_t">CMASK_UPPER_T</a></h3>
<p><em>ASCII T</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_T = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;T&quot;)));
</code></pre>
<h3 id="cmask_upper_u"><a class="header" href="#cmask_upper_u">CMASK_UPPER_U</a></h3>
<p><em>ASCII U</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_U = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;U&quot;)));
</code></pre>
<h3 id="cmask_upper_v"><a class="header" href="#cmask_upper_v">CMASK_UPPER_V</a></h3>
<p><em>ASCII V</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_V = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;V&quot;)));
</code></pre>
<h3 id="cmask_upper_w"><a class="header" href="#cmask_upper_w">CMASK_UPPER_W</a></h3>
<p><em>ASCII W</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_W = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;W&quot;)));
</code></pre>
<h3 id="cmask_upper_x"><a class="header" href="#cmask_upper_x">CMASK_UPPER_X</a></h3>
<p><em>ASCII X</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_X = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;X&quot;)));
</code></pre>
<h3 id="cmask_upper_y"><a class="header" href="#cmask_upper_y">CMASK_UPPER_Y</a></h3>
<p><em>ASCII Y</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_Y = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;Y&quot;)));
</code></pre>
<h3 id="cmask_upper_z"><a class="header" href="#cmask_upper_z">CMASK_UPPER_Z</a></h3>
<p><em>ASCII Z</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_Z = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;Z&quot;)));
</code></pre>
<h3 id="cmask_left_square_bracket"><a class="header" href="#cmask_left_square_bracket">CMASK_LEFT_SQUARE_BRACKET</a></h3>
<p><em>ASCII [</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LEFT_SQUARE_BRACKET = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;[&quot;)));
</code></pre>
<h3 id="cmask_backslash"><a class="header" href="#cmask_backslash">CMASK_BACKSLASH</a></h3>
<p>*ASCII *</p>
<pre><code class="language-solidity">uint128 constant CMASK_BACKSLASH = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\\&quot;)));
</code></pre>
<h3 id="cmask_right_square_bracket"><a class="header" href="#cmask_right_square_bracket">CMASK_RIGHT_SQUARE_BRACKET</a></h3>
<p><em>ASCII ]</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_RIGHT_SQUARE_BRACKET = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;]&quot;)));
</code></pre>
<h3 id="cmask_circumflex_accent"><a class="header" href="#cmask_circumflex_accent">CMASK_CIRCUMFLEX_ACCENT</a></h3>
<p><em>ASCII ^</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_CIRCUMFLEX_ACCENT = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;^&quot;)));
</code></pre>
<h3 id="cmask_underscore"><a class="header" href="#cmask_underscore">CMASK_UNDERSCORE</a></h3>
<p><em>ASCII _</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UNDERSCORE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;_&quot;)));
</code></pre>
<h3 id="cmask_grave_accent"><a class="header" href="#cmask_grave_accent">CMASK_GRAVE_ACCENT</a></h3>
<p><em>ASCII `</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_GRAVE_ACCENT = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;`&quot;)));
</code></pre>
<h3 id="cmask_lower_a"><a class="header" href="#cmask_lower_a">CMASK_LOWER_A</a></h3>
<p><em>ASCII a</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_A = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;a&quot;)));
</code></pre>
<h3 id="cmask_lower_b"><a class="header" href="#cmask_lower_b">CMASK_LOWER_B</a></h3>
<p><em>ASCII b</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_B = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;b&quot;)));
</code></pre>
<h3 id="cmask_lower_c"><a class="header" href="#cmask_lower_c">CMASK_LOWER_C</a></h3>
<p><em>ASCII c</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_C = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;c&quot;)));
</code></pre>
<h3 id="cmask_lower_d"><a class="header" href="#cmask_lower_d">CMASK_LOWER_D</a></h3>
<p><em>ASCII d</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_D = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;d&quot;)));
</code></pre>
<h3 id="cmask_lower_e"><a class="header" href="#cmask_lower_e">CMASK_LOWER_E</a></h3>
<p><em>ASCII e</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_E = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;e&quot;)));
</code></pre>
<h3 id="cmask_lower_f"><a class="header" href="#cmask_lower_f">CMASK_LOWER_F</a></h3>
<p><em>ASCII f</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_F = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;f&quot;)));
</code></pre>
<h3 id="cmask_lower_g"><a class="header" href="#cmask_lower_g">CMASK_LOWER_G</a></h3>
<p><em>ASCII g</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_G = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;g&quot;)));
</code></pre>
<h3 id="cmask_lower_h"><a class="header" href="#cmask_lower_h">CMASK_LOWER_H</a></h3>
<p><em>ASCII h</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_H = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;h&quot;)));
</code></pre>
<h3 id="cmask_lower_i"><a class="header" href="#cmask_lower_i">CMASK_LOWER_I</a></h3>
<p><em>ASCII i</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_I = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;i&quot;)));
</code></pre>
<h3 id="cmask_lower_j"><a class="header" href="#cmask_lower_j">CMASK_LOWER_J</a></h3>
<p><em>ASCII j</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_J = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;j&quot;)));
</code></pre>
<h3 id="cmask_lower_k"><a class="header" href="#cmask_lower_k">CMASK_LOWER_K</a></h3>
<p><em>ASCII k</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_K = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;k&quot;)));
</code></pre>
<h3 id="cmask_lower_l"><a class="header" href="#cmask_lower_l">CMASK_LOWER_L</a></h3>
<p><em>ASCII l</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_L = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;l&quot;)));
</code></pre>
<h3 id="cmask_lower_m"><a class="header" href="#cmask_lower_m">CMASK_LOWER_M</a></h3>
<p><em>ASCII m</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_M = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;m&quot;)));
</code></pre>
<h3 id="cmask_lower_n"><a class="header" href="#cmask_lower_n">CMASK_LOWER_N</a></h3>
<p><em>ASCII n</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_N = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;n&quot;)));
</code></pre>
<h3 id="cmask_lower_o"><a class="header" href="#cmask_lower_o">CMASK_LOWER_O</a></h3>
<p><em>ASCII o</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_O = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;o&quot;)));
</code></pre>
<h3 id="cmask_lower_p"><a class="header" href="#cmask_lower_p">CMASK_LOWER_P</a></h3>
<p><em>ASCII p</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_P = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;p&quot;)));
</code></pre>
<h3 id="cmask_lower_q"><a class="header" href="#cmask_lower_q">CMASK_LOWER_Q</a></h3>
<p><em>ASCII q</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_Q = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;q&quot;)));
</code></pre>
<h3 id="cmask_lower_r"><a class="header" href="#cmask_lower_r">CMASK_LOWER_R</a></h3>
<p><em>ASCII r</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_R = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;r&quot;)));
</code></pre>
<h3 id="cmask_lower_s"><a class="header" href="#cmask_lower_s">CMASK_LOWER_S</a></h3>
<p><em>ASCII s</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_S = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;s&quot;)));
</code></pre>
<h3 id="cmask_lower_t"><a class="header" href="#cmask_lower_t">CMASK_LOWER_T</a></h3>
<p><em>ASCII t</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_T = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;t&quot;)));
</code></pre>
<h3 id="cmask_lower_u"><a class="header" href="#cmask_lower_u">CMASK_LOWER_U</a></h3>
<p><em>ASCII u</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_U = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;u&quot;)));
</code></pre>
<h3 id="cmask_lower_v"><a class="header" href="#cmask_lower_v">CMASK_LOWER_V</a></h3>
<p><em>ASCII v</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_V = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;v&quot;)));
</code></pre>
<h3 id="cmask_lower_w"><a class="header" href="#cmask_lower_w">CMASK_LOWER_W</a></h3>
<p><em>ASCII w</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_W = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;w&quot;)));
</code></pre>
<h3 id="cmask_lower_x"><a class="header" href="#cmask_lower_x">CMASK_LOWER_X</a></h3>
<p><em>ASCII x</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_X = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;x&quot;)));
</code></pre>
<h3 id="cmask_lower_y"><a class="header" href="#cmask_lower_y">CMASK_LOWER_Y</a></h3>
<p><em>ASCII y</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_Y = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;y&quot;)));
</code></pre>
<h3 id="cmask_lower_z"><a class="header" href="#cmask_lower_z">CMASK_LOWER_Z</a></h3>
<p><em>ASCII z</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_Z = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;z&quot;)));
</code></pre>
<h3 id="cmask_left_curly_bracket"><a class="header" href="#cmask_left_curly_bracket">CMASK_LEFT_CURLY_BRACKET</a></h3>
<p><em>ASCII {</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LEFT_CURLY_BRACKET = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;{&quot;)));
</code></pre>
<h3 id="cmask_vertical_bar"><a class="header" href="#cmask_vertical_bar">CMASK_VERTICAL_BAR</a></h3>
<p><em>ASCII |</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_VERTICAL_BAR = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;|&quot;)));
</code></pre>
<h3 id="cmask_right_curly_bracket"><a class="header" href="#cmask_right_curly_bracket">CMASK_RIGHT_CURLY_BRACKET</a></h3>
<p><em>ASCII }</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_RIGHT_CURLY_BRACKET = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;}&quot;)));
</code></pre>
<h3 id="cmask_tilde"><a class="header" href="#cmask_tilde">CMASK_TILDE</a></h3>
<p><em>ASCII ~</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_TILDE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;~&quot;)));
</code></pre>
<h3 id="cmask_delete"><a class="header" href="#cmask_delete">CMASK_DELETE</a></h3>
<p><em>ASCII delete</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_DELETE = uint128(1) &lt;&lt; uint128(uint8(bytes1(&quot;\x7F&quot;)));
</code></pre>
<h3 id="cmask_printable"><a class="header" href="#cmask_printable">CMASK_PRINTABLE</a></h3>
<p><em>ASCII printable characters is everything 0x20 and above, except 0x7F</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_PRINTABLE = ~(
    CMASK_NULL | CMASK_START_OF_HEADING | CMASK_START_OF_TEXT | CMASK_END_OF_TEXT | CMASK_END_OF_TRANSMISSION
        | CMASK_ENQUIRY | CMASK_ACKNOWLEDGE | CMASK_BELL | CMASK_BACKSPACE | CMASK_HORIZONTAL_TAB | CMASK_LINE_FEED
        | CMASK_VERTICAL_TAB | CMASK_FORM_FEED | CMASK_CARRIAGE_RETURN | CMASK_SHIFT_OUT | CMASK_SHIFT_IN
        | CMASK_DATA_LINK_ESCAPE | CMASK_DEVICE_CONTROL_1 | CMASK_DEVICE_CONTROL_2 | CMASK_DEVICE_CONTROL_3
        | CMASK_DEVICE_CONTROL_4 | CMASK_NEGATIVE_ACKNOWLEDGE | CMASK_SYNCHRONOUS_IDLE | CMASK_END_OF_TRANSMISSION_BLOCK
        | CMASK_CANCEL | CMASK_END_OF_MEDIUM | CMASK_SUBSTITUTE | CMASK_ESCAPE | CMASK_FILE_SEPARATOR
        | CMASK_GROUP_SEPARATOR | CMASK_RECORD_SEPARATOR | CMASK_UNIT_SEPARATOR | CMASK_DELETE
);
</code></pre>
<h3 id="cmask_numeric_0_9"><a class="header" href="#cmask_numeric_0_9">CMASK_NUMERIC_0_9</a></h3>
<p><em>numeric 0-9</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NUMERIC_0_9 = CMASK_ZERO | CMASK_ONE | CMASK_TWO | CMASK_THREE | CMASK_FOUR | CMASK_FIVE
    | CMASK_SIX | CMASK_SEVEN | CMASK_EIGHT | CMASK_NINE;
</code></pre>
<h3 id="cmask_e_notation"><a class="header" href="#cmask_e_notation">CMASK_E_NOTATION</a></h3>
<p><em>e notation eE</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_E_NOTATION = CMASK_LOWER_E | CMASK_UPPER_E;
</code></pre>
<h3 id="cmask_lower_alpha_a_z"><a class="header" href="#cmask_lower_alpha_a_z">CMASK_LOWER_ALPHA_A_Z</a></h3>
<p><em>lower alpha a-z</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_ALPHA_A_Z = CMASK_LOWER_A | CMASK_LOWER_B | CMASK_LOWER_C | CMASK_LOWER_D | CMASK_LOWER_E
    | CMASK_LOWER_F | CMASK_LOWER_G | CMASK_LOWER_H | CMASK_LOWER_I | CMASK_LOWER_J | CMASK_LOWER_K | CMASK_LOWER_L
    | CMASK_LOWER_M | CMASK_LOWER_N | CMASK_LOWER_O | CMASK_LOWER_P | CMASK_LOWER_Q | CMASK_LOWER_R | CMASK_LOWER_S
    | CMASK_LOWER_T | CMASK_LOWER_U | CMASK_LOWER_V | CMASK_LOWER_W | CMASK_LOWER_X | CMASK_LOWER_Y | CMASK_LOWER_Z;
</code></pre>
<h3 id="cmask_upper_alpha_a_z"><a class="header" href="#cmask_upper_alpha_a_z">CMASK_UPPER_ALPHA_A_Z</a></h3>
<p><em>upper alpha A-Z</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_ALPHA_A_Z = CMASK_UPPER_A | CMASK_UPPER_B | CMASK_UPPER_C | CMASK_UPPER_D | CMASK_UPPER_E
    | CMASK_UPPER_F | CMASK_UPPER_G | CMASK_UPPER_H | CMASK_UPPER_I | CMASK_UPPER_J | CMASK_UPPER_K | CMASK_UPPER_L
    | CMASK_UPPER_M | CMASK_UPPER_N | CMASK_UPPER_O | CMASK_UPPER_P | CMASK_UPPER_Q | CMASK_UPPER_R | CMASK_UPPER_S
    | CMASK_UPPER_T | CMASK_UPPER_U | CMASK_UPPER_V | CMASK_UPPER_W | CMASK_UPPER_X | CMASK_UPPER_Y | CMASK_UPPER_Z;
</code></pre>
<h3 id="cmask_lower_alpha_a_f"><a class="header" href="#cmask_lower_alpha_a_f">CMASK_LOWER_ALPHA_A_F</a></h3>
<p><em>lower alpha a-f (hex)</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LOWER_ALPHA_A_F =
    CMASK_LOWER_A | CMASK_LOWER_B | CMASK_LOWER_C | CMASK_LOWER_D | CMASK_LOWER_E | CMASK_LOWER_F;
</code></pre>
<h3 id="cmask_upper_alpha_a_f"><a class="header" href="#cmask_upper_alpha_a_f">CMASK_UPPER_ALPHA_A_F</a></h3>
<p><em>upper alpha A-F (hex)</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_UPPER_ALPHA_A_F =
    CMASK_UPPER_A | CMASK_UPPER_B | CMASK_UPPER_C | CMASK_UPPER_D | CMASK_UPPER_E | CMASK_UPPER_F;
</code></pre>
<h3 id="cmask_hex"><a class="header" href="#cmask_hex">CMASK_HEX</a></h3>
<p><em>hex 0-9 a-f A-F</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_HEX = CMASK_NUMERIC_0_9 | CMASK_LOWER_ALPHA_A_F | CMASK_UPPER_ALPHA_A_F;
</code></pre>
<h3 id="cmask_eol"><a class="header" href="#cmask_eol">CMASK_EOL</a></h3>
<p><em>Rainlang end of line is ,</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_EOL = CMASK_COMMA;
</code></pre>
<h3 id="cmask_lhs_rhs_delimiter"><a class="header" href="#cmask_lhs_rhs_delimiter">CMASK_LHS_RHS_DELIMITER</a></h3>
<p><em>Rainlang LHS/RHS delimiter is :</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LHS_RHS_DELIMITER = CMASK_COLON;
</code></pre>
<h3 id="cmask_eos"><a class="header" href="#cmask_eos">CMASK_EOS</a></h3>
<p><em>Rainlang end of source is ;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_EOS = CMASK_SEMICOLON;
</code></pre>
<h3 id="cmask_lhs_stack_head"><a class="header" href="#cmask_lhs_stack_head">CMASK_LHS_STACK_HEAD</a></h3>
<p><em>Rainlang stack head is lower alpha and underscore a-z _</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LHS_STACK_HEAD = CMASK_LOWER_ALPHA_A_Z | CMASK_UNDERSCORE;
</code></pre>
<h3 id="cmask_identifier_head"><a class="header" href="#cmask_identifier_head">CMASK_IDENTIFIER_HEAD</a></h3>
<p><em>Rainlang identifier head is lower alpha a-z</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_IDENTIFIER_HEAD = CMASK_LOWER_ALPHA_A_Z;
</code></pre>
<h3 id="cmask_rhs_word_head"><a class="header" href="#cmask_rhs_word_head">CMASK_RHS_WORD_HEAD</a></h3>
<pre><code class="language-solidity">uint128 constant CMASK_RHS_WORD_HEAD = CMASK_IDENTIFIER_HEAD;
</code></pre>
<h3 id="cmask_identifier_tail"><a class="header" href="#cmask_identifier_tail">CMASK_IDENTIFIER_TAIL</a></h3>
<p><em>Rainlang stack/identifier tail is lower alphanumeric kebab a-z 0-9 -</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_IDENTIFIER_TAIL = CMASK_IDENTIFIER_HEAD | CMASK_NUMERIC_0_9 | CMASK_DASH;
</code></pre>
<h3 id="cmask_lhs_stack_tail"><a class="header" href="#cmask_lhs_stack_tail">CMASK_LHS_STACK_TAIL</a></h3>
<pre><code class="language-solidity">uint128 constant CMASK_LHS_STACK_TAIL = CMASK_IDENTIFIER_TAIL;
</code></pre>
<h3 id="cmask_rhs_word_tail"><a class="header" href="#cmask_rhs_word_tail">CMASK_RHS_WORD_TAIL</a></h3>
<pre><code class="language-solidity">uint128 constant CMASK_RHS_WORD_TAIL = CMASK_IDENTIFIER_TAIL;
</code></pre>
<h3 id="cmask_operand_start"><a class="header" href="#cmask_operand_start">CMASK_OPERAND_START</a></h3>
<p><em>Rainlang operand start is &lt;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_OPERAND_START = CMASK_LESS_THAN_SIGN;
</code></pre>
<h3 id="cmask_operand_end"><a class="header" href="#cmask_operand_end">CMASK_OPERAND_END</a></h3>
<p><em>Rainlang operand end is &gt;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_OPERAND_END = CMASK_GREATER_THAN_SIGN;
</code></pre>
<h3 id="cmask_not_identifier_tail"><a class="header" href="#cmask_not_identifier_tail">CMASK_NOT_IDENTIFIER_TAIL</a></h3>
<p><em>NOT lower alphanumeric kebab</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NOT_IDENTIFIER_TAIL = ~CMASK_IDENTIFIER_TAIL;
</code></pre>
<h3 id="cmask_whitespace"><a class="header" href="#cmask_whitespace">CMASK_WHITESPACE</a></h3>
<p><em>Rainlang whitespace is \n \r \t space</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_WHITESPACE = CMASK_LINE_FEED | CMASK_CARRIAGE_RETURN | CMASK_HORIZONTAL_TAB | CMASK_SPACE;
</code></pre>
<h3 id="cmask_lhs_stack_delimiter"><a class="header" href="#cmask_lhs_stack_delimiter">CMASK_LHS_STACK_DELIMITER</a></h3>
<p><em>Rainlang stack item delimiter is whitespace</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LHS_STACK_DELIMITER = CMASK_WHITESPACE;
</code></pre>
<h3 id="cmask_numeric_literal_head"><a class="header" href="#cmask_numeric_literal_head">CMASK_NUMERIC_LITERAL_HEAD</a></h3>
<p><em>Rainlang supports numeric literals as anything starting with 0-9</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_NUMERIC_LITERAL_HEAD = CMASK_NUMERIC_0_9;
</code></pre>
<h3 id="cmask_string_literal_head"><a class="header" href="#cmask_string_literal_head">CMASK_STRING_LITERAL_HEAD</a></h3>
<p><em>Rainlang supports string literals as anything starting with &quot;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_STRING_LITERAL_HEAD = CMASK_QUOTATION_MARK;
</code></pre>
<h3 id="cmask_string_literal_end"><a class="header" href="#cmask_string_literal_end">CMASK_STRING_LITERAL_END</a></h3>
<p><em>Rainlang string end is &quot;</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_STRING_LITERAL_END = CMASK_QUOTATION_MARK;
</code></pre>
<h3 id="cmask_string_literal_tail"><a class="header" href="#cmask_string_literal_tail">CMASK_STRING_LITERAL_TAIL</a></h3>
<p><em>Rainlang string tail is any printable ASCII except &quot; which ends it.</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_STRING_LITERAL_TAIL = ~CMASK_STRING_LITERAL_END &amp; CMASK_PRINTABLE;
</code></pre>
<h3 id="cmask_literal_head"><a class="header" href="#cmask_literal_head">CMASK_LITERAL_HEAD</a></h3>
<p><em>Rainlang literal head</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LITERAL_HEAD = CMASK_NUMERIC_LITERAL_HEAD | CMASK_STRING_LITERAL_HEAD;
</code></pre>
<h3 id="cmask_comment_head"><a class="header" href="#cmask_comment_head">CMASK_COMMENT_HEAD</a></h3>
<p><em>Rainlang comment head is /</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_COMMENT_HEAD = CMASK_SLASH;
</code></pre>
<h3 id="cmask_interstitial_head"><a class="header" href="#cmask_interstitial_head">CMASK_INTERSTITIAL_HEAD</a></h3>
<p><em>Rainlang interstitial head could be some whitespace or a comment head.</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_INTERSTITIAL_HEAD = CMASK_WHITESPACE | CMASK_COMMENT_HEAD;
</code></pre>
<h3 id="comment_start_sequence"><a class="header" href="#comment_start_sequence">COMMENT_START_SEQUENCE</a></h3>
<p><em>Rainlang comment starting sequence is /</em>*</p>
<pre><code class="language-solidity">uint256 constant COMMENT_START_SEQUENCE = uint256(uint16(bytes2(&quot;/*&quot;)));
</code></pre>
<h3 id="comment_end_sequence"><a class="header" href="#comment_end_sequence">COMMENT_END_SEQUENCE</a></h3>
<p>*Rainlang comment ending sequence is <em>/</em></p>
<pre><code class="language-solidity">uint256 constant COMMENT_END_SEQUENCE = uint256(uint16(bytes2(&quot;*/&quot;)));
</code></pre>
<h3 id="cmask_comment_end_sequence_end"><a class="header" href="#cmask_comment_end_sequence_end">CMASK_COMMENT_END_SEQUENCE_END</a></h3>
<p>*Rainlang comment end sequence end byte is / <em>/</em></p>
<pre><code class="language-solidity">uint256 constant CMASK_COMMENT_END_SEQUENCE_END = COMMENT_END_SEQUENCE &amp; 0xFF;
</code></pre>
<h3 id="cmask_literal_hex_dispatch"><a class="header" href="#cmask_literal_hex_dispatch">CMASK_LITERAL_HEX_DISPATCH</a></h3>
<p><em>Rainlang literal hexadecimal dispatch is 0x
We compare the head and dispatch together to avoid a second comparison.
This is safe because the head is prefiltered to be 0-9 due to the numeric
literal head, therefore the only possible match is 0x (not x0).</em></p>
<pre><code class="language-solidity">uint128 constant CMASK_LITERAL_HEX_DISPATCH = CMASK_ZERO | CMASK_LOWER_X;
</code></pre>
<h3 id="cmask_literal_hex_dispatch_start"><a class="header" href="#cmask_literal_hex_dispatch_start">CMASK_LITERAL_HEX_DISPATCH_START</a></h3>
<p><em>We may want to match the exact start of a hex literal.</em></p>
<pre><code class="language-solidity">uint256 constant CMASK_LITERAL_HEX_DISPATCH_START = uint256(uint16(bytes2(&quot;0x&quot;)));
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparseerror"><a class="header" href="#libparseerror">LibParseError</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseError.sol">Git Source</a></p>
<h2 id="functions-93"><a class="header" href="#functions-93">Functions</a></h2>
<h3 id="parseerroroffset"><a class="header" href="#parseerroroffset">parseErrorOffset</a></h3>
<pre><code class="language-solidity">function parseErrorOffset(ParseState memory state, uint256 cursor) internal pure returns (uint256 offset);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparseinterstitial"><a class="header" href="#libparseinterstitial">LibParseInterstitial</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseInterstitial.sol">Git Source</a></p>
<h2 id="functions-94"><a class="header" href="#functions-94">Functions</a></h2>
<h3 id="skipcomment"><a class="header" href="#skipcomment">skipComment</a></h3>
<p>The cursor currently points at the head of a comment. We need to skip
over all data until we find the end of the comment. This MAY REVERT if
the comment is malformed, e.g. if the comment doesn't start with <code>/*</code>.</p>
<pre><code class="language-solidity">function skipComment(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>state</code></td><td><code>ParseState</code></td><td>The parser state.</td></tr>
<tr><td><code>cursor</code></td><td><code>uint256</code></td><td>The current cursor position.</td></tr>
<tr><td><code>end</code></td><td><code>uint256</code></td><td></td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The new cursor position.</td></tr>
</tbody></table>
</div>
<h3 id="skipwhitespace"><a class="header" href="#skipwhitespace">skipWhitespace</a></h3>
<pre><code class="language-solidity">function skipWhitespace(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<h3 id="parseinterstitial"><a class="header" href="#parseinterstitial">parseInterstitial</a></h3>
<pre><code class="language-solidity">function parseInterstitial(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparseliteral"><a class="header" href="#libparseliteral">LibParseLiteral</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseLiteral.sol">Git Source</a></p>
<h2 id="functions-95"><a class="header" href="#functions-95">Functions</a></h2>
<h3 id="selectliteralparserbyindex"><a class="header" href="#selectliteralparserbyindex">selectLiteralParserByIndex</a></h3>
<pre><code class="language-solidity">function selectLiteralParserByIndex(ParseState memory state, uint256 index)
    internal
    pure
    returns (function(ParseState memory, uint256, uint256) pure returns (uint256));
</code></pre>
<h3 id="boundliteral"><a class="header" href="#boundliteral">boundLiteral</a></h3>
<p>Find the bounds for some literal at the cursor. The caller is responsible
for checking that the cursor is at the start of a literal and that the
cursor is less than the end. As each literal type has a different format,
this function returns the bounds for the literal and the type of the
literal. The bounds are:</p>
<ul>
<li>innerStart: the start of the literal, e.g. after the 0x in 0x1234</li>
<li>innerEnd: the end of the literal, e.g. after the 1234 in 0x1234</li>
<li>outerEnd: the end of the literal including any suffixes, MAY be the
same as innerEnd if there is no suffix.
The outerStart is the cursor, so it is not returned.</li>
</ul>
<pre><code class="language-solidity">function boundLiteral(ParseState memory state, uint256 cursor, uint256 end)
    internal
    pure
    returns (function(ParseState memory, uint256, uint256) pure returns (uint256), uint256, uint256, uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>state</code></td><td><code>ParseState</code></td><td>The parser state.</td></tr>
<tr><td><code>cursor</code></td><td><code>uint256</code></td><td>The start of the literal.</td></tr>
<tr><td><code>end</code></td><td><code>uint256</code></td><td>The end of the data that is allowed to be parsed.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>function (ParseState memory, uint256, uint256) pure returns (uint256)</code></td><td>The literal parser. This function can be called to convert the bounds into a uint256 value.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The inner start.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The inner end.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The outer end.</td></tr>
</tbody></table>
</div>
<h3 id="boundliteralstring"><a class="header" href="#boundliteralstring">boundLiteralString</a></h3>
<p>Find the bounds for some string literal at the cursor. The caller is
responsible for checking that the cursor is at the start of a string
literal. Bounds are as per <code>boundLiteral</code>.</p>
<pre><code class="language-solidity">function boundLiteralString(ParseState memory state, uint256 cursor, uint256 end)
    internal
    pure
    returns (function(ParseState memory, uint256, uint256) pure returns (uint256), uint256, uint256, uint256);
</code></pre>
<h3 id="parseliteralstring"><a class="header" href="#parseliteralstring">parseLiteralString</a></h3>
<p>Algorithm for parsing string literals:</p>
<ul>
<li>Get the inner length of the string</li>
<li>Mutate memory in place to add a length prefix, record the original data</li>
<li>Use this solidity string to build an <code>IntOrAString</code></li>
<li>Restore the original data that the length prefix overwrote</li>
<li>Return the <code>IntOrAString</code></li>
</ul>
<pre><code class="language-solidity">function parseLiteralString(ParseState memory, uint256 start, uint256 end) internal pure returns (uint256);
</code></pre>
<h3 id="boundliteralhex"><a class="header" href="#boundliteralhex">boundLiteralHex</a></h3>
<pre><code class="language-solidity">function boundLiteralHex(ParseState memory state, uint256 cursor, uint256 end)
    internal
    pure
    returns (function(ParseState memory, uint256, uint256) pure returns (uint256), uint256, uint256, uint256);
</code></pre>
<h3 id="boundliteralhexaddress"><a class="header" href="#boundliteralhexaddress">boundLiteralHexAddress</a></h3>
<p>Bounding a literal hex address is just a special case of bounding a
literal hex. The only difference is that every address is the same known
length as they are 160 bits (20 bytes). This means we need exactly 42
bytes between the start and end of the literal, including the 0x prefix,
as each byte of a hex literal string = 0.5 bytes of encoded data.</p>
<pre><code class="language-solidity">function boundLiteralHexAddress(ParseState memory state, uint256 cursor, uint256 end)
    internal
    pure
    returns (
        function(ParseState memory, uint256, uint256) pure returns (uint256) parser,
        uint256 innerStart,
        uint256 innerEnd,
        uint256 outerEnd
    );
</code></pre>
<h3 id="parseliteralhex"><a class="header" href="#parseliteralhex">parseLiteralHex</a></h3>
<p>Algorithm for parsing hexadecimal literals:</p>
<ul>
<li>start at the end of the literal</li>
<li>for each character:</li>
<li>convert the character to a nybble</li>
<li>shift the nybble into the total at the correct position
(4 bits per nybble)</li>
<li>return the total</li>
</ul>
<pre><code class="language-solidity">function parseLiteralHex(ParseState memory state, uint256 start, uint256 end) internal pure returns (uint256 value);
</code></pre>
<h3 id="boundliteraldecimal"><a class="header" href="#boundliteraldecimal">boundLiteralDecimal</a></h3>
<pre><code class="language-solidity">function boundLiteralDecimal(ParseState memory state, uint256 cursor, uint256 end)
    internal
    pure
    returns (function(ParseState memory, uint256, uint256) pure returns (uint256), uint256, uint256, uint256);
</code></pre>
<h3 id="parseliteraldecimal"><a class="header" href="#parseliteraldecimal">parseLiteralDecimal</a></h3>
<p>Algorithm for parsing decimal literals:</p>
<ul>
<li>start at the end of the literal</li>
<li>for each digit:</li>
<li>multiply the digit by 10^digit position</li>
<li>add the result to the total</li>
<li>return the total
This algorithm is ONLY safe if the caller has already checked that the
start/end span a non-zero length of valid decimal chars. The caller
can most easily do this by using the <code>boundLiteral</code> function.
Unsafe behavior is undefined and can easily result in out of bounds
reads as there are no checks that start/end are within <code>data</code>.</li>
</ul>
<pre><code class="language-solidity">function parseLiteralDecimal(ParseState memory state, uint256 start, uint256 end)
    internal
    pure
    returns (uint256 value);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-20"><a class="header" href="#constants-20">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseLiteral.sol">Git Source</a></p>
<h3 id="literal_parsers_length"><a class="header" href="#literal_parsers_length">LITERAL_PARSERS_LENGTH</a></h3>
<pre><code class="language-solidity">uint256 constant LITERAL_PARSERS_LENGTH = 3;
</code></pre>
<h3 id="literal_parser_index_hex"><a class="header" href="#literal_parser_index_hex">LITERAL_PARSER_INDEX_HEX</a></h3>
<pre><code class="language-solidity">uint256 constant LITERAL_PARSER_INDEX_HEX = 0;
</code></pre>
<h3 id="literal_parser_index_decimal"><a class="header" href="#literal_parser_index_decimal">LITERAL_PARSER_INDEX_DECIMAL</a></h3>
<pre><code class="language-solidity">uint256 constant LITERAL_PARSER_INDEX_DECIMAL = 1;
</code></pre>
<h3 id="literal_parser_index_string"><a class="header" href="#literal_parser_index_string">LITERAL_PARSER_INDEX_STRING</a></h3>
<pre><code class="language-solidity">uint256 constant LITERAL_PARSER_INDEX_STRING = 2;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="duplicatefingerprint"><a class="header" href="#duplicatefingerprint">DuplicateFingerprint</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseMeta.sol">Git Source</a></p>
<p><em>For metadata builder.</em></p>
<pre><code class="language-solidity">error DuplicateFingerprint();
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="wordiofnpointermismatch"><a class="header" href="#wordiofnpointermismatch">WordIOFnPointerMismatch</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseMeta.sol">Git Source</a></p>
<p><em>Words and io fn pointers aren't the same length.</em></p>
<pre><code class="language-solidity">error WordIOFnPointerMismatch(uint256 wordsLength, uint256 ioFnPointersLength);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparsemeta"><a class="header" href="#libparsemeta">LibParseMeta</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseMeta.sol">Git Source</a></p>
<h2 id="functions-96"><a class="header" href="#functions-96">Functions</a></h2>
<h3 id="wordbitmapped"><a class="header" href="#wordbitmapped">wordBitmapped</a></h3>
<pre><code class="language-solidity">function wordBitmapped(uint256 seed, bytes32 word) internal pure returns (uint256 bitmap, uint256 hashed);
</code></pre>
<h3 id="copywordsfromauthoringmeta"><a class="header" href="#copywordsfromauthoringmeta">copyWordsFromAuthoringMeta</a></h3>
<pre><code class="language-solidity">function copyWordsFromAuthoringMeta(AuthoringMetaV2[] memory authoringMeta) internal pure returns (bytes32[] memory);
</code></pre>
<h3 id="findbestexpander"><a class="header" href="#findbestexpander">findBestExpander</a></h3>
<pre><code class="language-solidity">function findBestExpander(AuthoringMetaV2[] memory metas)
    internal
    pure
    returns (uint8 bestSeed, uint256 bestExpansion, AuthoringMetaV2[] memory remaining);
</code></pre>
<h3 id="buildparsemetav2"><a class="header" href="#buildparsemetav2">buildParseMetaV2</a></h3>
<pre><code class="language-solidity">function buildParseMetaV2(AuthoringMetaV2[] memory authoringMeta, uint8 maxDepth)
    internal
    pure
    returns (bytes memory parseMeta);
</code></pre>
<h3 id="lookupword"><a class="header" href="#lookupword">lookupWord</a></h3>
<p>Given the parse meta and a word, return the index and io fn pointer for
the word. If the word is not found, then <code>exists</code> will be false. The
caller MUST check <code>exists</code> before using the other return values.</p>
<pre><code class="language-solidity">function lookupWord(ParseState memory state, bytes32 word) internal pure returns (bool, uint256);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>state</code></td><td><code>ParseState</code></td><td>The parser state.</td></tr>
<tr><td><code>word</code></td><td><code>bytes32</code></td><td>The word to lookup.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bool</code></td><td>True if the word exists in the parse meta.</td></tr>
<tr><td><code>&lt;none&gt;</code></td><td><code>uint256</code></td><td>The index of the word in the parse meta.</td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="constants-21"><a class="header" href="#constants-21">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseMeta.sol">Git Source</a></p>
<h3 id="fingerprint_mask"><a class="header" href="#fingerprint_mask">FINGERPRINT_MASK</a></h3>
<p><em>0xFFFFFF = 3 byte fingerprint
The fingerprint is 3 bytes because we're targetting the same collision
resistance on words as solidity functions. As we already use a fully byte to
map words across the expander, we only need 3 bytes for the fingerprint to
achieve 4 bytes of collision resistance, which is the same as a solidity
selector. This assumes that the byte selected to expand is uncorrelated with
the fingerprint bytes, which is a reasonable assumption as long as we use
different bytes from a keccak256 hash for each.
This assumes a single expander, if there are multiple expanders, then the
collision resistance only improves, so this is still safe.</em></p>
<pre><code class="language-solidity">uint256 constant FINGERPRINT_MASK = 0xFFFFFF;
</code></pre>
<h3 id="meta_item_size"><a class="header" href="#meta_item_size">META_ITEM_SIZE</a></h3>
<p><em>4 = 1 byte opcode index + 3 byte fingerprint</em></p>
<pre><code class="language-solidity">uint256 constant META_ITEM_SIZE = 4;
</code></pre>
<h3 id="meta_item_mask"><a class="header" href="#meta_item_mask">META_ITEM_MASK</a></h3>
<pre><code class="language-solidity">uint256 constant META_ITEM_MASK = (1 &lt;&lt; META_ITEM_SIZE) - 1;
</code></pre>
<h3 id="meta_expansion_size"><a class="header" href="#meta_expansion_size">META_EXPANSION_SIZE</a></h3>
<p><em>33 = 32 bytes for expansion + 1 byte for seed</em></p>
<pre><code class="language-solidity">uint256 constant META_EXPANSION_SIZE = 0x21;
</code></pre>
<h3 id="meta_prefix_size"><a class="header" href="#meta_prefix_size">META_PREFIX_SIZE</a></h3>
<p><em>1 = 1 byte for depth</em></p>
<pre><code class="language-solidity">uint256 constant META_PREFIX_SIZE = 1;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparseoperand"><a class="header" href="#libparseoperand">LibParseOperand</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseOperand.sol">Git Source</a></p>
<h2 id="functions-97"><a class="header" href="#functions-97">Functions</a></h2>
<h3 id="parseoperand"><a class="header" href="#parseoperand">parseOperand</a></h3>
<pre><code class="language-solidity">function parseOperand(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<h3 id="handleoperand"><a class="header" href="#handleoperand">handleOperand</a></h3>
<p>Standard dispatch for handling an operand after it is parsed, using the
encoded function pointers on the current parse state. Requires that the
word index has been looked up by the parser, exists, and the literal
values have all been parsed out of the operand string. In the case of
the main parser this will all be done inline, but in the case of a sub
parser the literal extraction will be done first, then the word lookup
will have to be done by the sub parser, alongside the values provided
by the main parser.</p>
<pre><code class="language-solidity">function handleOperand(ParseState memory state, uint256 wordIndex) internal pure returns (Operand);
</code></pre>
<h3 id="handleoperanddisallowed"><a class="header" href="#handleoperanddisallowed">handleOperandDisallowed</a></h3>
<pre><code class="language-solidity">function handleOperandDisallowed(uint256[] memory values) internal pure returns (Operand);
</code></pre>
<h3 id="handleoperandsinglefull"><a class="header" href="#handleoperandsinglefull">handleOperandSingleFull</a></h3>
<p>There must be one or zero values. The fallback is 0 if nothing is
provided, else the provided value MUST fit in two bytes and is used as
is.</p>
<pre><code class="language-solidity">function handleOperandSingleFull(uint256[] memory values) internal pure returns (Operand operand);
</code></pre>
<h3 id="handleoperanddoubleperbytenodefault"><a class="header" href="#handleoperanddoubleperbytenodefault">handleOperandDoublePerByteNoDefault</a></h3>
<p>There must be exactly two values. There is no default fallback. Each
value MUST fit in one byte and is used as is.</p>
<pre><code class="language-solidity">function handleOperandDoublePerByteNoDefault(uint256[] memory values) internal pure returns (Operand operand);
</code></pre>
<h3 id="handleoperand8m1m1"><a class="header" href="#handleoperand8m1m1">handleOperand8M1M1</a></h3>
<p>8 bit value then maybe 1 bit flag then maybe 1 bit flag. Fallback to 0
for both flags if not provided.</p>
<pre><code class="language-solidity">function handleOperand8M1M1(uint256[] memory values) internal pure returns (Operand operand);
</code></pre>
<h3 id="handleoperandm1m1"><a class="header" href="#handleoperandm1m1">handleOperandM1M1</a></h3>
<p>2x maybe 1 bit flags. Fallback to 0 for both flags if not provided.</p>
<pre><code class="language-solidity">function handleOperandM1M1(uint256[] memory values) internal pure returns (Operand operand);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparsepragma"><a class="header" href="#libparsepragma">LibParsePragma</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParsePragma.sol">Git Source</a></p>
<h2 id="functions-98"><a class="header" href="#functions-98">Functions</a></h2>
<h3 id="pushsubparser"><a class="header" href="#pushsubparser">pushSubParser</a></h3>
<pre><code class="language-solidity">function pushSubParser(ParseState memory state, uint256 subParser) internal pure;
</code></pre>
<h3 id="parsepragma"><a class="header" href="#parsepragma">parsePragma</a></h3>
<pre><code class="language-solidity">function parsePragma(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-22"><a class="header" href="#constants-22">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParsePragma.sol">Git Source</a></p>
<h3 id="pragma_keyword_bytes"><a class="header" href="#pragma_keyword_bytes">PRAGMA_KEYWORD_BYTES</a></h3>
<pre><code class="language-solidity">bytes constant PRAGMA_KEYWORD_BYTES = bytes(&quot;using-words-from&quot;);
</code></pre>
<h3 id="pragma_keyword_bytes32"><a class="header" href="#pragma_keyword_bytes32">PRAGMA_KEYWORD_BYTES32</a></h3>
<pre><code class="language-solidity">bytes32 constant PRAGMA_KEYWORD_BYTES32 = bytes32(PRAGMA_KEYWORD_BYTES);
</code></pre>
<h3 id="pragma_keyword_bytes_length"><a class="header" href="#pragma_keyword_bytes_length">PRAGMA_KEYWORD_BYTES_LENGTH</a></h3>
<pre><code class="language-solidity">uint256 constant PRAGMA_KEYWORD_BYTES_LENGTH = 16;
</code></pre>
<h3 id="pragma_keyword_mask"><a class="header" href="#pragma_keyword_mask">PRAGMA_KEYWORD_MASK</a></h3>
<pre><code class="language-solidity">bytes32 constant PRAGMA_KEYWORD_MASK = bytes32(~((1 &lt;&lt; (32 - PRAGMA_KEYWORD_BYTES_LENGTH) * 8) - 1));
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparsestackname"><a class="header" href="#libparsestackname">LibParseStackName</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseStackName.sol">Git Source</a></p>
<h2 id="functions-99"><a class="header" href="#functions-99">Functions</a></h2>
<h3 id="pushstackname"><a class="header" href="#pushstackname">pushStackName</a></h3>
<p>Push a word onto the stack name stack.</p>
<pre><code class="language-solidity">function pushStackName(ParseState memory state, bytes32 word) internal pure returns (bool exists, uint256 index);
</code></pre>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>exists</code></td><td><code>bool</code></td><td>Whether the word already existed.</td></tr>
<tr><td><code>index</code></td><td><code>uint256</code></td><td>The new index after the word was pushed. Will be unchanged if the word already existed.</td></tr>
</tbody></table>
</div>
<h3 id="stacknameindex"><a class="header" href="#stacknameindex">stackNameIndex</a></h3>
<p>Retrieve the index of a previously pushed stack name.</p>
<pre><code class="language-solidity">function stackNameIndex(ParseState memory state, bytes32 word) internal pure returns (bool exists, uint256 index);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parsestacktracker"><a class="header" href="#parsestacktracker">ParseStackTracker</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseStackTracker.sol">Git Source</a></p>
<pre><code class="language-solidity">type ParseStackTracker is uint256;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libparsestacktracker"><a class="header" href="#libparsestacktracker">LibParseStackTracker</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseStackTracker.sol">Git Source</a></p>
<h2 id="functions-100"><a class="header" href="#functions-100">Functions</a></h2>
<h3 id="pushinputs"><a class="header" href="#pushinputs">pushInputs</a></h3>
<p>Pushing inputs requires special handling as the inputs need to be tallied
separately and in addition to the regular stack pushes.</p>
<pre><code class="language-solidity">function pushInputs(ParseStackTracker tracker, uint256 n) internal pure returns (ParseStackTracker);
</code></pre>
<h3 id="push"><a class="header" href="#push">push</a></h3>
<pre><code class="language-solidity">function push(ParseStackTracker tracker, uint256 n) internal pure returns (ParseStackTracker);
</code></pre>
<h3 id="pop"><a class="header" href="#pop">pop</a></h3>
<pre><code class="language-solidity">function pop(ParseStackTracker tracker, uint256 n) internal pure returns (ParseStackTracker);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="parsestate"><a class="header" href="#parsestate">ParseState</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseState.sol">Git Source</a></p>
<p>The parser is stateful. This struct keeps track of the entire state.</p>
<pre><code class="language-solidity">struct ParseState {
    uint256 activeSourcePtr;
    uint256 topLevel0;
    uint256 topLevel1;
    uint256 parenTracker0;
    uint256 parenTracker1;
    uint256 lineTracker;
    uint256 subParsers;
    uint256 sourcesBuilder;
    uint256 fsm;
    uint256 stackNames;
    uint256 stackNameBloom;
    uint256 literalBloom;
    uint256 constantsBuilder;
    bytes literalParsers;
    bytes operandHandlers;
    uint256[] operandValues;
    ParseStackTracker stackTracker;
    bytes data;
    bytes meta;
}
</code></pre>
<p><strong>Properties</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>activeSourcePtr</code></td><td><code>uint256</code></td><td>The pointer to the current source being built. The active source being pointed to is: - low 16 bits: bitwise offset into the source for the next word to be written. Starts at 0x20. Once a source is no longer the active source, i.e. it is full and a member of the LL tail, the offset is replaced with a pointer to the next source (towards the head) to build a doubly linked list. - mid 16 bits: pointer to the previous active source (towards the tail). This is a linked list of sources that are built RTL and then reversed to LTR to eval. - high bits: 4 byte opcodes and operand pairs.</td></tr>
<tr><td><code>topLevel0</code></td><td><code>uint256</code></td><td>Memory region for stack word counters. The first byte is a counter/offset into the region, which increments for every top level item parsed on the RHS. The remaining 31 bytes are the word counters for each stack item, which are incremented for every op pushed to the source. This is reset to 0 for every new source.</td></tr>
<tr><td><code>topLevel1</code></td><td><code>uint256</code></td><td>31 additional bytes of stack words, allowing for 62 top level stack items total per source. The final byte is used to count the stack height according to the LHS for the current source. This is reset to 0 for every new source.</td></tr>
<tr><td><code>parenTracker0</code></td><td><code>uint256</code></td><td>Memory region for tracking pointers to words in the source, and counters for the number of words in each paren group. The first byte is a counter/offset into the region. The second byte is a phantom counter for the root level, the remaining 30 bytes are the paren group words.</td></tr>
<tr><td><code>parenTracker1</code></td><td><code>uint256</code></td><td>32 additional bytes of paren group words.</td></tr>
<tr><td><code>lineTracker</code></td><td><code>uint256</code></td><td>A 32 byte memory region for tracking the current line. Will be partially reset for each line when <code>endLine</code> is called. Fully reset when a new source is started. Bytes from low to high: - byte 0: Lowest byte is the number of LHS items parsed. This is the low byte so that a simple ++ is a valid operation on the line tracker while parsing the LHS. This is reset to 0 for each new line. - byte 1: A snapshot of the first high byte of <code>topLevel0</code>, i.e. the offset of top level items as at the beginning of the line. This is reset to the high byte of <code>topLevel0</code> on each new line. - bytes 2+: A sequence of 2 byte pointers to before the start of each top level item, which is implictly after the end of the previous top level item. Allows us to quickly find the start of the RHS source for each top level item.</td></tr>
<tr><td><code>subParsers</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>sourcesBuilder</code></td><td><code>uint256</code></td><td>A builder for the sources array. This is a 256 bit integer where each 16 bits is a literal memory pointer to a source.</td></tr>
<tr><td><code>fsm</code></td><td><code>uint256</code></td><td>The finite state machine representation of the parser. - bit 0: LHS/RHS =&gt; 0 = LHS, 1 = RHS - bit 1: yang/yin =&gt; 0 = yin, 1 = yang - bit 2: word end =&gt; 0 = not end, 1 = end - bit 3: accepting inputs =&gt; 0 = not accepting, 1 = accepting - bit 4: interstitial =&gt; 0 = not interstitial, 1 = interstitial</td></tr>
<tr><td><code>stackNames</code></td><td><code>uint256</code></td><td>A linked list of stack names. As the parser encounters named stack items it pushes them onto this linked list. The linked list is in FILO order, so the first item on the stack is the last item in the list. This makes it more efficient to reference more recent stack names on the RHS.</td></tr>
<tr><td><code>stackNameBloom</code></td><td><code>uint256</code></td><td></td></tr>
<tr><td><code>literalBloom</code></td><td><code>uint256</code></td><td>A bloom filter of all the literals that have been encountered so far. This is used to quickly dedupe literals.</td></tr>
<tr><td><code>constantsBuilder</code></td><td><code>uint256</code></td><td>A builder for the constants array. - low 16 bits: the height (length) of the constants array. - high 240 bits: a linked list of constant values. Each constant value is stored as a 256 bit key/value pair. The key is the fingerprint of the constant value, and the value is the constant value itself.</td></tr>
<tr><td><code>literalParsers</code></td><td><code>bytes</code></td><td>A 256 bit integer where each 16 bits is a function pointer to a literal parser.</td></tr>
<tr><td><code>operandHandlers</code></td><td><code>bytes</code></td><td></td></tr>
<tr><td><code>operandValues</code></td><td><code>uint256[]</code></td><td></td></tr>
<tr><td><code>stackTracker</code></td><td><code>ParseStackTracker</code></td><td></td></tr>
<tr><td><code>data</code></td><td><code>bytes</code></td><td></td></tr>
<tr><td><code>meta</code></td><td><code>bytes</code></td><td></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="libparsestate"><a class="header" href="#libparsestate">LibParseState</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseState.sol">Git Source</a></p>
<h2 id="functions-101"><a class="header" href="#functions-101">Functions</a></h2>
<h3 id="newactivesourcepointer"><a class="header" href="#newactivesourcepointer">newActiveSourcePointer</a></h3>
<pre><code class="language-solidity">function newActiveSourcePointer(uint256 oldActiveSourcePointer) internal pure returns (uint256);
</code></pre>
<h3 id="resetsource"><a class="header" href="#resetsource">resetSource</a></h3>
<pre><code class="language-solidity">function resetSource(ParseState memory state) internal pure;
</code></pre>
<h3 id="newstate-1"><a class="header" href="#newstate-1">newState</a></h3>
<pre><code class="language-solidity">function newState(bytes memory data, bytes memory meta, bytes memory operandHandlers, bytes memory literalParsers)
    internal
    pure
    returns (ParseState memory);
</code></pre>
<h3 id="snapshotsourceheadtolinetracker"><a class="header" href="#snapshotsourceheadtolinetracker">snapshotSourceHeadToLineTracker</a></h3>
<pre><code class="language-solidity">function snapshotSourceHeadToLineTracker(ParseState memory state) internal pure;
</code></pre>
<h3 id="endline"><a class="header" href="#endline">endLine</a></h3>
<pre><code class="language-solidity">function endLine(ParseState memory state, uint256 cursor) internal pure;
</code></pre>
<h3 id="highwater"><a class="header" href="#highwater">highwater</a></h3>
<p>We potentially just closed out some group of arbitrarily nested parens
OR a lone literal value at the top level. IF we are at the top level we
move the immutable stack highwater mark forward 1 item, which moves the
RHS offset forward 1 byte to start a new word counter.</p>
<pre><code class="language-solidity">function highwater(ParseState memory state) internal pure;
</code></pre>
<h3 id="pushconstantvalue"><a class="header" href="#pushconstantvalue">pushConstantValue</a></h3>
<p>Includes a constant value in the constants linked list so that it will
appear in the final constants array.</p>
<pre><code class="language-solidity">function pushConstantValue(ParseState memory state, uint256 fingerprint, uint256 value) internal pure;
</code></pre>
<h3 id="pushliteral"><a class="header" href="#pushliteral">pushLiteral</a></h3>
<pre><code class="language-solidity">function pushLiteral(ParseState memory state, uint256 cursor, uint256 end) internal pure returns (uint256);
</code></pre>
<h3 id="pushoptosource"><a class="header" href="#pushoptosource">pushOpToSource</a></h3>
<pre><code class="language-solidity">function pushOpToSource(ParseState memory state, uint256 opcode, Operand operand) internal pure;
</code></pre>
<h3 id="endsource"><a class="header" href="#endsource">endSource</a></h3>
<pre><code class="language-solidity">function endSource(ParseState memory state) internal pure;
</code></pre>
<h3 id="buildbytecode"><a class="header" href="#buildbytecode">buildBytecode</a></h3>
<pre><code class="language-solidity">function buildBytecode(ParseState memory state) internal pure returns (bytes memory bytecode);
</code></pre>
<h3 id="buildconstants"><a class="header" href="#buildconstants">buildConstants</a></h3>
<pre><code class="language-solidity">function buildConstants(ParseState memory state) internal pure returns (uint256[] memory constants);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="constants-23"><a class="header" href="#constants-23">Constants</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibParseState.sol">Git Source</a></p>
<h3 id="empty_active_source"><a class="header" href="#empty_active_source">EMPTY_ACTIVE_SOURCE</a></h3>
<p><em>Initial state of an active source is just the starting offset which is
0x20.</em></p>
<pre><code class="language-solidity">uint256 constant EMPTY_ACTIVE_SOURCE = 0x20;
</code></pre>
<h3 id="fsm_yang_mask"><a class="header" href="#fsm_yang_mask">FSM_YANG_MASK</a></h3>
<pre><code class="language-solidity">uint256 constant FSM_YANG_MASK = 1;
</code></pre>
<h3 id="fsm_word_end_mask"><a class="header" href="#fsm_word_end_mask">FSM_WORD_END_MASK</a></h3>
<pre><code class="language-solidity">uint256 constant FSM_WORD_END_MASK = 1 &lt;&lt; 1;
</code></pre>
<h3 id="fsm_accepting_inputs_mask"><a class="header" href="#fsm_accepting_inputs_mask">FSM_ACCEPTING_INPUTS_MASK</a></h3>
<pre><code class="language-solidity">uint256 constant FSM_ACCEPTING_INPUTS_MASK = 1 &lt;&lt; 2;
</code></pre>
<h3 id="fsm_active_source_mask"><a class="header" href="#fsm_active_source_mask">FSM_ACTIVE_SOURCE_MASK</a></h3>
<p><em>If a source is active we cannot finish parsing without a semi to trigger
finalisation.</em></p>
<pre><code class="language-solidity">uint256 constant FSM_ACTIVE_SOURCE_MASK = 1 &lt;&lt; 3;
</code></pre>
<h3 id="fsm_default"><a class="header" href="#fsm_default">FSM_DEFAULT</a></h3>
<p>*fsm default state is:</p>
<ul>
<li>yin</li>
<li>not word end</li>
<li>accepting inputs*</li>
</ul>
<pre><code class="language-solidity">uint256 constant FSM_DEFAULT = FSM_ACCEPTING_INPUTS_MASK;
</code></pre>
<h3 id="operand_values_length"><a class="header" href="#operand_values_length">OPERAND_VALUES_LENGTH</a></h3>
<p><em>The operand values array is 4 words long. In the future we could have
some kind of logic that reallocates and expands this if we discover that
we need more than 4 operands for a single opcode. Currently there are no
opcodes in the main parser that require more than 4 operands. Of course some
sub parser could implement something that expects more than 4, in which case
we will have to revisit this, but it won't be a breaking change. Consider
that operands in the output are only 2 bytes, so a 4 value operand array is
already only allowing for 4 bits per value on average, which is pretty tight
for anything other than bit flags.</em></p>
<pre><code class="language-solidity">uint256 constant OPERAND_VALUES_LENGTH = 4;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libsubparse"><a class="header" href="#libsubparse">LibSubParse</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/parse/LibSubParse.sol">Git Source</a></p>
<h2 id="functions-102"><a class="header" href="#functions-102">Functions</a></h2>
<h3 id="subparserconstant"><a class="header" href="#subparserconstant">subParserConstant</a></h3>
<p>Sub parse a value into the bytecode that will run on the interpreter to
push the given value onto the stack, using the constant opcode at eval.</p>
<pre><code class="language-solidity">function subParserConstant(uint256 constantsHeight, uint256 value)
    internal
    pure
    returns (bool, bytes memory, uint256[] memory);
</code></pre>
<h3 id="subparserextern"><a class="header" href="#subparserextern">subParserExtern</a></h3>
<p>Sub parse a known extern opcode index into the bytecode that will run
on the interpreter to call the given extern contract. This requires the
parsing has already matched a word to the extern opcode index, so it
implies the parse meta has been traversed and the parse index has been
mapped to an extern opcode index somehow.</p>
<pre><code class="language-solidity">function subParserExtern(
    IInterpreterExternV3 extern,
    uint256 constantsHeight,
    uint256 inputsByte,
    uint256 outputsByte,
    Operand operand,
    uint256 opcodeIndex
) internal pure returns (bool, bytes memory, uint256[] memory);
</code></pre>
<h3 id="subparseslice"><a class="header" href="#subparseslice">subParseSlice</a></h3>
<pre><code class="language-solidity">function subParseSlice(ParseState memory state, uint256 cursor, uint256 end) internal pure;
</code></pre>
<h3 id="subparse-2"><a class="header" href="#subparse-2">subParse</a></h3>
<pre><code class="language-solidity">function subParse(ParseState memory state, bytes memory bytecode)
    internal
    pure
    returns (bytes memory, uint256[] memory);
</code></pre>
<h3 id="consumeinputdata"><a class="header" href="#consumeinputdata">consumeInputData</a></h3>
<pre><code class="language-solidity">function consumeInputData(
    bytes memory data,
    bytes memory meta,
    bytes memory operandHandlers,
    bytes memory literalParsers
) internal pure returns (uint256 constantsHeight, uint256 ioByte, ParseState memory state);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="contents-32"><a class="header" href="#contents-32">Contents</a></h1>
<ul>
<li><a href="src/lib/state/LibInterpreterStateDataContractNP.sol/library.LibInterpreterStateDataContractNP.html">LibInterpreterStateDataContractNP</a></li>
<li><a href="src/lib/state/LibInterpreterStateNP.sol/struct.InterpreterStateNP.html">InterpreterStateNP</a></li>
<li><a href="src/lib/state/LibInterpreterStateNP.sol/library.LibInterpreterStateNP.html">LibInterpreterStateNP</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libinterpreterstatedatacontractnp"><a class="header" href="#libinterpreterstatedatacontractnp">LibInterpreterStateDataContractNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/state/LibInterpreterStateDataContractNP.sol">Git Source</a></p>
<h2 id="functions-103"><a class="header" href="#functions-103">Functions</a></h2>
<h3 id="serializesizenp"><a class="header" href="#serializesizenp">serializeSizeNP</a></h3>
<pre><code class="language-solidity">function serializeSizeNP(bytes memory bytecode, uint256[] memory constants) internal pure returns (uint256 size);
</code></pre>
<h3 id="unsafeserializenp"><a class="header" href="#unsafeserializenp">unsafeSerializeNP</a></h3>
<pre><code class="language-solidity">function unsafeSerializeNP(Pointer cursor, bytes memory bytecode, uint256[] memory constants) internal pure;
</code></pre>
<h3 id="unsafedeserializenp"><a class="header" href="#unsafedeserializenp">unsafeDeserializeNP</a></h3>
<pre><code class="language-solidity">function unsafeDeserializeNP(
    bytes memory serialized,
    uint256 sourceIndex,
    FullyQualifiedNamespace namespace,
    IInterpreterStoreV1 store,
    uint256[][] memory context,
    bytes memory fs
) internal pure returns (InterpreterStateNP memory);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="interpreterstatenp"><a class="header" href="#interpreterstatenp">InterpreterStateNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/state/LibInterpreterStateNP.sol">Git Source</a></p>
<pre><code class="language-solidity">struct InterpreterStateNP {
    Pointer[] stackBottoms;
    uint256[] constants;
    uint256 sourceIndex;
    MemoryKV stateKV;
    FullyQualifiedNamespace namespace;
    IInterpreterStoreV1 store;
    uint256[][] context;
    bytes bytecode;
    bytes fs;
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libinterpreterstatenp"><a class="header" href="#libinterpreterstatenp">LibInterpreterStateNP</a></h1>
<p><a href="https://github.com/rainlanguage/rain.interpreter/blob/f1a1e902622f14ed572880011113c54a0bcfe144/src/lib/state/LibInterpreterStateNP.sol">Git Source</a></p>
<h2 id="functions-104"><a class="header" href="#functions-104">Functions</a></h2>
<h3 id="fingerprint"><a class="header" href="#fingerprint">fingerprint</a></h3>
<pre><code class="language-solidity">function fingerprint(InterpreterStateNP memory state) internal pure returns (bytes32);
</code></pre>
<h3 id="stackbottoms"><a class="header" href="#stackbottoms">stackBottoms</a></h3>
<pre><code class="language-solidity">function stackBottoms(uint256[][] memory stacks) internal pure returns (Pointer[] memory);
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
